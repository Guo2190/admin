(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{110:function(t,e,a){"use strict";a.r(e);var l={data:()=>({LANG:LANG,allshow:!1,allrequire:!1,allValidate:!1,tableData:[],oColumn:[]}),props:{headModel:String,bodyModelUrl:String},methods:{init(){let t=this;if(this.bodyModelUrl){let t=this.bodyModelUrl;this.$.autoAjax("get",t,"",{ok:t=>{this.tableData=t.data,this.allshow=this.changeAll("visibility")===this.tableData.length,this.allrequire=this.changeAll("necessity")===this.tableData.length,this.allValidate=6===this.changeAll("validate")},p:()=>{},error:t=>{console.log(t)}})}this.$.get(this.headModel,e=>{t.oColumn=e.columns||[]})},checkAllChange(t){this.tableData.forEach(e=>{switch(t){case"allshow":this.allshow||(this.allrequire=!1,e.necessity="0"),this.allshow?e.visibility="1":e.visibility="0";break;case"allrequire":this.allrequire?e.necessity="1":e.necessity="0";break;case"allValidate":this.allValidate?"1"!=e.validate&&"0"!=e.validate||(e.validate="1"):"1"!=e.validate&&"0"!=e.validate||(e.validate="0")}})},changeAll(t){let e=0;return this.tableData.forEach(a=>{"1"==a[t]?e++:"0"==a[t]&&e--}),e},changeCheck(t,e,a){switch(this.tableData[a][t]="1"==this.tableData[a][t]?"0":"1",t){case"visibility":this.tableData[a].necessity="0"==this.tableData[a][t]?"0":this.tableData[a].necessity,this.tableData[a].validate="0"==this.tableData[a][t]?"0":this.tableData[a].validate,this.allshow=this.changeAll(t)===this.tableData.length;break;case"necessity":this.allrequire=this.changeAll(t)===this.tableData.length;break;case"validate":this.allValidate=6===this.changeAll(t)}},doSave(){this.$emit("save-data",{item:this.tableData})}},watch:{bodyModelUrl:{handler(t,e){this.init()},immediate:!0,deep:!0}},created:function(){this.init()}},s=a(10);var i=function(t){a(421)},n={data:()=>({radio:"agent",LANG:LANG,checkedgx:!1,tableUrl:"",columnsUrl:"",select:!0,btntype:"agent",type:"",numberType:"pc"}),components:{modelset:Object(s.a)(l,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"modelSet"}},[a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small"},domProps:{textContent:t._s(t.LANG["保存"]||"保存")},on:{click:t.doSave}}),t._v(" "),a("table",{staticClass:"el-table el-table__header tCent w100",attrs:{cellspacing:"0",cellpadding:"0",border:"1"}},[a("tr",[a("th",{staticClass:"is-leaf three tCent",attrs:{colspan:"1",rowspan:"1"}},[a("div",[t._v(t._s(t.LANG["注册内容"]||"注册内容"))])]),t._v(" "),a("th",{staticClass:"is-leaf three tCent",attrs:{colspan:"1",rowspan:"1"}},[a("div",[t._v(t._s(t.LANG["是否显示"]||"是否显示")+"\n                    "),a("el-checkbox",{on:{change:function(e){return t.checkAllChange("allshow")}},model:{value:t.allshow,callback:function(e){t.allshow=e},expression:"allshow"}})],1)]),t._v(" "),a("th",{staticClass:"is-leaf three tCent",attrs:{colspan:"1",rowspan:"1"}},[a("div",[t._v(t._s(t.LANG["是否必填"]||"是否必填")+"\n                    "),a("el-checkbox",{attrs:{disabled:!t.allshow},on:{change:function(e){return t.checkAllChange("allrequire")}},model:{value:t.allrequire,callback:function(e){t.allrequire=e},expression:"allrequire"}})],1)]),t._v(" "),a("th",{staticClass:"is-leaf three tCent",attrs:{colspan:"1",rowspan:"1"}},[a("div",[t._v(t._s(t.LANG["是否验证"]||"是否验证")+"\n                    "),a("el-checkbox",{on:{change:function(e){return t.checkAllChange("allValidate")}},model:{value:t.allValidate,callback:function(e){t.allValidate=e},expression:"allValidate"}})],1)])]),t._v(" "),a("tbody",t._l(t.tableData,function(e,l){return a("tr",t._l(t.oColumn,function(s,i){return a("td",{staticClass:"el-table_1_column_19 three"},[s.checkbox?t._e():a("el-tag",{staticClass:"font14",attrs:{type:"success"}},[t._v(t._s(t.LANG[e[s.prop]]||e[s.prop]))]),t._v(" "),"1"==e[s.prop]?a("el-button",{attrs:{type:"success",size:"mini",disabled:"0"==e.visibility&&"necessity"==s.prop},on:{click:function(e){return t.changeCheck(s.prop,s,l)}}},[t._v("启用")]):t._e(),t._v(" "),"0"==e[s.prop]?a("el-button",{attrs:{type:"warning",size:"mini",disabled:"0"==e.visibility&&"necessity"==s.prop},on:{click:function(e){return t.changeCheck(s.prop,s,l)}}},[t._v("停用")]):t._e()],1)}),0)}),0)])],1)},[],!1,i,"data-v-67326c12",null).exports,tablegrid:a(202).a},watch:{radio:function(t,e){t!==e&&("user"===t&&(this.type="user",this.tableUrl=URL.api+ROUTES.GET.system.vipOrAgency+"?type=user&pf="+this.numberType),"agent"===t&&(this.type="agent",this.tableUrl=URL.api+ROUTES.GET.system.vipOrAgency+"?type=agent"))}},methods:{init(){this.columnsUrl="static/json/systemSettings/registerSettings/columns.json",this.tableUrl=URL.api+ROUTES.GET.system.vipOrAgency+"?type=agent",this.type="agent",this.radio="agent"},saveData(t){if(t.item){let e={type:this.type,pf:this.numberType,data:t.item},a=this,l=URL.api+ROUTES.PATCH.system.registration;console.log(e),this.$.autoAjax("patch",l,e,{ok:t=>{0==t.state&&t.data?a.$message.success(LANG["保存配置成功"]||"保存配置成功"):a.$message.error(LANG["保存配置失败"]||"保存配置失败")},p:()=>{},error:t=>{console.log(t)}})}},setNumberType(t){this.numberType!==t&&(this.numberType=t,this.tableUrl=URL.api+ROUTES.GET.system.vipOrAgency+"?type="+this.type+"&pf="+this.numberType)},changeRadio(t){this.numberType="pc"}},created:function(){this.init()},activated(){this.init()}};var r=function(t){a(420)},o=Object(s.a)(n,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"templateManage w100",attrs:{id:"currencySettings"}},[a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-radio-group",{on:{change:t.changeRadio},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[a("el-radio",{attrs:{label:"agent"}},[t._v(t._s(t.LANG["代理注册"]||"代理注册"))]),t._v(" "),a("el-radio",{attrs:{label:"user"}},[t._v(t._s(t.LANG["会员注册"]||"会员注册"))])],1)],1),t._v(" "),a("el-col",{staticClass:"mt10"},[a("el-button",{attrs:{size:"small",type:"pc"===t.numberType?"primary":""},on:{click:function(e){return t.setNumberType("pc")}}},[t._v("PC\n                ")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"h5"===t.numberType?"primary":"",disabled:"agent"===t.radio},on:{click:function(e){return t.setNumberType("h5")}}},[t._v("H5\n                ")])],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("modelset",{attrs:{headModel:t.columnsUrl,bodyModelUrl:t.tableUrl},on:{"save-data":t.saveData}})],1)],1)],1)],1)},[],!1,r,null,null);e.default=o.exports},420:function(t,e,a){},421:function(t,e,a){}}]);