(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{118:function(t,e,a){"use strict";a.r(e);var s=a(271),l=(a(208),a(202)),i=a(0);i.default.filter("formatDate",function(t,e){let a=new Date(t),s=function(t){return(t<10?"0":"")+t};return e.replace(/yyyy|MM|dd|HH|mm|ss/g,function(t){switch(t){case"yyyy":return s(a.getFullYear());case"MM":return s(a.getMonth()+1);case"mm":return s(a.getMinutes());case"dd":return s(a.getDate());case"HH":return s(a.getHours());case"ss":return s(a.getSeconds())}})}),i.default.filter("filterOrign",function(t){return"1"==t?"pc":"2"==t?"h5":"app"}),i.default.filter("filterArray",function(t){return t.length&&t.length>1?t.join("/"):t[0]}),i.default.filter("filterStatus",function(t){return"open"==t?"已结算":"unopen"==t?"未结算":"已撤销"});var r={data:()=>({LANG:LANG}),props:{tableData:Array}},o=a(10),n=Object(o.a)(r,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"noteDetail"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("table",{staticClass:"el-table el-table__header",staticStyle:{width:"100%"},attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[a("tr",[a("th",{staticClass:"is-leaf",attrs:{colspan:"4",rowspan:"1"}},[a("div",{staticClass:"cell"},[t._v(t._s(t.LANG["注单号："]||"注单号：")+t._s(t.tableData.order_number))])])]),t._v(" "),a("tr",[a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.LANG["用户名"]||"用户名"))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.tableData.user_name))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.LANG["上级代理"]||"上级代理"))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.tableData.agent_name))])])]),t._v(" "),a("tr",[a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.LANG["投注时间"]||"投注时间"))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t._f("formatDate")(t.tableData.created,"yyyy-MM-dd HH:mm:ss"))+" ")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.LANG["投注金额"]||"投注金额"))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t._f("formatMoney")(t.tableData.pay_money)))])])]),t._v(" "),a("tr",[a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.LANG["彩票名称"]||"彩票名称"))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.tableData.lottery_name))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.LANG["有效投注"]||"有效投注"))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t._f("formatMoney")(t.tableData.valid_bet)))])])]),t._v(" "),a("tr",[a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.LANG["玩法"]||"玩法"))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.tableData.odds_type))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.LANG["赔率"]||"赔率"))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t._f("filterArray")(t.tableData.odds)))])])]),t._v(" "),a("tr",[a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.LANG["期号"]||"期号"))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.tableData.lottery_number))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.LANG["派彩金额"]||"派彩金额"))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t._f("formatMoney")(t.tableData.send_prize)))])])]),t._v(" "),a("tr",[a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.LANG["注数"]||"注数"))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.tableData.bet_num))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.LANG["倍数"]||"倍数"))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.tableData.times))])])]),t._v(" "),a("tr",[a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.LANG["状态"]||"状态"))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t._f("filterStatus")(t.tableData.status)))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.LANG["输赢"]||"输赢"))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t._f("formatMoney")(t.tableData.lose_earn)))])])]),t._v(" "),a("tr",[a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.LANG["来源"]||"来源"))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t._f("filterOrign")(t.tableData.origin)))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.LANG["所属追号"]||"所属追号"))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.tableData.chase_number))])])]),t._v(" "),a("tr",[a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.LANG["投注内容"]||"投注内容"))])]),t._v(" "),a("td",{attrs:{colspan:"3"}},[a("div",{staticClass:"cell"},[t._v(t._s(t.tableData.play_number))])])]),t._v(" "),a("tr",[a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.LANG["开奖号码"]||"开奖号码"))])]),t._v(" "),a("td",{attrs:{colspan:"3"}},[a("div",{staticClass:"cell"},[t._v(t._s(t.tableData.period_code))])])])])])],1)],1)},[],!1,null,null,null).exports,d=(a(223),a(206)),y=a(203),_={data:()=>({initName:{lottery:{nameval:""}},formType:"",type:"search",labelWidth:"90px",searchConfig:[{type:"quickDate",showTimes:!0},{prop:"user_name",value:"",label:"用户名",type:"text"},{prop:"order_number",value:"",type:"text",label:"注单号"},{prop:"lottery_id",value:"",label:"彩票名称",type:"select",list:[]},{prop:"play_type",value:"",label:"玩 法",type:"select",list:[]},{prop:"status",value:"",label:"注单状态",type:"select",list:[{value:"open",label:"已结算"},{value:"unopen",label:"未结算"},{value:"canceled",label:"已撤销"}]},{prop:"origin",value:"",label:"来 源",type:"select",list:ARRAYS.PLATFORMS1},{prop:"lottery_number",value:"",type:"text",label:"期 号"},{type:"dateTimeGroup",label:"投注时间",prop:[{prop:"date_from",value:"",label:"开始时间"},{prop:"date_to",value:"",label:"结束时间"}]}],formVisible:{state:!1},LANG:LANG,isEdit:{state:!1},columnsUrl:"",tableUrl:"",baseUrl:"",playType:"",Sdate:{dateStart:"",dateEnd:""},reSet:!1,lotteryList:[],playTypeList:[],numList:[],editForm:{user_name:"",order_number:"",lottery_id:"",play_type:"",status:"",origin:"",lottery_number:"",date_from:sessionStorage.sysTime,date_to:sessionStorage.sysTime},formTtile:"",FormVisible:!1,detailForm:[],confirmConfig:{state:!1,msg:"",fn:""},updated:!1,lotteryPid:-1,loading:!1,subTotalMoney:{lose_earn:0,pay_money:0,send_prize:0,valid_bet:0},totalMoney:{lose_earn:0,pay_money:0,send_prize:0,valid_bet:0},tableLength:0,formReset:!1}),components:{changeplay:s.a,tablegrid:l.a,formEdit:y.a,notedetail:n,confirm:d.a},methods:{init(){var t=this;this.playType="standard"===this.playType?"standard":"fast",this.$route.query.name,"standard"===this.playType?(this.$route.query.name?this.$route.query.lotteryType?this.tableUrl=URL.api+ROUTES.GET.lottery.orders+"?type="+this.playType+"&lottery_id="+this.$route.query.lotteryId+"&lottery_number="+this.$route.query.lotteryNumber+"?date_from="+sessionStorage.sysTime+"&date_to="+sessionStorage.sysTime:this.tableUrl=URL.api+ROUTES.GET.lottery.orders+"?type="+this.playType+"&date_from="+sessionStorage.dateTimeStart+"&date_to="+sessionStorage.dateTimeEnd+"&user_name="+this.$route.query.name:this.$route.query.lotteryType?this.tableUrl=URL.api+ROUTES.GET.lottery.orders+"?type="+this.playType+"&lottery_id="+this.$route.query.lotteryId+"&lottery_number="+this.$route.query.lotteryNumber+"?date_from="+sessionStorage.sysTime+"&date_to="+sessionStorage.sysTime:this.tableUrl=URL.api+ROUTES.GET.lottery.orders+"?type="+this.playType+"&date_from="+sessionStorage.dateTimeStart+"&date_to="+sessionStorage.dateTimeEnd,this.columnsUrl="static/json/lotteryNew/lottersinglenote/standard/columns.json"):(this.$route.query.lotteryType?this.tableUrl=URL.api+ROUTES.GET.lottery.orders+"?type="+this.playType+"&lottery_id="+this.$route.query.lotteryId+"&lottery_number="+this.$route.query.lotteryNumber+"&play_type="+this.$route.query.playName+"&date_from="+sessionStorage.sysTime+"&date_to="+sessionStorage.sysTime:this.tableUrl=URL.api+ROUTES.GET.lottery.orders+"?type="+this.playType+"&date_from="+sessionStorage.dateTimeStart+"&date_to="+sessionStorage.dateTimeEnd,this.columnsUrl="static/json/lotteryNew/lottersinglenote/quick/columns.json"),this.baseUrl=URL.api+ROUTES.GET.lottery.orders,this.$.autoAjax("get",URL.api+ROUTES.GET.lottery.types.$,"",{ok:e=>{let a=e.data||[];this.searchConfig[3].list=[];for(let e in a)if(0!=a[e].pid){let s=a[e].state||"";("standard"===t.playType?/standard/:/fast/).test(s)&&this.searchConfig[3].list.push({label:a[e].name,value:a[e].id.toString(),pid:a[e].pid})}},p:()=>{},error:t=>{console.log(t)}})},changeLottery(t){if("lottery_id"!==t.key)return;let e=this.searchConfig[3].list;for(let a in e)e[a].value===t.obj.lottery_id&&(this.lotteryPid=e[a].pid);this.initName.lottery.nameval="play_type,",setTimeout(()=>{this.initName.lottery.nameval="-1"},500),this.getPlayList()},getPlayList(){let t=this;this.searchConfig[4].list=[],this.playType="standard"===this.playType?"standard":"fast",this.$.autoAjax("get",URL.api+ROUTES.GET.lottery.types.class.$(this.playType),"",{ok:e=>{if(0==e.state&&e.data){let a=e.data||[],s=t.lotteryPid;t.playTypeList=[];for(let e in a)if(a[e].id==s){let s=a[e].sub||[];for(let e in s)t.searchConfig[4].list.push({label:s[e].name,value:s[e].id.toString()});return}}},p:()=>{},error:t=>{console.log(t)}})},doChangePlay(t){let e=this;this.formReset=!1,t.item!==this.playType&&(this.playType=t.item,this.resetForm(),setTimeout(()=>{e.formReset=!0},200))},getDateval(t){""===t.day&&t.daykey&&(this.editForm[t.daykey]="")},getDay(t){this.editForm.date_from=t.sday,this.editForm.date_to=t.eday},doQuery(t){let e=this.addSearch(t.item);this.tableUrl=e?this.baseUrl+this.addSearch(t.item)+"&type="+this.playType:this.baseUrl+"?type="+this.playType},resetForm(){this.tableUrl=this.baseUrl+"?type="+this.playType+"&date_from="+sessionStorage.dateTimeStart+"&date_to="+sessionStorage.dateTimeEnd},doHandle(t){switch(this.updated=!1,"doDetail"==t.fn&&this.doDetail(t.row),"doKillOrder"==t.fn&&this.doKillOrder(t.row),t.fn){case"openUserSet":this.openUserSet(t.row);break;case"openAgentSet":this.openAgentSet(t.row)}},openUserSet(t){this.$router.push({path:"/memberManagement",query:{name:t.user_name}})},openAgentSet(t){this.$router.push({path:"/agentAccount",query:{name:t.agent_name}})},doDetail(t){this.detailForm=[],this.FormVisible=!0,this.formTtile="注单详情";let e=this.detailForm;for(let a in t)e[a]=t[a]},doConfirm(t){this.updated=!1;let e={};t.obj&&(e=t.obj);let a=parseInt(t.obj.id);switch(t.fn){case"doKillOrder":this.loading=!0,this.$.autoAjax("patch",URL.api+ROUTES.PATCH.lottery.order+"/"+a,{state:"canceled"},{ok:t=>{0==t.state&&t.data?(this.$message.success(LANG["恭喜您，撤销成功！"]||"恭喜您，撤销成功！"),this.updated=!0):t.data?this.$message.error(LANG["撤销失败，请稍候重试！"]||"撤销失败，请稍候重试！"):this.$message(t.msg),this.loading=!1},p:()=>{},error:t=>{this.loading=!1}})}},doKillOrder(t){this.confirmConfig.state=!0,this.confirmConfig.msg=this.LANG["确定撤销么？"]||"确定撤销么？",this.confirmConfig.fn="doKillOrder",this.confirmConfig.obj=t},getTableData(t){this.tableLength=0,this.subTotalMoney={lose_earn:0,pay_money:0,send_prize:0,valid_bet:0},this.totalMoney={lose_earn:0,pay_money:0,sendPrize:0,valid_bet:0},t.allData&&t.allData.attributes&&(this.tableLength=parseInt(t.allData.attributes.total)),t.allData&&t.allData.attributes&&t.allData.attributes.subTotalMoney&&(this.subTotalMoney.lose_earn=FORMATMONEY(t.allData.attributes.subTotalMoney.lose_earn),this.subTotalMoney.pay_money=FORMATMONEY(t.allData.attributes.subTotalMoney.pay_money),this.subTotalMoney.send_prize=FORMATMONEY(t.allData.attributes.subTotalMoney.send_prize),this.subTotalMoney.valid_bet=FORMATMONEY(t.allData.attributes.subTotalMoney.valid_bet)),t.allData&&t.allData.attributes&&t.allData.attributes.totalMoney&&(this.totalMoney.lose_earn=FORMATMONEY(t.allData.attributes.totalMoney.lose_earn),this.totalMoney.pay_money=FORMATMONEY(t.allData.attributes.totalMoney.pay_money),this.totalMoney.send_prize=FORMATMONEY(t.allData.attributes.totalMoney.send_prize),this.totalMoney.valid_bet=FORMATMONEY(t.allData.attributes.totalMoney.valid_bet))}},mounted(){},activated(){this.searchConfig[1].value="",this.formType="update"+(9*Math.random()+1),this.$route.query.name&&(this.searchConfig[1].value=this.$route.query.name),this.$route.query.lotteryType?this.playType=this.$route.query.lotteryType:this.playType="standard",this.init()},deactivated(){this.$route.query.lotteryType=null,this.searchConfig[1].value=""},created:function(){this.$route.query.lotteryType?this.playType=this.$route.query.lotteryType:this.playType="standard",this.init()}};var c=function(t){a(462)},p=Object(o.a)(_,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"clearfix w100",attrs:{id:"lotterNoteSet"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("changeplay",{attrs:{active:t.playType},on:{"do-change-play":t.doChangePlay}})],1)],1),t._v(" "),a("el-row",{attrs:{id:""}},[a("el-col",{staticStyle:{margin:"10px 0"},attrs:{span:24}},[a("formEdit",{attrs:{formVisible:t.formVisible,formConfig:t.searchConfig,type:t.type,labelWidth:t.labelWidth,isEdit:t.isEdit,formReset:t.formReset,formType:t.formType,showAdd:!1,updateKeys:t.initName.lottery.nameval},on:{"get-select":t.changeLottery,"do-query":t.doQuery,"reset-form":t.resetForm}})],1)],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("tablegrid",{ref:"bankTable",staticClass:"bankTable",attrs:{updated:t.updated,columnsUrl:t.columnsUrl,tableUrl:t.tableUrl,showRefresh:!1,getData:!0},on:{"get-table-data":t.getTableData,"do-handle":t.doHandle}},[t.tableLength>0?a("tr",{attrs:{slot:"other"},slot:"other"},[a("td",{attrs:{colspan:"10"}},[a("div",{staticClass:"cell"},[t._v(t._s(t.LANG["小计"]||"小计"))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.subTotalMoney.pay_money))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.subTotalMoney.valid_bet))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.subTotalMoney.send_prize))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.subTotalMoney.lose_earn))])]),t._v(" "),a("td",{attrs:{colspan:"3"}})]):t._e(),t._v(" "),t.tableLength>0?a("tr",{attrs:{slot:"other"},slot:"other"},[a("td",{attrs:{colspan:"10"}},[a("div",{staticClass:"cell"},[t._v(t._s(t.LANG["总计"]||"总计"))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.totalMoney.pay_money))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.totalMoney.valid_bet))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.totalMoney.send_prize))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.totalMoney.lose_earn))])]),t._v(" "),a("td",{attrs:{colspan:"3"}})]):t._e()])],1),t._v(" "),a("el-col",[a("confirm",{attrs:{confirmConfig:t.confirmConfig},on:{"do-confirm":t.doConfirm}})],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-dialog",{staticClass:"fromTitle",attrs:{title:t.formTtile},model:{value:t.FormVisible,callback:function(e){t.FormVisible=e},expression:"FormVisible"}},[a("notedetail",{attrs:{tableData:t.detailForm}}),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.FormVisible=!1}}},[t._v(t._s(t.LANG["关闭"]||"关闭"))])],1)],1)],1)],1)},[],!1,c,null,null);e.default=p.exports},271:function(t,e,a){"use strict";var s={data:()=>({LANG:LANG,standardActive:"primary",quickActive:""}),props:{active:{type:String,default:"standard"}},methods:{init(){},doChangePlay(t){"standard"==t?(this.standardActive="primary",this.quickActive="",this.$emit("do-change-play",{item:"standard"})):(this.standardActive="",this.quickActive="primary",this.$emit("do-change-play",{item:"fast"}))}},watch:{active:function(t){t&&this.doChangePlay(t)}}},l=a(10),i=Object(l.a)(s,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"typeBtn"},[a("el-button",{attrs:{type:t.standardActive,size:"small"},domProps:{textContent:t._s(t.LANG["官方玩法"]||"官方玩法")},on:{click:function(e){return t.doChangePlay("standard")}}}),t._v(" "),a("el-button",{attrs:{type:t.quickActive,size:"small"},domProps:{textContent:t._s(t.LANG["信用玩法"]||"信用玩法")},on:{click:function(e){return t.doChangePlay("fast")}}})],1)},[],!1,null,null,null);e.a=i.exports},462:function(t,e,a){}}]);