(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{151:function(e,t,a){"use strict";a.r(t);var i=a(213),s=a(208),r=a(209),l=a(233),o={data(){const e=(e,t,a)=>{new Date(this.modeData.begin_time).getTime()>new Date(this.modeData.end_time).getTime()?a(new Error(LANG["开始时间不能大于结束时间"]||"开始时间不能大于结束时间")):a()};return{LANG:LANG,pcshow:!1,mbshow:!1,linkShow:!1,modeData:{arrList:[],name:"",type_id:"",title:"",begin_time:"",end_time:"",vipType:[],status:"enabled",description:"",cover:"",language_id:"",language_name:"",sort:"",content:"",content2:"",fileList2:[],sort:"",open_mode:"",link:null,rule:{template_id:"",rule:{prize:""},luckydraw_condition:[],limit_times:"",withdrawRequire:"",withdrawRequireVal:"",withdrawRequireVal1:"",member_level:"",issueTime:null,issue_cycle:"day",issueMode:"auto",game:[],extra:{ip_limit_times:""}},checkedDefut:[]},pcshow:!1,get:"",placename:"",type_idList:[],vipList:[],isIndeterminate:!0,checkList:[],seachData:{},languageList:[],uploadUrl:URL.rpi,keys:"images",imgInit:!1,rules:{name:[{required:!0,message:"请填写活动名称",trigger:"blur"}],type_id:[{required:!0,type:"array",message:"请选择优惠类型",trigger:"change"}],language_id:[{required:!0,message:"请选择语言类型",trigger:"change"}],description:[{required:!0,message:"请输入活动描述",trigger:"blur"}],cover:[{required:!0,message:"",trigger:"change"}],begin_time:[{required:!0,validator:e,trigger:"change"}],end_time:[{required:!0,validator:e,trigger:"change"}],"rule.issueMode":[{required:!0,message:"请选择发放奖金方式",trigger:"change"}],"rule.withdrawRequire":[{required:!0,message:"请选择提款要求",trigger:"change"}],"rule.withdrawRequireVal":[{validator:(e,t,a)=>{""===t&&"times"===this.modeData.rule.withdrawRequire?a(new Error("请输入倍数")):a()},trigger:"blur"}],"rule.withdrawRequireVal1":[{validator:(e,t,a)=>{""===t&&"bet"===this.modeData.rule.withdrawRequire?a(new Error("请输入投注金额")):a()},trigger:"blur"}],checkedDefut:[{required:!0,message:"请至少选择一个会员等级",trigger:"change"}],link:[{required:!0,validator:(e,t,a)=>{t&&!/^((ht|f)tps?):\/\/([\w\-]+(\.[\w\-]+)*\/)*[\w\-]+(\.[\w\-]+)*\/?(\?([\w\-\.,@?^=%&:\/~\+#]*)+)?/.test(t)?a(new Error(LANG["请输入合法的网址(格式为http://www.***.com或者https://www.***.com)"]||"请输入合法的网址(格式为http://www.***.com或者https://www.***.com)")):a()},trigger:"change"}],open_mode:[{required:!0,message:"请选择打开方式",trigger:"change"}],cover:[{required:!1,message:"请上传图片",trigger:"change"}],title:[{required:!0,message:"请输入活动标题",trigger:"change"}],content:[{required:!0,message:"请输入优惠规则",trigger:"change"}],content2:[{required:!0,message:"请输入优惠规则",trigger:"change"}],sort:[{validator:(e,t,a)=>{if(!/^(0|[1-9]\d*)$/.test(t.toString()))return a(new Error("请填写非负整数"));a()},trigger:"blur",required:!0}]},sReset:!1,checkedval:{checked:[]}}},components:{markdownEdit:i.a,upload:s.a,dateTimePicker:r.a,checkGroup:l.a},methods:{init(){let e=this;this.modeData.begin_time=window.sessionStorage.sysTime+" 00:00:00",this.modeData.end_time="2118-01-01 23:59:59";let t=this.$route.query;for(let e in t)this.seachData[e]=t[e];new Promise(function(t,a){let i=URL.api+`/active/template/unique?template_id=${e.seachData.template_id}&&begin_time=${e.modeData.begin_time}&&end_time=${e.modeData.end_time}`;e.$.autoAjax("get",i,"",{ok:a=>{let i=a.data;e.vipList=[];for(let t in i)e.vipList.push({label:i[t].name,value:i[t].id.toString()});t()},p:()=>{},error:e=>{console.log(e)}})}).then(function(){if("edit"===e.seachData.type){e.checkedval.checked.splice(0,e.checkedval.checked.length);let t=URL.api+`/active/template.fix/${e.seachData.id}`;e.$.autoAjax("get",t,"",{ok:t=>{if(0===t.state&&t.data){let a=t.data,i=t.data.types||[],s=[];i.forEach((t,a)=>{s.push(t.id),e.checkedval.checked.push(t.id.toString())}),e.modeData={arrList:[],name:a.name,type_id:s,title:a.title,begin_time:a.begin_time,end_time:a.end_time,day:a.day,vipType:[],money:a.money,status:a.status,description:a.description,language_id:a.language_id,language_name:a.language_name,sort:a.sort,cover:a.cover,content:a.content,content2:a.content2,open_mode:a.open_mode,link:a.link,rule:{rule:{prize:(a.rule.rule.prize/100).toString()},limit_times:a.rule.limit_times,withdrawRequire:a.rule.withdraw_require,issueTime:"0",issue_cycle:a.rule.issue_cycle,issueMode:a.rule.issue_mode,game:[],extra:{ip_limit_times:a.rule.extra.ip_limit_times}}},e.modeData.arrList.push(a.cover),a.rule.limit_times>0?e.get="1":(e.get="2",e.modeData.rule.limit_times=null),"bet"===a.rule.withdraw_require?e.modeData.rule.withdrawRequireVal1=a.rule.withdraw_require_val/100:"times"===a.rule.withdraw_require&&(e.modeData.rule.withdrawRequireVal=a.rule.withdraw_require_val)}},p:()=>{},error:e=>{console.log(e)}})}}),this.placename=this.seachData.label,this.$.autoAjax("get",URL.api+ROUTES.GET.activity.types+"?page=1&page_size=100","",{ok:e=>{if(0===e.state&&e.data){this.type_idList=[];let t=e.data||[];for(let e in t)this.type_idList.push({label:t[e].name,value:t[e].id.toString()})}},p:()=>{},error:e=>{console.log(e)}});let a=URL.api+ROUTES.GET.langeages;this.$.autoAjax("get",a,"",{ok:e=>{this.languageList=[];let t=e.data;for(let e in t)this.languageList.push({label:t[e].name,value:t[e].id.toString()});this.modeData.language_id="1"},p:()=>{},error:e=>{console.log(e)}})},changeOption(e){this.modeData.type_id=e.item},doSubmit(e){let t=this;this.$refs.form.validate(a=>{if(!a)return t.$message.error("请检查表单"),!1;{let a=this.languageList.find(function(e){return e.value=t.modeData.language_id}),i=null;i="times"===this.modeData.rule.withdrawRequire?parseInt(this.modeData.rule.withdrawRequireVal):"bet"===this.modeData.rule.withdrawRequire?100*parseInt(this.modeData.rule.withdrawRequireVal1):0;let s=this.type_idList,r=[],l=this.modeData.type_id;for(let e=0;e<l.length;e++)for(let t=0;t<s.length;t++)l[e]==s[t].value&&r.push({id:FORMATINT(s[t].value),name:s[t].label});let o={name:this.modeData.name,types:r,title:this.modeData.title,begin_time:this.modeData.begin_time,end_time:this.modeData.end_time,description:this.modeData.description,cover:this.modeData.cover,language_id:parseInt(this.modeData.language_id),language_name:a?a.label:"",sort:parseInt(this.modeData.sort),content:this.modeData.content,content2:this.modeData.content2,open_mode:this.modeData.open_mode,link:this.modeData.link,status:this.modeData.status,rule_type:"register",rule:{template_id:this.modeData.rule.template_id?this.modeData.rule.template_id:10,rule:{prize:100*this.modeData.rule.rule.prize},luckydraw_condition:this.modeData.rule.luckydraw_condition,limit_times:this.modeData.rule.limit_times?this.modeData.rule.limit_times:0,withdraw_require:this.modeData.rule.withdrawRequire,withdraw_require_val:i,member_level:"",issue_time:"0",issue_cycle:this.modeData.rule.issue_cycle,issue_mode:this.modeData.rule.issueMode,game:[],extra:{ip_limit_times:t.modeData.rule.extra.ip_limit_times}}};if("add"===e){let e=URL.api+"/active/template.fix";this.$.autoAjax("put",e,o,{ok:e=>{if(0===e.state&&e.data){let e=LANG["添加成功"]||"添加成功";this.$message.success(e),setTimeout(function(){t.$router.push({path:"addActiveSet"})},1e3)}else if(data.state>3)this.$message.error(data.msg);else{let e=LANG["修改失败"]||"修改失败";this.$message.error(e)}},p:()=>{},error:e=>{console.log(e)}})}else{let e=URL.api+`/active/template.fix/${this.seachData.id}`;this.$.autoAjax("put",e,o,{ok:e=>{if(0===e.state&&e.data){let e=LANG["修改成功"]||"修改成功";this.$message.success(e),setTimeout(function(){t.$router.push({path:"activeSet"})},1e3)}else if(data.state>3)this.$message.error(data.msg);else{let e=LANG["修改失败"]||"修改失败";this.$message.error(e)}},p:()=>{},error:e=>{console.log(e)}})}}})},limitChange(){"2"===this.get&&(this.modeData.rule.limit_times=""),this.$refs.form.validateField("rule.limit_times")},radioChange(e){this.linkShow="4"!=e,"4"==e?(this.pcshow=!0,this.mbshow=!0,this.rules.content.push({message:"请输入pc活动规则",trigger:"change",required:!0}),this.rules.content2.push({message:"请输入H5活动规则",trigger:"change",required:!0})):(this.rules.content2.shift(),this.rules.content.shift(),this.pcshow=!1,this.mbshow=!1)},validatorNumber(e,t,a){t?/^[0-9]+(.[0-9]{1,2})?$/.test(t.toString().replace(/^\s+|\s+$/,""))?t<0?a(new Error(LANG["输入金额必需大于0"]||"输入金额必需大于0")):t>9999999?a(new Error(LANG["输入金额不能大于9999999"]||"输入金额不能大于9999999")):a():isNaN(t)||0==!!t.replace(/^\s+|\s+$/,"")?a(new Error(LANG["请输入数字值"]||"请输入数字值")):a(new Error(LANG["小数点后不超过两位"]||"小数点后不超过两位")):a(new Error(LANG["请输入数字值"]||"请输入数字值"))},validatorLimitNumber(e,t,a){"1"===this.get?this.validatorNumber.apply(this,arguments):a()},validatorTimeNumber(e,t,a){"times"===this.modeData.rule.withdrawRequire?this.validatorNumber.apply(this,arguments):a()},validatorBetNumber(e,t,a){"bet"===this.modeData.rule.withdrawRequire?this.validatorNumber.apply(this,arguments):a()},goBack(e){"add"==e?this.$router.push({path:"addActiveSet"}):this.$router.push({path:"activeSet"})},doSaveFile(e){this.modeData.cover=e.url[0]},changeLanguage(e){this.languageList},withdrawRequireChange(){this.$refs.form.validateField("rule.withdrawRequireVal"),this.$refs.form.validateField("rule.withdrawRequireVal1")},timeChange(e){setTimeout(()=>{this.$refs.form.validateField("begin_time"),this.$refs.form.validateField("end_time")})},returnPage(){this.$router.replace("/activeSet")}},computed:{},activated(){this.init()},beforeRouteLeave(e,t,a){a(!0),this.$refs.form.resetFields(),this.modeData.description="",this.modeData.arrList=[],this.modeData.content="",this.modeData.content2="",this.pcshow=!1,this.mbshow=!1}},n=a(10);var d=function(e){a(441)},c=Object(n.a)(o,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"activeMode"}},[a("el-col",[a("el-button",{staticClass:"bankBtn pRight20",attrs:{type:"primary",icon:"arrow-left",size:"small"},on:{click:e.returnPage}},[e._v("\n            "+e._s(e.LANG["返 回"]||"返 回")+"\n        ")])],1),e._v(" "),a("el-col",{staticClass:"activeModeForm",attrs:{span:14,offset:5}},[a("el-form",{ref:"form",staticClass:"mt20",attrs:{model:e.modeData,rules:e.rules,"label-width":"140px"}},[a("el-col",{staticClass:"Layout",attrs:{span:24}},[a("h3",{staticClass:"tCent",domProps:{textContent:e._s(e.LANG["规则设置"]||"规则设置")}}),e._v(" "),a("el-form-item",{attrs:{label:"优惠活动名称",prop:"name"}},[a("el-input",{staticClass:"w80",attrs:{placeholder:e.placename},model:{value:e.modeData.name,callback:function(t){e.$set(e.modeData,"name",t)},expression:"modeData.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"优惠类型",prop:"type_id"}},[a("checkGroup",{attrs:{checkOptions:e.type_idList,sReset:e.sReset,checkedval:e.checkedval},on:{"change-option":e.changeOption}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.modeData.type_id,expression:"modeData.type_id"}],staticStyle:{display:"none"},domProps:{value:e.modeData.type_id},on:{input:function(t){t.target.composing||e.$set(e.modeData,"type_id",t.target.value)}}})],1),e._v(" "),a("el-form-item",{attrs:{label:"优惠规则",required:""}},[a("span",{domProps:{textContent:e._s(e.LANG["注册成功优惠"]||"注册成功优惠")}}),e._v(" "),a("el-form-item",{staticClass:"to-inline-block",attrs:{prop:"rule.rule.prize",rules:[{validator:e.validatorNumber,trigger:"blur"}]}},[a("el-input",{staticClass:"intW",attrs:{disabled:"edit"==e.seachData.type},model:{value:e.modeData.rule.rule.prize,callback:function(t){e.$set(e.modeData.rule.rule,"prize",t)},expression:"modeData.rule.rule.prize"}})],1),e._v(" "),a("span",{domProps:{textContent:e._s(e.LANG["元"]||"元")}})],1),e._v(" "),a("el-form-item",{attrs:{label:"领取限制"}},[a("el-radio-group",{attrs:{disabled:"edit"==e.seachData.type},on:{change:function(t){return e.limitChange()}},model:{value:e.get,callback:function(t){e.get=t},expression:"get"}},[a("el-radio",{staticClass:"radio",attrs:{label:"1"}},[a("span",{domProps:{textContent:e._s(e.LANG["限定次数"]||"限定次数")}}),e._v(" "),a("el-form-item",{staticStyle:{display:"inline-block"},attrs:{prop:"rule.limit_times",rules:[{validator:e.validatorLimitNumber,trigger:"blur"}]}},[a("el-input",{staticClass:"intW",attrs:{disabled:"edit"==e.seachData.type},model:{value:e.modeData.rule.limit_times,callback:function(t){e.$set(e.modeData.rule,"limit_times",t)},expression:"modeData.rule.limit_times"}})],1)],1),e._v(" "),a("el-radio",{staticClass:"radio",attrs:{label:"2"}},[a("span",{domProps:{textContent:e._s(e.LANG["无限定次数"]||"无限定次数")}})])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"提款要求",prop:"rule.withdrawRequire"}},[a("el-radio-group",{attrs:{disabled:"edit"==e.seachData.type},on:{change:e.withdrawRequireChange},model:{value:e.modeData.rule.withdrawRequire,callback:function(t){e.$set(e.modeData.rule,"withdrawRequire",t)},expression:"modeData.rule.withdrawRequire"}},[a("el-radio",{staticClass:"radio",attrs:{label:"times"}},[a("span",{domProps:{textContent:e._s(e.LANG["倍数"]||"倍数")}}),e._v(" "),a("el-form-item",{staticStyle:{display:"inline-block"},attrs:{prop:"rule.withdrawRequireVal",rules:[{validator:e.validatorTimeNumber,trigger:"blur"}]}},[a("el-input",{staticClass:"intW",attrs:{disabled:"edit"==e.seachData.type},model:{value:e.modeData.rule.withdrawRequireVal,callback:function(t){e.$set(e.modeData.rule,"withdrawRequireVal",t)},expression:"modeData.rule.withdrawRequireVal"}})],1)],1),e._v(" "),a("el-radio",{staticClass:"radio",attrs:{label:"bet"}},[a("span",{domProps:{textContent:e._s(e.LANG["固定投注流水"]||"固定投注流水")}}),e._v(" "),a("el-form-item",{staticStyle:{display:"inline-block"},attrs:{prop:"rule.withdrawRequireVal1",rules:[{validator:e.validatorBetNumber,trigger:"blur"}]}},[a("el-input",{staticClass:"intW",attrs:{disabled:"edit"==e.seachData.type},model:{value:e.modeData.rule.withdrawRequireVal1,callback:function(t){e.$set(e.modeData.rule,"withdrawRequireVal1",t)},expression:"modeData.rule.withdrawRequireVal1"}})],1)],1),e._v(" "),a("el-radio",{staticClass:"radio",attrs:{label:"no"}},[a("span",{domProps:{textContent:e._s(e.LANG["无取款要求"]||"无取款要求")}})])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("el-radio",{staticClass:"radio",attrs:{label:"enabled"},model:{value:e.modeData.status,callback:function(t){e.$set(e.modeData,"status",t)},expression:"modeData.status"}},[a("span",{domProps:{textContent:e._s(e.LANG["启用"]||"启用")}})]),e._v(" "),a("el-radio",{staticClass:"radio",attrs:{label:"disabled"},model:{value:e.modeData.status,callback:function(t){e.$set(e.modeData,"status",t)},expression:"modeData.status"}},[a("span",{domProps:{textContent:e._s(e.LANG["停用"]||"停用")}})])],1),e._v(" "),a("el-form-item",{attrs:{label:"IP领取限制:"}},[a("span",{domProps:{textContent:e._s(e.LANG["同一个IP不同账号可以领取"]||"同一个IP不同账号可以领取")}}),e._v(" "),a("el-form-item",{staticClass:"to-inline-block",attrs:{prop:"rule.extra.ip_limit_times",rules:[{validator:e.validatorNumber,trigger:"blur"}]}},[a("el-input",{staticClass:"intW",model:{value:e.modeData.rule.extra.ip_limit_times,callback:function(t){e.$set(e.modeData.rule.extra,"ip_limit_times",t)},expression:"modeData.rule.extra.ip_limit_times"}})],1),e._v(" "),a("span",{domProps:{textContent:e._s(e.LANG["次"]||"次")}})],1)],1),e._v(" "),a("el-col",{staticClass:"Layout",attrs:{span:24}},[a("h3",{staticClass:"tCent",domProps:{textContent:e._s(e.LANG["内容设置"]||"内容设置")}}),e._v(" "),a("el-form-item",{attrs:{label:"优惠活动标题",prop:"title"}},[a("el-input",{staticClass:"w80",model:{value:e.modeData.title,callback:function(t){e.$set(e.modeData,"title",t)},expression:"modeData.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"语言",prop:"language_id"}},[a("el-select",{staticClass:"w80",attrs:{placeholder:"请选择类型",disabled:""},on:{change:e.changeLanguage},model:{value:e.modeData.language_id,callback:function(t){e.$set(e.modeData,"language_id",t)},expression:"modeData.language_id"}},e._l(e.languageList,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"优惠活动描述",prop:"description"}},[a("el-input",{staticClass:"w80",attrs:{type:"textarea"},model:{value:e.modeData.description,callback:function(t){e.$set(e.modeData,"description",t)},expression:"modeData.description"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"图片上传",prop:"cover"}},[a("el-input",{staticStyle:{display:"none"},model:{value:e.modeData.cover,callback:function(t){e.$set(e.modeData,"cover",t)},expression:"modeData.cover"}}),e._v(" "),a("upload",{attrs:{uploadUrl:e.uploadUrl,keys:e.keys,isInit:e.imgInit,fileNum:1,arrList:e.modeData.arrList,imgResolution:"460*180"},on:{response:e.doSaveFile}})],1),e._v(" "),a("el-form-item",{attrs:{label:"排序",prop:"sort"}},[a("el-input",{staticClass:"w80",model:{value:e.modeData.sort,callback:function(t){e.$set(e.modeData,"sort",t)},expression:"modeData.sort"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"打开方式",prop:"open_mode"}},[a("el-radio-group",{on:{change:e.radioChange},model:{value:e.modeData.open_mode,callback:function(t){e.$set(e.modeData,"open_mode",t)},expression:"modeData.open_mode"}},[a("el-radio",{staticClass:"radio",attrs:{label:"2"}},[a("span",{domProps:{textContent:e._s(e.LANG["新窗口打开"]||"新窗口打开")}})]),e._v(" "),a("el-radio",{staticClass:"radio",attrs:{label:"3"}},[a("span",{domProps:{textContent:e._s(e.LANG["本页面跳转"]||"本页面跳转")}})]),e._v(" "),a("el-radio",{staticClass:"radio",attrs:{label:"4"}},[a("span",{domProps:{textContent:e._s(e.LANG["下拉展开"]||"下拉展开")}})])],1)],1),e._v(" "),e.linkShow?a("el-form-item",{attrs:{label:"链接",prop:"link"}},[a("el-input",{staticClass:"w80",model:{value:e.modeData.link,callback:function(t){e.$set(e.modeData,"link",t)},expression:"modeData.link"}})],1):e._e(),e._v(" "),a("el-col",[e.pcshow?a("el-form-item",{attrs:{label:e.LANG["PC活动规则编辑"]||"PC活动规则编辑",prop:"content"}},[a("el-input",{staticStyle:{display:"none"},model:{value:e.modeData.content,callback:function(t){e.$set(e.modeData,"content",t)},expression:"modeData.content"}}),e._v(" "),a("markdownEdit",{staticClass:"w80",attrs:{id:"pcmd"},model:{value:e.modeData.content,callback:function(t){e.$set(e.modeData,"content",t)},expression:"modeData.content"}})],1):e._e()],1),e._v(" "),a("el-col",[e.mbshow?a("el-form-item",{staticStyle:{"z-index":"9"},attrs:{label:e.LANG["H5活动规则编辑"]||"H5活动规则编辑",prop:"content2"}},[a("el-input",{staticStyle:{display:"none"},model:{value:e.modeData.content2,callback:function(t){e.$set(e.modeData,"content2",t)},expression:"modeData.content2"}}),e._v(" "),a("markdownEdit",{staticClass:"w80",attrs:{id:"mbshowww"},model:{value:e.modeData.content2,callback:function(t){e.$set(e.modeData,"content2",t)},expression:"modeData.content2"}})],1):e._e()],1)],1)],1),e._v(" "),"add"==e.seachData.type?a("el-col",{staticClass:"tCent",attrs:{span:24}},[a("el-button",{attrs:{type:"primary",plain:!0},on:{click:function(t){return e.goBack(e.type="add")}}},[a("span",{domProps:{textContent:e._s(e.LANG["取消生成"]||"取消生成")}})]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.doSubmit(e.type="add")}}},[a("span",{domProps:{textContent:e._s(e.LANG["生成优惠"]||"生成优惠")}})])],1):a("el-col",{staticClass:"tCent",attrs:{span:24}},[a("el-button",{attrs:{type:"primary",plain:!0},on:{click:function(t){return e.goBack(e.type="edit")}}},[a("span",{domProps:{textContent:e._s(e.LANG["取消修改"]||"取消修改")}})]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.doSubmit(e.type="edit")}}},[a("span",{domProps:{textContent:e._s(e.LANG["保存修改"]||"保存修改")}})])],1)],1)],1)},[],!1,d,"data-v-5e77ec6d",null);t.default=c.exports},230:function(e,t,a){},233:function(e,t,a){"use strict";var i={data:()=>({checkVal:[],checkAll:!1,isIndeterminate:!0}),props:{checkOptions:Array,checkedval:{type:Object,default:{checked:[]}},sReset:Boolean},watch:{sReset:function(e){!0===e&&this.changeReset()}},methods:{init(){if(this.checkedval.checked.length>0){for(let e in this.checkedval)this.checkVal.push(this.checkedval[e]),this.checkedval.checked.push(this.checkedval[e]);this.checkAll=!0}else this.checkVal=[],this.checkedval.checked=[],this.checkAll=!1,this.isIndeterminate=!1},checkallState(){this.checkOptions.length===this.checkedval.checked.length&&this.checkOptions.length>0?this.checkAll=!0:this.checkAll=!1},handleCheckAllChange(e){let t=window.event||e,a=t.srcElement?t.srcElement:t.target,i=[];this.checkOptions.length&&this.checkOptions[0].value?this.checkOptions.forEach(e=>{i.push(e.value)}):i=this.checkOptions,this.checkVal=a.checked?i:[],this.checkedval.checked=a.checked?i:[],this.isIndeterminate=!1,this.$emit("change-option",{item:this.checkedval.checked})},handleCheckedCitiesChange(e){let t=e.length;this.checkAll=t===this.checkOptions.length,this.isIndeterminate=t>0&&t<this.checkOptions.length,this.$emit("change-option",{item:this.checkedval.checked})},changeReset(){this.checkVal=[],this.checkedval.checked=[],this.checkAll=!1,this.isIndeterminate=!1}},mounted(){this.init()},updated(){let e=this;this.$nextTick(function(){e.checkallState()})}},s=a(10);var r=function(e){a(230)},l=Object(s.a)(i,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"changeAll"}},[a("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),e._v(" "),a("el-checkbox-group",{staticClass:"mt15",on:{change:e.handleCheckedCitiesChange},model:{value:e.checkedval.checked,callback:function(t){e.$set(e.checkedval,"checked",t)},expression:"checkedval.checked"}},e._l(e.checkOptions,function(t,i){return a("el-checkbox",{key:i,attrs:{label:t.value||t}},[e._v(e._s(t.label||t))])}),1)],1)},[],!1,r,"data-v-7c01861b",null);t.a=l.exports},441:function(e,t,a){}}]);