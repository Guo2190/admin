(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{113:function(t,a,e){"use strict";e.r(a);e(220);var s={data:()=>({LANG:LANG,columnConfig:[],columnList:[],bottomColumnList:[],tableDataList:[],allTableDataList:{},gridData:[],subTotalBet:{},totalBetArray:[],totalBet:{},total:0,pageSize:1e3,pageCount:1,currentPage:1,otherData:null,sumArr:[],baseUrl:"",sumNumber:0,allChecked:!1,checkList:[],rowsList:{},checkSum:0,allCheckSum:0,loading:!1,tableScroll:!1,colorIndex:null,checkDisabled:!1,modeData:{name:"",withdraw_per:""},sLoading:!1,checked:{},attributes:{subTotal:0,total:0},timeXJ:0,timeTZ:0,loadingOne:!1}),props:{tableData:Object,tableUrl:String,columns:Array,columnsUrl:String,assembleColumns:Object,tableCheck:{type:Boolean,default:!1},tableIndex:{type:Boolean,default:!1},allCheck:{type:Boolean,default:!1},tableBorder:{type:Boolean,default:!0},tableRowDbclick:{type:Boolean,default:!0},pageSet:{type:Boolean,default:!0},sumGame:{type:Boolean,default:!1},colspan:{type:Number,default:1},sumKey:"",updateDate:Object,updated:{type:Boolean,default:!1},formType:String,query:Object,opts:String,getData:{type:Boolean,default:!1},saveData:{type:Boolean,default:!1},updateMessage:{type:String,default:""},autoWidth:{type:Boolean,default:!1},lotteryType:{type:Boolean,default:!1},fullWidth:{type:Boolean,default:!0},showExport:{type:Boolean,default:!1},showAdd:{type:Boolean,default:!1},showDetail:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1}},components:{},methods:{Datainit(){this.loading=!0;let t=this;this.allChecked=!1,this.checkList=[],this.rowsList={},this.checkSum=0,this.unchecked={},this.modeData.withdraw_per="",this.modeData.name="";this.total;let a=this.pageSize,e=(this.pageCount,this.currentPage),s=this.otherData={};this.sumKey;this.$refs.form&&this.$refs.form.resetFields(),this.attributes.subTotal=0,this.attributes.total=0,t.tableDataList.splice(0,t.tableDataList.length),t.columnList.splice(0,t.columnList.length);let l=t.columnList||[];if(this.baseUrl=this.tableUrl,""!=this.baseUrl&&null!=this.baseUrl){let l={};if(this.query&&this.query.toString().length>0&&(l=this.query),this.pageSet){if(-1===this.baseUrl.indexOf("?"))this.baseUrl=this.baseUrl+"?page="+(0===e?1:e)+"&page_size="+(0===a?1e3:a);else{let t=this.baseUrl.indexOf("page=");e=1,this.baseUrl=t>0?this.baseUrl.replace(/page=\d+/,"page="+e||!1):this.baseUrl+"&page="+(0===e?1:e)+"&page_size="+(0===a?1e3:a);let s=this.baseUrl.indexOf("page_size=");this.baseUrl=s>0?this.baseUrl.replace(/page_size=\d+/,"page_size="+(0===a?1e3:a)):this.baseUrl+"&page_size=1000"}}this.$http.get(this.baseUrl,URLCONFIG).then(a=>{t.tableDataList=[];let e=a&&a.data&&a.data.data?a.data.data:[];if(t.getData){let t=a.data||{};for(let a in t)s[a]=t[a]}let l=a&&a.data&&a.data.data&&a.data.data.list||[];if(t.subTotalBet={},t.totalBet={},a.data.attributes?(this.attributes.subTotal=a.data.data.length||0,this.attributes.total=a.data.attributes.total||0,this.attributes.totalRevoke=a.data.attributes.totalRevoke||0,this.attributes.subTotalRevoke=a.data.attributes.subTotalRevoke||0,a.data.attributes&&a.data.attributes.totalData&&(t.allTableDataList.totalData=a.data.attributes.totalData,t.allTableDataList.totalMoney=a.data.attributes.totalMoney),a.data.attributes&&a.data.attributes.subTotalData&&(t.allTableDataList.subTotalData=a.data.attributes.subTotalData,t.allTableDataList.subTotalMoney=a.data.attributes.subTotalMoney),t.allTableDataList.size=e.length,t.total=a&&a.data&&a.data.attributes&&a.data.attributes.total||10,t.pageSize=a&&a.data&&a.data.attributes&&a.data.attributes.size||1e3,t.pageCount=Math.ceil(t.total/t.pageSize)?Math.ceil(t.total/t.pageSize):1,t.currentPage=parseInt(a.data.attributes.number)?parseInt(a.data.attributes.number):1):t.allTableDataList={},l.length&&l.length>0){for(let a in l)t.tableDataList.push(l[a]);t.initCheckList(l)}else if(e.length&&e.length>0){t.sumNumber;for(let a in e)t.tableDataList.push(e[a]);this.initCheckList(e)}t.getData&&t.$emit("get-table-data",{event:event,item:t.tableDataList,allData:t.otherData}),t.loading=!1}).catch(a=>{t.loading=!1})}else{if(this.loading=!1,!this.tableData)return;let a={};this.query&&this.query.toString().length>0&&(a=this.query);let e=this.tableData,s=t.otherData[0]={},l=this.tableData.list||[];if(l.length&&l.length>0){for(let t in e)s[t]=e[t];t.total=e.total?e.total:0,t.pageSize=e.page_size?e.page_size:1e3,t.pageCount=Math.ceil(t.total/t.pageSize)?Math.ceil(t.total/t.pageSize):1,t.currentPage=e.page?e.page:1;for(let a in l)t.tableDataList.push(l[a]);t.initCheckList(l)}t.getData&&t.$emit("get-table-data",{event:event,item:t.tableDataList,otherData:t.otherData})}""!=this.columnsUrl&&null!=this.columnsUrl&&this.$http.get(this.columnsUrl,URLCONFIG).then(a=>{l.splice(0,l.length);let e=a&&a.data&&a.data.columns?a.data.columns:[];if(this.assembleColumns){let t=this.assembleColumns.index,a={orignCol:e.slice(0,t),endCol:e.slice(t,e.length),connectCol:this.assembleColumns.data};e=CONNECTCOLUMS(a,100),this.bottomColumnList=e.slice(t,e.length)}if(e.length>0)for(let a in e)l.push(e[a]),1==e[a].disabled&&t.columnConfig.push(e[a].prop)}).catch(a=>{t.loading=!1,t.$message.error(LANG["网络问题，请稍后重试！"]||"网络问题，请稍后重试！")})},doHandle(t,a){this.$emit("do-handle",{event:event,row:t,fn:a,page:this.currentPage})},initCheckList(t){let a=this.rowsList={},e=this.checked;this.checkSum=0,this.allChecked=!0;let s=0;for(let l in t)e[t[l].detail_id]?(this.$set(this.checkList,l,!0),s++):this.$set(this.checkList,l,!1),a[l]=t[l];s===t.length&&s>0?this.allChecked=!0:this.allChecked=!1,this.checkSum=s},allchecked(){let t=this.allChecked,a=(this.unchecked,this.tableDataList,this.checkList),e=(this.checkCondition,this.checked),s=this.rowsList,l=[],i=0;if(t)for(let t in this.tableDataList)"0"==this.tableDataList[t].revoked&&(l.push(this.tableDataList[t]),s[t]=this.tableDataList[t],e[this.tableDataList[t].detail_id]=this.tableDataList[t].detail_id,a[t]=!0,this.allCheckSum++,i++);else{this.checkSum=0,l.splice(0,l.length);for(let t in a)a[t]=!1;for(let t in s)e[s[t].detail_id]&&(this.allCheckSum--,delete e[s[t].detail_id]);e={},s=null}this.attributes.subTotalRevoke===this.tableDataList.length&&this.$message.error(LANG["本页无会员可冲销"]||"本页无会员可冲销"),this.allChecked=this.tableDataList.length===i,this.checkSum=this.tableDataList.length===i?this.tableDataList.length:i},thisChecked(t){this.allChecked;let a=this.checked,e=this.tableDataList,s=this.checkList,l=this.rowsList,i=[],o=0;s[t]?(l[t]=this.tableDataList[t],a[l[t].detail_id]=l[t].detail_id,o++,this.checkSum=this.checkSum+1):(a[l[t].detail_id]&&(delete a[this.tableDataList[t].detail_id],o--),l[t]&&delete l[t],this.checkSum=this.checkSum-1),this.checkSum===e.length&&(this.allChecked=!0),0===this.checkSum&&(this.allChecked=!1);for(let t in l)i.push(l[t]);this.allCheckSum=o},doSizePage(t){this.loading=!0;let a=this,e=this.total,s=this.pageSize,l=this.pageCount,i={},o=0;if(o=Math.ceil(s*l/e)||1,a.tableDataList.splice(0,a.tableDataList.length),-1===this.baseUrl.indexOf("?"))this.baseUrl=this.baseUrl+"?page=1&page_size="+t;else{let a=this.baseUrl.indexOf("page=");this.baseUrl=a>0?this.baseUrl.replace(/page=\d+/,"page=1"):this.baseUrl+"&page=1&page_size="+t;let e=this.baseUrl.indexOf("page_size=");this.baseUrl=e>0?this.baseUrl.replace(/page_size=\d+/,"page_size="+t):this.baseUrl+"&page_size=1000"}this.$http.get(this.baseUrl,URLCONFIG).then(t=>{a.total=t.data.attributes.total||10,a.pageSize=t.data.attributes.size||1e3,a.pageCount=Math.ceil(this.total/this.pageSize),a.currentPage=1;let e=t.data.tableDemoDate||t.data.data||t.data.data.list||t.data.data.data||t.data.data.deposit||[];if(e.list){for(let t in e.list)a.tableDataList.push(e.list[t]);a.initCheckList(e.list)}else{for(let t in e)a.tableDataList.push(e[t]);a.initCheckList(e)}if(a.getData){let a=t.data||{};for(let t in a)i[t]=a[t]}a.allTableDataList={},t.data.attributes&&(a.attributes.subTotal=t.data.data.length||0,a.attributes.total=t.data.attributes.total||0,a.attributes.totalRevoke=t.data.attributes.totalRevoke||0,a.attributes.subTotalRevoke=t.data.attributes.subTotalRevoke||0,t.data.attributes&&t.data.attributes.totalData&&(a.allTableDataList.totalData=t.data.attributes.totalData,a.allTableDataList.totalMoney=t.data.attributes.totalMoney),t.data.attributes&&t.data.attributes.subTotalData&&(a.allTableDataList.subTotalData=t.data.attributes.subTotalData,a.allTableDataList.subTotalMoney=t.data.attributes.subTotalMoney)),a.allTableDataList.size=e.length,a.getData&&a.$emit("get-table-data",{event:event,item:a.tableDataList,allData:i}),a.loading=!1}).catch(t=>{a.loading=!1,a.$message.error(LANG["网络问题，请稍后重试！"]||"网络问题，请稍后重试！")})},doCurrentChange(t){this.loading=!0;let a=this.total,e=this.pageSize,s=this.pageCount,l={};this.currentPage=t;let i=0,o=this;if(i=Math.ceil(e*s/a)||1,o.tableDataList.splice(0,o.tableDataList.length),-1===this.baseUrl.indexOf("?"))this.baseUrl=this.baseUrl+"?page="+t+"&page_size="+this.pageSize;else{let a=this.baseUrl.indexOf("page=");this.baseUrl=a>0?this.baseUrl.replace(/page=\d+/,"page="+t):this.baseUrl+"&page="+t+"&page_size="+this.pageSize;let e=this.baseUrl.indexOf("page_size=");this.baseUrl=e>0?this.baseUrl.replace(/page_size=\d+/,"page_size="+this.pageSize):this.baseUrl+"&page_size=1000"}this.$http.get(this.baseUrl,URLCONFIG).then(t=>{o.total=t.data.attributes.total||10,o.pageSize=t.data.attributes.size||1e3,o.pageCount=Math.ceil(this.total/this.pageSize),o.currentPage=t.data.attributes.number||1;let a=t.data.tableDemoDate||t.data.data||t.data.data.list||t.data.data.data||t.data.data.deposit||[];if(a.list){for(let t in a.list)o.tableDataList.push(a.list[t]);o.initCheckList(a.list)}else{for(let t in a)o.tableDataList.push(a[t]);o.initCheckList(a)}if(o.getData){let a=t.data||{};for(let t in a)l[t]=a[t]}o.allTableDataList={},t.data.attributes&&(o.attributes.subTotal=t.data.data.length||0,o.attributes.total=t.data.attributes.total||0,o.attributes.totalRevoke=t.data.attributes.totalRevoke||0,o.attributes.subTotalRevoke=t.data.attributes.subTotalRevoke||0,t.data.attributes&&t.data.attributes.totalData&&(o.allTableDataList.totalData=t.data.attributes.totalData,o.allTableDataList.totalMoney=t.data.attributes.totalMoney),t.data.attributes&&t.data.attributes.subTotalData&&(o.allTableDataList.subTotalData=t.data.attributes.subTotalData,o.allTableDataList.subTotalMoney=t.data.attributes.subTotalMoney)),this.attributes.subTotal=t.data.data.length||0,this.attributes.subTotalRevoke=t.data.attributes.subTotalRevoke||0,o.allTableDataList.size=a.length,o.getData&&o.$emit("get-table-data",{event:event,item:o.tableDataList,allData:l}),o.loading=!1}).catch(t=>{o.loading=!1,o.$message.error(LANG["网络问题，请稍后重试！"]||"网络问题，请稍后重试！")})},doOperation(t){let a=[];for(let t in this.checked)a.push(t);this.loadingOne=!0,this.$emit("do-operation",{dataList:a})},doSort(t,a){let e=this.tableDataList,s=this.timeXJ,l=this.timeTZ;switch(t){case"sortByXJ":s%2==0?e.sort(function(t,a){return t.coupon-a.coupon}):e.sort(function(t,a){return a.coupon-t.coupon}),this.timeXJ++;break;case"sortByTZ":l%2==0?e.sort(function(t,a){return t.valid_bet-a.valid_bet}):e.sort(function(t,a){return a.valid_bet-t.valid_bet}),this.timeTZ++}},updateFormData(){this.tableData.list.length>0&&this.Datainit()},doHandle(t,a){this.$emit("do-handle",{event:event,row:t,fn:a,page:this.currentPage})},changes(t,a,e){t>=0&&this.$emit("do-changes",{row:a,index:t,key:e})},dataSave(){this.$emit("data-save",{dataList:this.tableDataList})},getTableWidth(){if(this.fullWidth){let t=0;this.columnsUrl&&this.$http.get(this.columnsUrl,URLCONFIG).then(a=>{if(a.data.columns){let e=a.data.columns;for(let a in e)e[a].width&&(t+=parseInt(e[a].width));t=t>900?t:1100,$(window).width()>1200&&($(".tablesOverall").find("table").css("min-width",t+"px"),$(".tablesOverall").css("width",$(window).width()-110).addClass("socr"))}})}},exportData(){this.$emit("export-data")},save(){this.$refs.form.validate(t=>{if(!t)return!1;{let t=[];for(let a in this.unchecked)t.push(a);this.$emit("unchecked",{dataList:t,modeData:this.modeData})}})}},watch:{"tableData.list":"updateFormData",tableUrl:function(t){this.Datainit()},tableDataList(){this.getTableWidth()},formType:function(t){"add"!=t&&"edit"!=t&&"delete"!=t||this.Datainit()},opts:function(t){t&&this.Datainit()}},created(){this.Datainit()},mounted(){this.$nextTick(()=>{EVENT.$emit("table.loaded")})},activated(){this.allCheckSum=0,this.checked={},this.pageSize=1e3,this.loadingOne=!1;let t=this;setTimeout(function(){t.Datainit()},500)}},l=e(10);var i=function(t){e(455)},o={data:()=>({LANG:LANG,columnsUrl:"",loading:!1,tableUrl:"",assembleColumns:{index:4,data:[]},checkCondition:{prop:"revoked",value:"1"},query:{},updated:!1,attributes:{},timeXJ:0,timeTZ:0,isLoading:!0,isShow:"true"==sessionStorage.rebate_details_export||"true"==sessionStorage.rebate_export,dialogVisible:!1,outUrl:""}),components:{tableDetail:Object(l.a)(s,function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"tableSingle",attrs:{id:"tableSingle"}},[t.showExport?e("el-col",{staticClass:"tRight mb20"},[e("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.exportData}},[t._v(t._s(t.LANG["导出"]||"导出")+" ")])],1):t._e(),t._v(" "),e("el-col",{staticClass:"ft14 mb10"},[t.allCheckSum?e("div",{staticClass:"font14 mt10 fl w50"},[e("span",{staticClass:"fl mr10",staticStyle:{"line-height":"36px"}},[t._v(t._s(t.LANG["本页您选择了"]||"本页您选择了")+"\n            "),e("span",{staticClass:"selecttext"},[t._v(t._s(t.checkSum))]),t._v(t._s(t.LANG["条数据"]||"条数据")+" ")]),t._v(" "),e("el-button",{attrs:{size:"small",loading:t.loadingOne},on:{click:function(a){return t.doOperation("delMeg")}}},[t._v(t._s(t.LANG["冲销"]||"冲销"))])],1):t._e()]),t._v(" "),e("div",{staticClass:"tablesOverall",attrs:{id:"tables"}},[e("table",{staticClass:"el-table w100 el-table--border mt10",attrs:{cellspacing:"0",cellpadding:"0",border:"1"}},[e("tr",[t.tableCheck&&t.tableDataList.length?e("th",[e("div",{staticClass:"cell"},[e("el-checkbox",{attrs:{disabled:t.checkDisabled},on:{change:t.allchecked},model:{value:t.allChecked,callback:function(a){t.allChecked=a},expression:"allChecked"}})],1)]):t._e(),t._v(" "),t.tableIndex&&t.tableDataList.length?e("th",[e("div",{staticClass:"cell"},[t._v(t._s(t.LANG["序号"]||"序号"))])]):t._e(),t._v(" "),t._l(t.columnList,function(a,s){return 1==a.disabled?e("th",{key:s,staticClass:"is-leaf"},[a.click?e("div",t._l(a.btnGroup,function(a,s){return e("el-button",{key:s,class:t.colorIndex===s?"clickState":"",staticStyle:{display:"block"},attrs:{size:"small",type:"text"},on:{click:function(e){return t.doSort(a.fn,s)}}},[t._v(t._s(a.label))])}),1):e("div",[t._v(t._s(a.label))])]):t._e()})],2),t._v(" "),t._l(t.tableDataList,function(a,s){return t.tableDataList.length?e("tr",{key:s,class:{col2:!parseInt((s+1)%2)}},[t.tableCheck&&t.tableDataList.length?e("td",{staticClass:"el-table_1_column_19",attrs:{width:"55px"}},[e("div",{staticClass:"cell"},[e("el-checkbox",{attrs:{disabled:"0"!=a.revoked},on:{change:function(a){return t.thisChecked(s)}},model:{value:t.checkList[s],callback:function(a){t.$set(t.checkList,s,a)},expression:"checkList[k]"}})],1)]):t._e(),t._v(" "),t.tableIndex&&t.tableDataList.length?e("td",{staticClass:"el-table_ 1_column_19"},[e("div",{staticClass:"cell tCent"},[t._v(t._s(parseInt(s)+1))])]):t._e(),t._v(" "),t._l(t.columnList,function(s,l){return 1==s.disabled?e("td",{key:l,staticClass:"el-table_1_column_19",style:{"min-Width":s.width+"px"}},["twoLine"==s.type?e("div",{staticClass:"cell",class:{tCent:null!=s.class}},[s.filterByWord?e("div",t._l(a[s.filterByWord],function(a){return e("div",[s.filterCondition.split(",").length>1?e("div",[s[s.filterCondition.split(",")[0]]==a[s.filterCondition.split(",")[0]]&&s[s.filterCondition.split(",")[1]]==a[s.filterCondition.split(",")[1]]?e("div",[e("span",{staticStyle:{display:"block"}},[t._v(t._s(t._f("formatMoney")(a.valid_bet)))]),t._v(" "),e("span",{staticStyle:{display:"block",color:"#20a0ff"}},[t._v(t._s(t._f("formatMoney")(a.coupon)))])]):t._e()]):e("div",[s[s.filterCondition.split(",")[0]]==a[s.filterCondition.split(",")[0]]?e("span",[e("span",{staticStyle:{display:"block"}},[t._v(t._s(t._f("formatMoney")(a.valid_bet)))]),t._v(" "),e("span",{staticStyle:{display:"block",color:"#20a0ff"}},[t._v(t._s(t._f("formatMoney")(a.coupon)))])]):t._e()])])}),0):e("div",[e("span",{staticStyle:{display:"block"}},[t._v(t._s(t._f("formatMoney")(a[s.prop.split(",")[0]])))]),t._v(" "),e("span",{staticStyle:{display:"block",color:"#20a0ff"}},[t._v(t._s(t._f("formatMoney")(a[s.prop.split(",")[1]])))])])]):t._e(),t._v(" "),s.type||s.filters?t._e():e("div",{staticClass:"cell",class:{tCent:null!=s.class}},[e("span",[t._v(t._s(a[s.prop]))])]),t._v(" "),s.filters?e("div",{staticClass:"cell",class:{tCent:null!=s.class}},["1"==a[s.prop]?e("span",{staticClass:"danger_text"},[t._v(t._s(t._f("formatSex")(a[s.prop],s.filters)))]):e("span",{staticClass:"sucess_text"},[t._v(t._s(t._f("formatSex")(a[s.prop],s.filters)))])]):t._e()]):t._e()})],2):t._e()}),t._v(" "),t.sumGame&&t.allTableDataList.subTotalData&&t.allTableDataList.size?e("tr",[e("td",[e("div",{staticClass:"cell"},[t._v(t._s(t.LANG["小计"]||"小计"))])]),t._v(" "),e("td",{attrs:{colspan:t.colspan}},[e("div",{staticClass:"cell tCent",attrs:{slot:"sub"},slot:"sub"},[t._v("人数 / 冲销: "+t._s(t.attributes.subTotal)+"  / "+t._s(t.attributes.subTotalRevoke))])]),t._v(" "),e("td",[e("span",{staticClass:"cell",staticStyle:{display:"block"}},[t._v(t._s(t._f("formatMoney")(t.allTableDataList.subTotalMoney.valid_bet)))]),t._v(" "),e("span",{staticClass:"cell",staticStyle:{display:"block",color:"#20a0ff"}},[t._v(t._s(t._f("formatMoney")(t.allTableDataList.subTotalMoney.coupon)))])]),t._v(" "),t._l(t.bottomColumnList,function(a,s){return e("td",{key:s},t._l(t.allTableDataList.subTotalData,function(s,l){return a.filterCondition&&a[a.filterCondition.split(",")[0]]==s[a.filterCondition.split(",")[0]]&&a[a.filterCondition.split(",")[1]]==s[a.filterCondition.split(",")[1]]?e("div",{key:l,staticClass:"cell"},[e("span",{staticStyle:{display:"block"}},[t._v(t._s(t._f("formatMoney")(s.valid_bet)))]),t._v(" "),e("span",{staticStyle:{display:"block",color:"#20a0ff"}},[t._v(t._s(t._f("formatMoney")(s.coupon)))])]):t._e()}),0)})],2):t._e(),t._v(" "),t.sumGame&&t.allTableDataList.totalMoney&&t.allTableDataList.size?e("tr",[e("td",[e("div",{staticClass:"cell"},[t._v(t._s(t.LANG["总计"]||"总计"))])]),t._v(" "),e("td",{attrs:{colspan:t.colspan}},[e("div",{staticClass:"cell tCent",attrs:{slot:"total"},slot:"total"},[t._v("总人数 / 冲销 : "+t._s(t.attributes.total)+" / "+t._s(t.attributes.totalRevoke))])]),t._v(" "),e("td",[e("span",{staticClass:"cell",staticStyle:{display:"block"}},[t._v(t._s(t._f("formatMoney")(t.allTableDataList.totalMoney.valid_bet)))]),t._v(" "),e("span",{staticClass:"cell",staticStyle:{display:"block",color:"#20a0ff"}},[t._v(t._s(t._f("formatMoney")(t.allTableDataList.totalMoney.coupon)))])]),t._v(" "),t._l(t.bottomColumnList,function(a,s){return e("td",{key:s},t._l(t.allTableDataList.totalData,function(s,l){return a.filterCondition&&a[a.filterCondition.split(",")[0]]==s[a.filterCondition.split(",")[0]]&&a[a.filterCondition.split(",")[1]]==s[a.filterCondition.split(",")[1]]?e("div",{key:l,staticClass:"cell"},[e("span",{staticStyle:{display:"block"}},[t._v(t._s(t._f("formatMoney")(s.valid_bet)))]),t._v(" "),e("span",{staticStyle:{display:"block",color:"#20a0ff"}},[t._v(t._s(t._f("formatMoney")(s.coupon)))])]):t._e()}),0)})],2):t._e()],2),t._v(" "),0==t.tableDataList.length?e("el-col",{staticStyle:{"line-height":"100px","text-align":"center","background-color":"#ffffff"}},[e("div",{staticClass:"dell"},[t._v(t._s(t.LANG["暂无数据"]||"暂无数据"))])]):t._e()],1),t._v(" "),t.pageSet&&t.tableDataList.length>0?e("el-col",{staticClass:"toolbar mt20 pRight20",staticStyle:{position:"relative","text-align":"right"},attrs:{span:24}},[e("el-pagination",{staticStyle:{float:"right"},attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,100,1e3],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.doSizePage,"current-change":t.doCurrentChange}})],1):t._e()],1)},[],!1,i,"data-v-2da5a202",null).exports},methods:{init(){let t=this,a=this.$route.query;for(let t in a)this.$set(this.query,t,a[t]);(function(){return new Promise((a,e)=>{0===t.assembleColumns.data.length?this.$.autoAjax("get",URL.api+"/games","",{ok:e=>{0===e.state&&e.data&&(e.data.forEach(a=>{let e={label:a.game_name,type:"twoLine",game_id:a.game_id,game_type:a.game_type,filterByWord:"games",prop:"val",filterCondition:"game_type,game_id"};t.assembleColumns.data.push(e)}),a())},p:()=>{},error:t=>{console.log(t)}}).catch(a=>{t.$message.error(LANG["未知错误，请稍后重试"]||"未知错误，请稍后重试"),e(a)}):a()})})().then(()=>{t.columnsUrl="static/json/preAct/discountDetail/columns.json",t.tableUrl=URL.api+`/active/rebetset/detail?id=${t.$route.query.id}`})},goback(){this.$router.push({path:"/discount"})},getCheckedKeys(){this.checkkeys=this.$refs.tree.getCheckedKeys()},exportData(){let t=this;if("true"==sessionStorage.rebate_export||"true"==sessionStorage.rebate_details_export){let a=URL.api+"/export/download/active.rebetset/",e=this.$route.query.id;this.$.autoAjax("get",URL.api+"/dev/download/sign?nonce="+a,"",{ok:s=>{s.data.data?(t.outUrl=a+"?id="+e+"&nonce="+s.data.data.nonce+"&signature="+s.data.data.signature+"&time="+s.data.data.time+"&uuid="+s.data.data.uuid,t.dialogVisible=!0):s.data.msg?this.$message.error(s.data.msg):t.$message.error(LANG["数据导出失败，请稍后重试"]||"数据导出失败，请稍后重试")},p:()=>{},error:t=>{console.log(t)}}).catch(t=>{})}else this.$message.error(LANG["权限不足"]||"权限不足")},doHandle(t){switch(t.fn){case"doDetail":this.doDetail(t.row)}},doOperation(t){if(this.updated=!1,t.dataList.length>0){let a=URL.api+"/active/rebetset/revoke",e={id:this.query.id||0,detail_id:t.dataList||[]};this.isLoading=!0,this.$.autoAjax("put",a,e,{ok:t=>{if(t.data&&0==t.state){let t=LANG["冲销成功"]||"冲销成功";this.updated=!0,this.$message.success(t),this.isLoading=!1,this.$router.push({path:"/discount"})}else{let t=LANG["冲销失败，请稍后重试"]||"冲销失败，请稍后重试";this.updated=!0,this.$message.success(t)}},p:()=>{},error:t=>{console.log(t)}}).catch(t=>{this.$message.error(LANG["未知错误，请稍后重试"]||"未知错误，请稍后重试")})}else{let t=LANG["请选择数据"]||"请选择数据";this.$message.error(t)}}},computed:{},mounted(){},activated(){this.init()}};var n=function(t){e(454)},r=Object(l.a)(o,function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"clearfix",attrs:{id:"subAgentRebate"}},[e("div",{staticClass:"title"},[e("a",{attrs:{href:"javascript:;"},on:{click:t.goback}},[e("el-button",{attrs:{type:"primary",icon:"arrow-left",size:"small"}},[t._v(t._s(t.LANG["返 回"]||"返 回"))])],1)]),t._v(" "),e("span",[e("el-tag",{attrs:{type:"gray"}},[t._v(t._s(t.query.name))]),t._v("\n        返水活动详情\n    ")],1),t._v(" "),e("el-col",[e("tableDetail",{attrs:{columnsUrl:t.columnsUrl,tableUrl:t.tableUrl,tableCheck:!0,tableIndex:!1,sumGame:!0,assembleColumns:t.assembleColumns,isLoading:t.isLoading,updated:t.updated,showExport:t.isShow,colspan:3},on:{"do-operation":t.doOperation,"export-data":t.exportData}})],1),t._v(" "),e("el-col",[e("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,size:"tiny"},on:{"update:visible":function(a){t.dialogVisible=a}}},[t._v("\n            "+t._s(t.LANG["点击”确认“导出数据"]||"点击”确认“导出数据")+"\n            "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(a){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),e("a",{attrs:{href:t.outUrl,target:"_blank",id:"outUrl"}},[e("el-button",{attrs:{type:"primary"},on:{click:function(a){t.dialogVisible=!1}}},[t._v("确 认")])],1)],1)])],1)],1)},[],!1,n,"data-v-4932c76c",null);a.default=r.exports},220:function(t,a,e){"use strict";var s={data:()=>({columnsModel:[],setState:!1}),props:{columns:Array,columnConfig:Array},methods:{changeColumnConfig(){this.$emit("do_change-col",{event:event,item:this.columnConfig})},saveSet(){this.setState=!1},changeSet(){this.setState=!0}},mounted:function(){let t=this.columns;for(let a in t)this.columnsModel.push({id:a,label:t[a],prop:t[a]})}},l=e(10);Object(l.a)(s,function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[t.setState?t._e():e("i",{staticClass:"fa fa-cog",attrs:{"aria-hidden":"true"},on:{click:t.changeSet}}),t._v(" "),t.setState?e("el-select",{staticStyle:{width:"700px"},attrs:{multiple:"",placeholder:t._("表格列配置")},on:{change:t.changeColumnConfig},model:{value:t.columnConfig,callback:function(a){t.columnConfig=a},expression:"columnConfig"}},t._l(t.columnsModel,function(t){return e("el-option",{key:t.id,attrs:{label:t.label,value:t.prop}})}),1):t._e(),t._v(" "),t.setState?e("el-button",{attrs:{type:"success"},domProps:{textContent:t._s(t._("保存配置"))},on:{click:t.saveSet}}):t._e()],1)},[],!1,null,null,null).exports},454:function(t,a,e){},455:function(t,a,e){}}]);