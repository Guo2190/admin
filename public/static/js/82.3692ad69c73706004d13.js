(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{131:function(e,t,a){"use strict";a.r(t);var i=a(202),s=a(203),o={data:()=>({loading:!1,LANG:LANG,tableUrl:"",columnsUrl:"",type:"default",formTitel:"",labelWidth:"90px",isEdit:{state:!1},formVisible:{state:!1},formType:"",formConfig:[{prop:"name",value:"",label:"文案类型",type:"select",list:ARRAYS.proxyCopyList,rules:[{require:!0}]},{prop:"language_id",value:"",label:"语言",type:"select",list:[],propVal:"language_name",rules:[{require:!0}]},{prop:"sort",value:"",type:"number",label:"排序",rules:[{require:!0,integer:!0}]},{prop:"content",value:"",type:"markdown",label:"文案内容",rules:[{require:!0}]}],editflag:!1,updated:!1,nowId:-1,titleDetails:"",dialogTableVisible:!1,details:{},formLabelWidth:"100px"}),components:{tablegrid:i.a,formEdit:s.a},methods:{init(){this.tableUrl=URL.api+ROUTES.GET.copywriter.proxy,this.baseUrl=URL.api+ROUTES.GET.copywriter.proxy,this.columnsUrl="/static/json/ADManage/proxyCopy/columns.json";let e=URL.api+ROUTES.GET.langeages;this.$.autoAjax("get",e,"",{ok:e=>{let t=e.data;for(let e in t)this.formConfig[1].list.push({label:t[e].name.toString(),value:t[e].id.toString()})},p:()=>{},error:e=>{console.log(e)}})},doHandle(e){switch(this.formType="",e.fn){case"doDetails":this.doDetails(e.row);break;case"doApption":this.doApption(e.row);break;case"doEnabled":this.doEnabled(e.row);break;case"doDisabled":this.doDisabled(e.row);break;case"doEdit":this.doEdit(e.row);break;case"doDelete":this.doDelete(e.row)}},AddNew(){this.formTitel="新增代理文案",this.formType="add",this.formVisible.state=!0},getForm(e){e.formObj.pf="pc",this.fullscreenLoading=!0,this.updated=!1;let t="";"edit"!=this.formType?this.$.autoAjax("put",URL.api+ROUTES.POST.copywriter.proxy,e.formObj,{ok:a=>{a.data&&0==a.state?this.$message.success(LANG["恭喜您，新增代理文案成功！"]||"恭喜您，新增代理文案成功！"):0==a.data&&a.state>3&&(t=a.msg,this.$message.error(LANG[t]||t)),this.formType="",e.formObj="",this.updated=!0},p:()=>{},error:e=>{console.log(e)}}):this.$.autoAjax("put",URL.api+ROUTES.PUT.copywriter.proxy.newProxy+"?id="+this.nowId,e.formObj,{ok:a=>{a.data&&0==a.state?this.$message.success(LANG["恭喜您，修改代理文案成功！"]||"恭喜您，修改代理文案成功！"):0==a.data&&a.state>3&&(t=a.msg,this.$message.error(LANG[t]||t)),this.formType="",e.formObj="",this.updated=!0},p:()=>{},error:e=>{console.log(e)}})},doEnabled(e){let t=e.id;this.updated=!1,this.$.autoAjax("patch",URL.api+ROUTES.PATCH.copywriter.proxy.$(t),{status:"enabled",language_id:parseInt(e.language_id),pf:e.pf},{ok:e=>{0==e.state&&e.data?(this.$message.success(LANG["启用成功"]||"启用成功"),this.updated=!0):this.$message.error(LANG["启用失败"]||"启用失败")},p:()=>{},error:e=>{console.log(e)}})},doDelete(e){let t=e.id;this.updated=!1,this.$.autoAjax("delete",URL.api+ROUTES.DELETE.copywriter.proxy.$(t),"",{ok:e=>{0==e.state&&e.data?(this.$message.success(LANG["删除成功"]||"删除成功"),this.updated=!0):this.$message.error(LANG["删除失败"]||"删除失败")},p:()=>{},error:e=>{console.log(e)}})},doDisabled(e){let t=e.id;this.updated=!1,this.$.autoAjax("patch",URL.api+ROUTES.PATCH.copywriter.proxy.$(t),{status:"disabled",language_id:parseInt(e.language_id),pf:e.pf},{ok:e=>{0==e.state&&e.data?(this.$message.success(LANG["停用成功"]||"停用成功"),this.updated=!0):this.$message.error(LANG["停用失败"]||"停用失败")},p:()=>{},error:e=>{console.log(e)}})},doApption(e){let t=e.id;this.updated=!1,this.$.autoAjax("patch",URL.api+ROUTES.PATCH.copywriter.proxy.$(t),{approve_status:"applying",language_id:e.language_id,pf:e.pf},{ok:e=>{e.data&&0==e.state?this.$message.success(LANG["申请成功"]||"申请成功"):this.$message.error(LANG["申请失败"]||"申请失败"),this.updated=!0},p:()=>{},error:e=>{console.log(e)}})},doDetails(e){e.type_id=e.type,this.nowId=e.id,this.titleDetails="《"+e.name+"》的详情",this.dialogTableVisible=!0;for(let t in e)this.details[t]=e[t]},doEdit(e){this.nowId=e.id,this.loading=!0,this.formVisible.state=!0,this.isEdit.state=!0,this.formTitel="修改代理文案",FORMVAL(e,this.formConfig),this.formType="edit",this.loading=!1}},created(){this.init()}},l=a(10);var r=function(e){a(418)},d=Object(l.a)(o,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{id:"proxyCopy"}},[a("el-col",{staticClass:"pb",attrs:{STYLE:"text-align: right;"}},[a("el-button",{staticClass:"btn_right",attrs:{size:"small",type:"primary"},domProps:{textContent:e._s(e.LANG["新增代理文案"]||"新增代理文案")},on:{click:e.AddNew}})],1),e._v(" "),a("el-col",[a("tablegrid",{attrs:{columnsUrl:e.columnsUrl,tableUrl:e.tableUrl,tableCheck:!1,tableIndex:!1,showRefresh:!0,updated:e.updated},on:{"do-handle":e.doHandle}})],1),e._v(" "),a("formEdit",{attrs:{formTitel:e.formTitel,formVisible:e.formVisible,formConfig:e.formConfig,type:e.type,labelWidth:e.labelWidth,isEdit:e.isEdit,formType:e.formType},on:{"get-form":e.getForm}}),e._v(" "),a("el-col",[a("el-dialog",{staticClass:"detail",attrs:{title:e.titleDetails,size:"tiny"},model:{value:e.dialogTableVisible,callback:function(t){e.dialogTableVisible=t},expression:"dialogTableVisible"}},[a("el-form",{attrs:{model:e.details}},[a("el-form-item",{attrs:{label:e.LANG["文案名称:"]||"文案名称:","label-width":e.formLabelWidth}},[a("span",[e._v(e._s(e.details.name))])]),e._v(" "),a("el-form-item",{attrs:{label:e.LANG["语言:"]||"语言:","label-width":e.formLabelWidth}},[a("p",{staticStyle:{width:"90%"}},[e._v(e._s(e.details.language_name))])]),e._v(" "),a("el-form-item",{attrs:{label:e.LANG["当前排序"]||"当前排序","label-width":e.formLabelWidth}},[a("p",{staticStyle:{width:"90%"}},[e._v(e._s(e.details.sort))])]),e._v(" "),a("el-form-item",{attrs:{label:e.LANG["文案内容:"]||"文案内容:","label-width":e.formLabelWidth}},[a("div",{staticClass:"mark_waip",domProps:{innerHTML:e._s(e.details.content)}})]),e._v(" "),a("el-form-item",{attrs:{label:e.LANG["生成时间:"]||"生成时间:","label-width":e.formLabelWidth}},[a("span",[e._v(e._s(e.details.created))])])],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogTableVisible=!1}}},[e._v("关 闭")])],1)],1)],1)],1)},[],!1,r,null,null);t.default=d.exports},418:function(e,t,a){}}]);