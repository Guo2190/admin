(window.webpackJsonp=window.webpackJsonp||[]).push([[106],{157:function(e,t,i){"use strict";i.r(t);var o=i(203),s=(i(15),{data:()=>({LANG:LANG,formVisible:{},isEdit:{},formTitel:"",formType:"",formConfig:[{prop:"title",value:"",type:"text",label:"后台站点名称",rules:[{require:!0}]},{prop:"title",value:"",type:"text",label:"后台站点标题",rules:[{require:!0}]},{prop:"domain",value:"",type:"textarea",domainType:"end",label:"后台域名列表",rulesType:"urls",rules:[{require:!0,disabled:!0}],prompt:LANG["绑定多个域名请使用换行（回车）隔开"]||"绑定多个域名请使用换行（回车）隔开"},{prop:"is_ssl",value:"",label:"SSL加密",type:"select",list:[{label:"是",value:"1"},{label:"否",value:"0"}],rules:[{require:!0}]},{prop:"logos",value:[],type:"upload",fileNum:1,label:"LOGO",action:URL.img,folder:"adlist",rules:[{require:!0}]}],labelWidth:"150px",dnsUrl:""}),components:{formEdit:o.a},methods:{init(){this.formType="",this.tableUrl=URL.api+ROUTES.GET.system.domain,this.baseUrl=URL.api+ROUTES.GET.system.domain,this.$.autoAjax("get",URL.api+ROUTES.GET.system.domain+"?type=1","",{ok:e=>{if(0===e.state&&e.data){this.dnsUrl=e.data.domain||window.location.host;let t=e.data.info||[];FORMVAL(t,this.formConfig);let i="",o=t.domains||[];for(let e in o)o[e].domain&&(i=i+o[e].domain+"\r\n");this.formConfig[0].value=t.name,this.formConfig[1].value=t.title,this.formConfig[2].value=i,this.formConfig[3].value=t.is_ssl,this.formConfig[4].value.push(t.logo),this.formType="eidt"}},p:()=>{},error:e=>{console.log(e)}})},saveForm(e){let t={type:1,build:0};for(let i in e.formObj)"domain"===i?(t[i]=[],e.formObj[i].split(/[\n]/g).forEach(e=>{e&&t[i].push(e)})):t[i]=e.formObj[i];t.name=e.formObj.title,t.title=e.formObj.title,t.bottom="默认底部信息",t.is_ssl=e.formObj.is_ssl,t.lang="zh-CN",t.logo=e.formObj.logos[0].toString(),delete t.logos,this.$.autoAjax("put",URL.api+ROUTES.PUT.system.domain,t,{ok:e=>{0===e.state&&e.data?this.$message.success(LANG["保存成功"]||"保存成功"):2002===e.state?(this.$message.error(LANG["无效域名"]||"无效域名"),this.loading=!1):1002===e.state?(this.$message.error(LANG["域名已经存在"]||"域名已经存在"),this.loading=!1):5001===e.state?(this.$message.error(LANG["配置错误"]||"配置错误"),this.loading=!1):(this.$message.error(LANG["保存失败"]||"保存失败"),this.loading=!1)},p:()=>{},error:e=>{console.log(e)}}).catch(e=>{})}},mounted(){},created(){this.init()}}),l=i(10),a=Object(l.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"domainNameManage"}},[i("el-col",{staticClass:"mt20",staticStyle:{"max-width":"600px"},attrs:{span:12,offset:6}},[i("formEdit",{attrs:{formVisible:e.formVisible,formConfig:e.formConfig,formType:e.formType,type:"pageForm",dnsUrl:e.dnsUrl,labelWidth:e.labelWidth,isEdit:e.isEdit,formTitel:e.formTitel},on:{"get-form":e.saveForm}})],1)],1)},[],!1,null,null,null);t.default=a.exports}}]);