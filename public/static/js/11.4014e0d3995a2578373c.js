(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{194:function(t,e,s){"use strict";s.r(e);var i=s(252),a=s(24);var l=function(t){s(394)},r=Object(a.a)(i.a,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"setup"}},[s("el-row",{staticClass:"tCent",staticStyle:{background:"#00bca4",color:"#ffffff",padding:"10px"}},[s("h1",[t._v(t._s(t.LANG["厅主站点配置"]||"厅主站点配置"))])]),t._v(" "),s("el-row",{staticClass:"steps",staticStyle:{"padding-top":"100px"},attrs:{type:"flex",justify:"center"}},[s("el-col",{attrs:{span:8}},[s("step",{attrs:{active:t.num}})],1)],1),t._v(" "),s("el-row",{staticClass:"steps",attrs:{type:"flex",justify:"center"}},[s("el-col",{attrs:{span:10}},[s("el-form",{directives:[{name:"show",rawName:"v-show",value:1==t.num,expression:"num == 1"}],ref:"moneyForm",attrs:{model:t.moneyForm,rules:t.moneyRules,"label-width":"150px"}},[s("el-form-item",{attrs:{label:t.LANG["选择货币"]||"选择货币",prop:"money"}},[s("el-select",{model:{value:t.moneyForm.money,callback:function(e){t.$set(t.moneyForm,"money",e)},expression:"moneyForm.money"}},t._l(t.moneylist,function(t,e){return s("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1)],1)],1),t._v(" "),s("el-form",{directives:[{name:"show",rawName:"v-show",value:2==t.num,expression:"num == 2"}],ref:"emailForm",attrs:{model:t.emailForm,rules:t.emailRules,"label-width":"150px"}},[s("el-form-item",{attrs:{label:t.LANG["SMTP服务器"]||"SMTP服务器",prop:"mailhost"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.emailForm.mailhost,callback:function(e){t.$set(t.emailForm,"mailhost",e)},expression:"emailForm.mailhost"}},t._l(t.mailhostArr,function(t,e){return s("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),s("el-form-item",{attrs:{label:t.LANG["邮箱地址"]||"邮箱地址",prop:"mailaddress"}},[s("el-input",{attrs:{type:"email"},model:{value:t.emailForm.mailaddress,callback:function(e){t.$set(t.emailForm,"mailaddress",e)},expression:"emailForm.mailaddress"}})],1),t._v(" "),s("el-form-item",{attrs:{label:t.LANG["邮箱密码"]||"邮箱密码",prop:"mailpass"}},[s("el-input",{attrs:{type:"password"},model:{value:t.emailForm.mailpass,callback:function(e){t.$set(t.emailForm,"mailpass",e)},expression:"emailForm.mailpass"}})],1)],1),t._v(" "),s("el-form",{directives:[{name:"show",rawName:"v-show",value:3==t.num,expression:"num == 3"}],ref:"adminForm",attrs:{model:t.adminForm,rules:t.adminRules,"label-width":"150px"}},[s("el-form-item",{attrs:{label:t.LANG["站点名称"]||"站点名称",prop:"name"}},[s("el-input",{model:{value:t.adminForm.name,callback:function(e){t.$set(t.adminForm,"name",e)},expression:"adminForm.name"}})],1),t._v(" "),s("el-form-item",{attrs:{label:t.LANG["站点标题"]||"站点标题",prop:"title"}},[s("el-input",{model:{value:t.adminForm.title,callback:function(e){t.$set(t.adminForm,"title",e)},expression:"adminForm.title"}})],1),t._v(" "),s("el-form-item",{attrs:{label:t.LANG["站点底部信息"]||"站点底部信息",prop:"bottom"}},[s("el-input",{model:{value:t.adminForm.bottom,callback:function(e){t.$set(t.adminForm,"bottom",e)},expression:"adminForm.bottom"}})],1),t._v(" "),s("el-form-item",{attrs:{label:t.LANG["厅主域名"]||"厅主域名",prop:"domain"}},[s("el-input",{attrs:{type:"textarea"},on:{change:function(e){return t.changewww("admin")}},model:{value:t.adminForm.domain,callback:function(e){t.$set(t.adminForm,"domain",e)},expression:"adminForm.domain"}})],1),t._v(" "),t.adminList.length>0?s("el-form-item",[s("el-collapse",t._l(t.adminList,function(e,i){return s("el-collapse-item",{key:"key",attrs:{title:e.url,name:parseInt(i)+1}},[s("el-col",{staticClass:"bmBorder",attrs:{span:24}},[s("div",{staticClass:"grid-content tCent"},[s("ul",[s("li",{staticClass:"w20 fl bg-purple"},[t._v(t._s(t.LANG["用途"]||"用途"))]),t._v(" "),s("li",{staticClass:"w40 fl bg-purple"},[t._v(t._s(t.LANG["域名"]||"域名"))]),t._v(" "),s("li",{staticClass:"w40 fl bg-purple"},[t._v(t._s(t.LANG["指向域名"]||"指向域名"))])])])]),t._v(" "),s("el-col",{staticClass:"bmBorder",attrs:{span:24}},[s("div",{staticClass:"grid-content tCent"},[s("ul",[s("li",{staticClass:"w20 fl bg-purple-light"},[t._v(t._s(e.adminlabel))]),t._v(" "),s("li",{staticClass:"w40 fl bg-purple-light"},[t._v(t._s(e.adminUrl))]),t._v(" "),s("li",{staticClass:"w40 fl bg-purple-light"},[t._v(t._s(e.adminlocalhost))])])])]),t._v(" "),s("el-col",{staticClass:"bmBorder",attrs:{span:24}},[s("div",{staticClass:"grid-content tCent"},[s("ul",[s("li",{staticClass:"w20 fl bg-purple-light"},[t._v(t._s(e.cpilabel))]),t._v(" "),s("li",{staticClass:"w40 fl bg-purple-light"},[t._v(t._s(e.cpiUrl))]),t._v(" "),s("li",{staticClass:"w40 fl bg-purple-light"},[t._v(t._s(e.cpilocalhost))])])])]),t._v(" "),s("el-col",{staticClass:"bmBorder",attrs:{span:24}},[s("div",{staticClass:"grid-content tCent"},[s("ul",[s("li",{staticClass:"w20 fl bg-purple-light"},[t._v(t._s(e.rpiLabel))]),t._v(" "),s("li",{staticClass:"w40 fl bg-purple-light"},[t._v(t._s(e.rpi))]),t._v(" "),s("li",{staticClass:"w40 fl bg-purple-light"},[t._v(t._s(e.rpilocalhost))])])])])],1)}),1)],1):t._e(),t._v(" "),s("el-form-item",{attrs:{label:"选择语言",prop:"lang"}},[s("el-select",{model:{value:t.adminForm.lang,callback:function(e){t.$set(t.adminForm,"lang",e)},expression:"adminForm.lang"}},t._l(t.langugaeslist,function(t,e){return s("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),s("el-form-item",{attrs:{label:t.LANG["是否SSL加密"]||"是否SSL加密",prop:"is_ssl"}},[s("el-select",{model:{value:t.adminForm.is_ssl,callback:function(e){t.$set(t.adminForm,"is_ssl",e)},expression:"adminForm.is_ssl"}},[s("el-option",{attrs:{label:"启用",value:"1"}}),t._v(" "),s("el-option",{attrs:{label:"停用",value:"0"}})],1)],1)],1),t._v(" "),s("el-form",{directives:[{name:"show",rawName:"v-show",value:4==t.num,expression:"num == 4"}],ref:"wwwForm",attrs:{model:t.wwwForm,rules:t.wwwRules,"label-width":"150px"}},[s("el-form-item",{attrs:{label:t.LANG["站点名称"]||"站点名称",prop:"name"}},[s("el-input",{model:{value:t.wwwForm.name,callback:function(e){t.$set(t.wwwForm,"name",e)},expression:"wwwForm.name"}})],1),t._v(" "),s("el-form-item",{attrs:{label:t.LANG["站点标题"]||"站点标题",prop:"title"}},[s("el-input",{model:{value:t.wwwForm.title,callback:function(e){t.$set(t.wwwForm,"title",e)},expression:"wwwForm.title"}})],1),t._v(" "),s("el-form-item",{attrs:{label:t.LANG["站点底部信息"]||"站点底部信息",prop:"bottom"}},[s("el-input",{model:{value:t.wwwForm.bottom,callback:function(e){t.$set(t.wwwForm,"bottom",e)},expression:"wwwForm.bottom"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"选择语言",prop:"lang"}},[s("el-select",{model:{value:t.wwwForm.lang,callback:function(e){t.$set(t.wwwForm,"lang",e)},expression:"wwwForm.lang"}},t._l(t.langugaeslist,function(t,e){return s("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),s("el-form-item",{attrs:{label:t.LANG["前台主域名"]||"前台主域名",prop:"domain"}},[s("el-input",{attrs:{type:"textarea",placeholder:"请输入主域名：example.com，实际使用域名将自动添加前缀,如:www.example.com"},on:{change:function(e){return t.changewww("www")}},model:{value:t.wwwForm.domain,callback:function(e){t.$set(t.wwwForm,"domain",e)},expression:"wwwForm.domain"}})],1),t._v(" "),t.wwwList.length>0?s("el-form-item",[s("el-collapse",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.wwwList,function(e,i){return s("el-collapse-item",{key:"key",attrs:{title:e.url,name:parseInt(i)+1}},[s("el-col",{staticClass:"bmBorder",attrs:{span:24}},[s("div",{staticClass:"grid-content tCent"},[s("ul",[s("li",{staticClass:"w20 fl bg-purple"},[t._v(t._s(t.LANG["用途"]||"用途"))]),t._v(" "),s("li",{staticClass:"w40 fl bg-purple"},[t._v(t._s(t.LANG["域名"]||"域名"))]),t._v(" "),s("li",{staticClass:"w40 fl bg-purple"},[t._v(t._s(t.LANG["指向域名"]||"指向域名"))])])])]),t._v(" "),s("el-col",{staticClass:"bmBorder",attrs:{span:24}},[s("div",{staticClass:"grid-content tCent"},[s("ul",[s("li",{staticClass:"w20 fl bg-purple-light"},[t._v(t._s(e.master_wwwlabel))]),t._v(" "),s("li",{staticClass:"w40 fl bg-purple-light"},[t._v(t._s(e.master_wwwUrl))]),t._v(" "),s("li",{staticClass:"w40 fl bg-purple-light"},[t._v(t._s(e.master_wwwlocalhost))])])])]),t._v(" "),s("el-col",{staticClass:"bmBorder",attrs:{span:24}},[s("div",{staticClass:"grid-content tCent"},[s("ul",[s("li",{staticClass:"w20 fl bg-purple-light"},[t._v(t._s(e.wwwlabel))]),t._v(" "),s("li",{staticClass:"w40 fl bg-purple-light"},[t._v(t._s(e.wwwUrl))]),t._v(" "),s("li",{staticClass:"w40 fl bg-purple-light"},[t._v(t._s(e.wwwlocalhost))])])])]),t._v(" "),s("el-col",{staticClass:"bmBorder",attrs:{span:24}},[s("div",{staticClass:"grid-content tCent"},[s("ul",[s("li",{staticClass:"w20 fl bg-purple-light"},[t._v(t._s(e.mlabel))]),t._v(" "),s("li",{staticClass:"w40 fl bg-purple-light"},[t._v(t._s(e.mUrl))]),t._v(" "),s("li",{staticClass:"w40 fl bg-purple-light"},[t._v(t._s(e.h5localhost))])])])]),t._v(" "),s("el-col",{staticClass:"bmBorder",attrs:{span:24}},[s("div",{staticClass:"grid-content tCent"},[s("ul",[s("li",{staticClass:"w20 fl bg-purple-light"},[t._v(t._s(e.agentLabel))]),t._v(" "),s("li",{staticClass:"w40 fl bg-purple-light"},[t._v(t._s(e.agentUrl))]),t._v(" "),s("li",{staticClass:"w40 fl bg-purple-light"},[t._v(t._s(e.agentlocalhost))])])])]),t._v(" "),s("el-col",{staticClass:"bmBorder",attrs:{span:24}},[s("div",{staticClass:"grid-content tCent"},[s("ul",[s("li",{staticClass:"w20 fl bg-purple-light"},[t._v(t._s(e.apilabel))]),t._v(" "),s("li",{staticClass:"w40 fl bg-purple-light"},[t._v(t._s(e.apiUrl))]),t._v(" "),s("li",{staticClass:"w40 fl bg-purple-light"},[t._v(t._s(e.apilocalhost))])])])]),t._v(" "),s("el-col",{staticClass:"bmBorder",attrs:{span:24}},[s("div",{staticClass:"grid-content tCent"},[s("ul",[s("li",{staticClass:"w20 fl bg-purple-light"},[t._v(t._s(e.resLabel))]),t._v(" "),s("li",{staticClass:"w40 fl bg-purple-light"},[t._v(t._s(e.res))]),t._v(" "),s("li",{staticClass:"w40 fl bg-purple-light"},[t._v(t._s(e.reslocalhost))])])])])],1)}),1)],1):t._e(),t._v(" "),s("el-form-item",{attrs:{label:t.LANG["PC模板"]||"PC模板",prop:"www"}},[s("el-button",{on:{click:function(e){return t.getTemplate("pc")}}},[t._v(t._s(t.LANG["模板选择"]||"模板选择"))]),t._v(" "),t.pcSrc?s("img",{staticStyle:{"margin-left":"10px","vertical-align":"top"},attrs:{src:t.pcSrc,alt:"",height:"40px"}}):t._e()],1),t._v(" "),s("el-form-item",{attrs:{label:t.LANG["H5模板"]||"H5模板",prop:"m_tname"}},[s("el-button",{on:{click:function(e){return t.getTemplate("h5")}}},[t._v(t._s(t.LANG["模板选择"]||"模板选择"))]),t._v(" "),t.h5Src?s("img",{staticStyle:{"margin-left":"10px","vertical-align":"top"},attrs:{src:t.h5Src,alt:"",height:"40px"}}):t._e()],1),t._v(" "),s("el-form-item",{attrs:{label:t.LANG["是否SSL加密"]||"是否SSL加密",prop:"is_ssl"}},[s("el-select",{model:{value:t.wwwForm.is_ssl,callback:function(e){t.$set(t.wwwForm,"is_ssl",e)},expression:"wwwForm.is_ssl"}},[s("el-option",{attrs:{label:t.LANG["启用"]||"启用",value:"1"}}),t._v(" "),s("el-option",{attrs:{label:t.LANG["停用"]||"停用",value:"0"}})],1)],1)],1),t._v(" "),s("el-form",{directives:[{name:"show",rawName:"v-show",value:5==t.num,expression:"num == 5"}],ref:"linkForm",attrs:{model:t.linkForm,rules:t.linkRules,"label-width":"150px"}},[s("el-form-item",{attrs:{label:t.LANG["代理网址"]||"代理网址",prop:"domain"}},[s("el-input",{model:{value:t.linkForm.domain,callback:function(e){t.$set(t.linkForm,"domain",e)},expression:"linkForm.domain"}})],1)],1),t._v(" "),6==t.num?s("div",{staticClass:"tCent"},[s("el-button",{on:{click:function(e){return t.openUrl("pc")}}},[t._v(t._s(t.LANG["PC站点"]||"PC站点"))]),t._v(" "),s("el-button",{on:{click:function(e){return t.openUrl("h5")}}},[t._v(t._s(t.LANG["H5站点"]||"H5站点"))]),t._v(" "),s("el-button",{on:{click:function(e){return t.openUrl("agent")}}},[t._v(t._s(t.LANG["代理站点"]||"代理站点"))]),t._v(" "),s("el-button",{staticClass:"mb20",on:{click:function(e){return t.openUrl("admin")}}},[t._v(t._s(t.LANG["厅主后台"]||"厅主后台"))]),t._v(" "),s("p",[t._v("PC站点："),s("a",{attrs:{target:"_black",href:t.pcLink}},[t._v(t._s(t.pcLink))])]),t._v(" "),s("p",[t._v("H5站点："),s("a",{attrs:{target:"_black",href:t.h5Link}},[t._v(t._s(t.h5Link))])]),t._v(" "),s("p",[t._v("代理站点："),s("a",{attrs:{target:"_black",href:t.agentLink}},[t._v(t._s(t.agentLink))])]),t._v(" "),s("p",[t._v("厅主首页："),s("a",{attrs:{target:"_black",href:t.adminLink}},[t._v(t._s(t.adminLink))])])],1):t._e()],1)],1),t._v(" "),s("el-row",[s("el-dialog",{attrs:{title:"发送邮箱地址",visible:t.maildialogVisible},on:{"update:visible":function(e){t.maildialogVisible=e}}},[s("el-form",{ref:"addressform",attrs:{model:t.addressform,rules:t.addressRules,"label-width":"150px"}},[s("el-form-item",{attrs:{label:"邮箱地址","label-width":"150px",prop:"mailAddress"}},[s("el-input",{attrs:{"auto-complete":"off"},model:{value:t.addressform.mailAddress,callback:function(e){t.$set(t.addressform,"mailAddress",e)},expression:"addressform.mailAddress"}})],1)],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.maildialogVisible=!1}}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary",loading:t.loadingThree},on:{click:function(e){return t.doTest()}}},[t._v("确 定")])],1)],1)],1),t._v(" "),s("el-row",{staticClass:"operation",attrs:{type:"flex",justify:"center"}},[s("el-col",{staticClass:"butgroup tCent",attrs:{span:16}},[s("el-button",{directives:[{name:"show",rawName:"v-show",value:t.num>1&&t.num<5,expression:"num > 1 && num < 5"}],attrs:{type:"primary"},on:{click:t.prev}},[t._v("上一步")]),t._v(" "),s("el-button",{directives:[{name:"show",rawName:"v-show",value:2==t.num&&t.showMailNext,expression:"num ==2 && showMailNext"}],attrs:{type:"primary",loading:t.loading},on:{click:t.doNext}},[t._v("下一步")]),t._v(" "),s("el-button",{directives:[{name:"show",rawName:"v-show",value:2!==t.num&&t.num<5,expression:"num !==2 && num < 5"}],attrs:{type:"primary",loading:t.loading},on:{click:t.doNext}},[t._v("下一步")]),t._v(" "),s("el-button",{directives:[{name:"show",rawName:"v-show",value:2===t.num&&!t.showMailNext,expression:"num === 2 && !showMailNext"}],attrs:{type:"primary",loading:t.loadingTwo},on:{click:t.showMailForm}},[t._v("测试邮箱")]),t._v(" "),5===t.num?s("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("开启站点")]):t._e(),t._v(" "),s("el-button",{directives:[{name:"show",rawName:"v-show",value:2===t.num&&!t.showMailNext,expression:"num === 2 && !showMailNext"}],attrs:{type:"primary",loading:t.loadingFour},on:{click:t.doNextmail}},[t._v("跳过邮箱")])],1),t._v(" "),s("el-col",[s("el-dialog",{attrs:{title:"模板列表",visible:t.dialogVisible,size:"large"},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("H5Model",{attrs:{model:t.templist,type:t.tempType},on:{"get-template":t.doGetTemplate}}),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("确 定")])],1)],1)],1)],1)],1)},[],!1,l,"data-v-18bc7d77",null);e.default=r.exports},204:function(t,e,s){"use strict";var i={props:{keys:{type:String,default:""}},data:()=>({imgBaseUrl:sessionStorage.URL_RPI,stsToken:sessionStorage.stsToken,LANG:LANG,loading:!1,imgUrl:"",imgConfig:{file:"",key:""}}),created(){this.init()},methods:{init(){this.loading=!1,this.imgUrl="",this.imgBaseUrl=sessionStorage.URL_RPI,this.stsToken=sessionStorage.stsToken,this.imgConfig.key=this.keys},change(){let t=this,e=t.$("#file").val().split("\\"),s=new FormData(t.$("#formTag")[0]);t.loading=!0,s.append("pictrue",e[e.length-1]),s.append("pf","h5"),this.$.ajax({url:t.imgBaseUrl,type:"post",dataType:"json",cache:!1,headers:{Authorization:t.stsToken},data:s,processData:!1,contentType:!1,success:function(e){e.data&&1e4===e.code?(t.imgUrl=e.data.cache_url,t.$message.success("上传图片成功"),t.loading=!1,e.data.file_name&&(t.imgConfig.file=e.data.file_name)):(t.loading=!1,t.$message.error("资源站密钥失效，上传图片失败，请重新登录。"))},error:function(e){t.$message.error("上传图片失败"),t.loading=!1}})}},watch:{imgConfig:{handler(t,e){t&&t.file&&this.$emit("doUpload",{file:t.file,key:t.key})},immediate:!0,deep:!0}},computed:{}},a=s(24);var l=function(t){s(213)},r=Object(a.a)(i,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-row",{staticClass:"warp"},[s("form",{attrs:{id:"formTag",enctype:"multipart/form-data"}},[s("div",{staticClass:"uploadImgBtn",attrs:{id:"uploadImgBtn"}},[s("input",{staticClass:"uploadImg",attrs:{type:"file",name:"file",id:"file",loading:!0},on:{change:t.change}}),s("i",{staticClass:"el-icon-upload"}),t._v("选择图片\n        ")])]),t._v(" "),t.loading?s("div",{staticClass:"up-loading"},[s("i",{staticClass:"el-icon-loading"}),t._v(" 正在上传图片...")]):t._e(),t._v(" "),t.imgUrl?s("img",{staticClass:"preview",attrs:{src:t.imgUrl,alt:"图片预览"}}):t._e()])},[],!1,l,"data-v-478de2d2",null);e.a=r.exports},213:function(t,e,s){},252:function(t,e,s){"use strict";(function(t){var i=s(546),a=s(264),l=s(204);s(396),s(44),e.a={data(){return{mailhostArr:ARRAYS.mailConfig,LANG:LANG,num:1,isnext:!0,langugaeslist:[],moneylist:[],pcTmpList:[],h5TmpList:[],templist:[],moneyForm:{money:""},moneyRules:{money:[{required:!0,message:LANG["请选择货币"]||"请选择货币",trigger:"change"}]},emailForm:{mailhost:"",mailpass:"",mailaddress:""},emailRules:{mailhost:[{required:!0,message:LANG["请设置SMTP服务器地址"]||"请设置SMTP服务器地址",trigger:"blur"}],mailpass:[{required:!0,message:LANG["请设置密码"]||"请设置密码",trigger:"blur"}],mailaddress:[{required:!0,message:LANG["请设置邮箱地址"]||"请设置邮箱地址",trigger:"blur"},{type:"email",message:LANG["请输入正确的邮箱地址"]||"请输入正确的邮箱地址",trigger:"blur,change"}]},adminList:[],adminForm:{name:"",title:"",bottom:"",domain:"",is_ssl:"",lang:"",logo:""},adminRules:{name:[{required:!0,message:LANG["请设置厅主站点名称"]||"请设置厅主站点名称",trigger:"blur"}],title:[{required:!0,message:LANG["请设置厅主台头名称"]||"请设置厅主台头名称",trigger:"blur"}],domain:[{required:!0,message:LANG["请设置厅主后台域名"]||"请设置厅主后台域名",trigger:"blur"},{validator:this.validatorUrls,trigger:"change"},{validator:this.validatorwwwTwo,trigger:"blur"}],bottom:[{required:!0,message:LANG["请设置厅主底部"]||"请设置厅主底部",trigger:"blur"}],lang:[{required:!0,message:LANG["请设置厅主后台语言"]||"请设置厅主后台语言",trigger:"blur"}],is_ssl:[{required:!0,message:LANG["请设置SSL"]||"请设置SSL",trigger:"change"}]},wwwList:[],wwwForm:{name:"",title:"",bottom:"",domain:"",www_tid:"",www_tname:"",m_tid:"",m_tname:"",lang:"",logo:"",is_ssl:""},wwwRules:{name:[{required:!0,message:LANG["请设置站点名称"]||"请设置站点名称",trigger:"blur"}],title:[{required:!0,message:LANG["请设置站点标题"]||"请设置站点标题",trigger:"blur"}],domain:[{required:!0,message:LANG["请设置PC站点域名"]||"请设置PC站点域名",trigger:"blur"},{validator:this.validatorUrls,trigger:"change"}],bottom:[{required:!0,message:LANG["请设置厅主底部"]||"请设置厅主底部",trigger:"blur"}],m_tname:[{required:!0,message:LANG["请设置H5站点模板"]||"请设置H5站点模板",trigger:"blur"}],www_tname:[{required:!0,message:LANG["请设置PC站点模板"]||"请设置PC站点模板",trigger:"blur"}],lang:[{required:!0,message:LANG["请设置站点语言"]||"请设置站点语言",trigger:"blur"}],is_ssl:[{required:!0,message:LANG["请设置站点语言"]||"请设置站点语言",trigger:"blur"}]},loading:!1,loadingTwo:!1,loadingThree:!1,loadingFour:!1,showMailNext:!1,maildialogVisible:!1,addressform:{mailAddress:""},addressRules:{mailAddress:[{required:!0,message:LANG["请输入发送的邮箱地址"]||"请输入发送的邮箱地址",trigger:"blur"}]},url:URL.img,linkForm:{domain:""},linkRules:{domain:[{required:!0,message:LANG["请输入推广链接"]||"请输入推广链接",trigger:"blur"},{validator:this.validatorUrlFull,trigger:"blur"}]},tempType:"",dialogVisible:!1,pcSrc:"",h5Src:"",pcLink:"",h5Link:"",agentLink:"",adminLink:"",activeName:""}},components:{step:i.a,upload:l.a,H5Model:a.a},computed:{},watch:{},methods:{init(){let e=this;if(this.showMailNext=!1,"undefined"!=typeof settings&&settings.init||this.$router.push({path:"/index"}),!sessionStorage.token||!sessionStorage.userName)return this.$message(LANG["登录超时，请重新登录！"]||"登录超时，请重新登录！"),void this.$router.replace("/login");t.URLCONFIG={emulateJson:!0,headers:{"Content-Type":"application/json",Authorization:sessionStorage.token},validateStatus:function(t){return t}},this.$.autoAjax("get",URL.api+ROUTES.GET.langeages,"",{ok:t=>{if(0==t.state&&t.data){let s=t.data||[];for(let t in s)e.langugaeslist.push({label:s[t].name,value:s[t].code})}},p:()=>{},error:t=>{console.log(t)}}),this.$.autoAjax("get",URL.api+ROUTES.GET.system.currency,"",{ok:t=>{if(0==t.state&&t.data){let s=t.data||[];e.moneyForm.money=t.data[0].id.toString()||"";for(let t in s)e.moneylist.push({label:s[t].ctype,value:s[t].id,cytype:s[t].cytype})}},p:()=>{},error:t=>{console.log(t)}});let s=URL.api+"/system/website/style";this.$.autoAjax("get",s,"",{ok:t=>{let s=t.data.h5,i=t.data.pc;e.pcTmpList.splice(0,e.pcTmpList.length),e.h5TmpList.splice(0,e.h5TmpList.length);for(let t in s)e.h5TmpList.push({id:s[t].id,key:s[t].key,checked:s[t].checked});for(let t in i)e.pcTmpList.push({id:i[t].id,key:i[t].key,checked:i[t].checked})},p:()=>{},error:t=>{console.log(t)}})},doNext(){switch(this.num){case 1:this.saveMoney();break;case 2:this.saveEmail();break;case 3:this.saveAdmin();break;case 4:this.saveWWW()}},doNextmail(){this.num++},showMailForm(){this.$refs.emailForm.validate(t=>{t&&(this.maildialogVisible=!0)})},resetForm(t){this.$refs[t].resetFields()},doTest(){let t=this;this.$refs.addressform.validate(e=>{if(e){t.loadingThree=!0;let e=null;for(let t=0;t<ARRAYS.mailConfig.length;t++)ARRAYS.mailConfig[t].value===this.emailForm.mailhost&&(e={mailhost:ARRAYS.mailConfig[t].value,mailport:ARRAYS.mailConfig[t].port,mailname:this.emailForm.mailaddress.split("@")[0],mailpass:this.emailForm.mailpass,mailaddress:this.emailForm.mailaddress,is_ssl:ARRAYS.mailConfig[t].is_ssl});e.receivers=[{receive:t.addressform.mailAddress,alias:"test"}],this.$.autoAjax("post",URL.api+ROUTES.POST.system.email.test,e,{ok:e=>{0===e.state&&e.data?(t.$message.success(LANG["邮箱测试成功，请点击下一步继续设置！"]||"邮箱测试成功，请点击下一步继续设置！"),t.loadingThree=!1,t.maildialogVisible=!1,t.showMailNext=!0):2===e.state&&(t.$message.error(LANG["邮箱配置错误，请修改后重试！"]||"邮箱配置错误，请修改后重试！"),t.maildialogVisible=!1,t.loadingThree=!1)},p:()=>{},error:t=>{console.log(t)}}).catch(e=>{t.loadingThree=!1})}})},saveMoney(){let t=this,e=this.moneyForm.money;this.$refs.moneyForm.validate(s=>{s&&(t.loading=!0,this.$.autoAjax("patch",URL.api+ROUTES.PATCH.system.currency+"/"+parseInt(e),{state:1},{ok:e=>{0===e.state&&e.data?(t.$message.success(LANG["货币配置成功，请继续设置下面内容！"]||"货币配置成功，请继续设置下面内容！"),t.num<5&&++t.num,t.loading=!1,t.resetForm("addressform")):(t.$message.error(LANG["货币配置失败，请稍后重试！"]||"货币配置失败，请稍后重试！"),t.loading=!1)},p:()=>{},error:t=>{console.log(t)}}).catch(t=>{}))})},saveEmail(){let t=this;t.loading=!0,this.$.autoAjax("put",URL.api+ROUTES.PUT.system.email.settings,t.emailForm,{ok:e=>{0===e.state&&e.data?(t.$message.success(LANG["邮箱配置成功，请继续设置下面内容！"]||"邮箱配置成功，请继续设置下面内容！"),t.num<5&&++t.num,t.loading=!1):(t.$message.error(LANG["邮箱配置失败，请稍后重试！"]||"邮箱配置失败，请稍后重试！"),t.loading=!1)},p:()=>{},error:t=>{console.log(t)}}).catch(t=>{})},saveAdmin(){let t=this;this.$refs.adminForm.validate(e=>{if(e){t.loading=!0;let e={type:1,build:1,remarks:""};for(let s in t.adminForm)e[s]="domain"===s?t.adminForm[s].split(/[\n]/g):t.adminForm[s];e.remarks="",this.$.autoAjax("put",URL.api+ROUTES.PUT.system.domain,e,{ok:e=>{0===e.state&&e.data?(t.$message.success(LANG["厅主站点配置成功，请继续设置下面内容！"]||"厅主站点配置成功，请继续设置下面内容！"),t.num<5&&++t.num,t.loading=!1):4005===e.state?(t.$message.error(LANG["厅主站点验证失败，请修改后重试！"]||"厅主站点验证失败，请修改后重试！"),t.showUrlError(e.data),t.loading=!1):t.$message.error(LANG["厅主站点配置失败，请稍后重试！"]||"厅主站点配置失败，请稍后重试！")},p:()=>{},error:t=>{console.log(t)}}).catch(e=>{t.loading=!1})}else t.$message.error(LANG["验证未通过，请查看！"]||"验证未通过，请查看！")})},saveWWW(){let t=this;this.$refs.wwwForm.validate(e=>{if(e){t.loading=!0;let e={type:2,build:1,remarks:""};for(let s in t.wwwForm)e[s]="domain"===s?t.wwwForm[s].split(/[\n]/g):t.wwwForm[s];for(let s in t.pcTmpList)t.pcTmpList[s].label===e.www_tname&&(e.www_tid=t.pcTmpList[s].value);for(let s in t.h5TmpList)t.h5TmpList[s].label===e.m_tname&&(e.m_tid=t.h5TmpList[s].value);this.$.autoAjax("put",URL.api+ROUTES.PUT.system.domain,e,{ok:e=>{0===e.state&&e.data?(t.$message.success(LANG["站点配置成功，请继续设置下面内容！"]||"站点配置成功，请继续设置下面内容！"),t.num<5&&++t.num,t.loading=!1,this.getLink()):4005===e.state?(t.$message.error(LANG["厅主站点验证失败，请修改后重试！"]||"厅主站点验证失败，请修改后重试！"),t.showUrlError(e.data),t.loading=!1):(t.$message.error(LANG["站点配置失败，请稍后重试！"]||"站点配置失败，请稍后重试！"),t.loading=!1)},p:()=>{},error:t=>{console.log(t)}}).catch(e=>{t.loading=!1})}else t.$message.error(LANG["验证未通过，请查看！"]||"验证未通过，请查看！")})},prev(){this.num>1&&--this.num},save(){let t=this;this.$refs.linkForm.validate(e=>{if(e){t.loading=!0;let e={};e.domain=t.linkForm.domain,e.comment="备注",this.$.autoAjax("put",URL.api+ROUTES.PUT.commission.link,e,{ok:e=>{0===e.state&&e.data?(t.$message.success(LANG["推广链接配置成功，点击开启站点完成配置！"]||"推广链接配置成功，点击开启站点完成配置！"),t.loading=!1,t.clearUrl()):(t.$message.error(LANG["站点配置失败，请稍后重试！"]||"站点配置失败，请稍后重试！"),t.loading=!1)},p:()=>{},error:t=>{console.log(t)}}).catch(e=>{t.loading=!1})}})},clearUrl(){let t=this;this.$.autoAjax("post",URL.api+"/system/domain.clean",{},{ok:e=>{0===e.state&&e.data?(t.num<6&&++t.num,t.$message.success(LANG["域名清除成功，请按配置的文件访问！"]||"域名清除成功，请按配置的文件访问！")):(t.num<6&&++t.num,t.clearUrl())},p:()=>{},error:t=>{console.log(t)}})},validatorUrl(t,e,s){/^[\w\-]+(\.[\w\-]+)+$/.test(e)?s():s(new Error(LANG["请输入合法的域名，不带HTTP"]||"请输入合法的域名，不带HTTP"))},validatorUrlFull(t,e,s){/^http(s)?:\/\/[\w\-]+(\.[\w\-]+)+$/.test(e)?s():s(new Error(LANG["请输入合法的域名，需要带HTTP"]||"请输入合法的域名，需要带HTTP"))},validatorwwwTwo(t,e,s){e.split(/[\n]/g).length>2?s(new Error(LANG["域名最多只能两个"]||"域名最多只能两个")):s()},doSaveFile(t){let e="";return t.url.forEach(t=>{e+=t}),e},goIndex(){this.$router.push({path:"/index"})},changewww(t){let e="admin"===t?this.adminForm.domain:this.wwwForm.domain;if(this.adminList.splice(0,this.adminList.length),this.wwwList.splice(0,this.wwwList.length),"admin"===t){let t=this.adminList;if(e){let s=e.split(/[\n]/g);for(let e=0;e<s.length;e++)s[e]&&t.push({url:s[e],adminlabel:"厅主后台",adminUrl:"admin."+s[e],cpilabel:"API",cpiUrl:"cpi."+s[e],rpiLabel:"资源",rpi:"rpi."+s[e],adminlocalhost:this.filterUrl(window.location.host,"admin"),cpilocalhost:this.filterUrl(window.location.host,"cpi"),rpilocalhost:this.filterUrl(window.location.host,"rpi")})}}else{let t=this.wwwList;if(e){let s=e.split(/[\n]/g);for(let e=0;e<s.length;e++)s[e]&&t.push({url:s[e],master_wwwlabel:"主域",master_wwwUrl:s[e],master_wwwlocalhost:this.filterUrl(window.location.host,"www"),wwwlabel:"PC站",wwwUrl:"www."+s[e],mlabel:"H5站",mUrl:"m."+s[e],agentLabel:"代理站",agentUrl:"agent."+s[e],apilabel:"API",apiUrl:"api."+s[e],resLabel:"资源",res:"res."+s[e],wwwlocalhost:this.filterUrl(window.location.host,"www"),h5localhost:this.filterUrl(window.location.host,"m"),apilocalhost:this.filterUrl(window.location.host,"api"),reslocalhost:this.filterUrl(window.location.host,"res"),agentlocalhost:this.filterUrl(window.location.host,"agent")})}}},getTemplate(t){if(this.tempType=t,this.templist.splice(0,this.templist.length),"h5"===t)for(let t in this.h5TmpList)this.$set(this.templist,t,this.h5TmpList[t]);else for(let t in this.pcTmpList)this.$set(this.templist,t,this.pcTmpList[t]);this.dialogVisible=!0},doGetTemplate(t){"pc"===t.type?(this.wwwForm.www_tid=t.data.id,this.wwwForm.www_tname=t.data.key,this.pcSrc="/static/img/pc_new/"+t.data.key+".jpg"):(this.wwwForm.m_tid=t.data.id,this.wwwForm.m_tname=t.data.key,this.h5Src="/static/img/mobile_new/"+t.data.key+".jpg")},getLink(){let t="1"===this.wwwForm.is_ssl?"https://":"http://",e=this.wwwForm.domain.split(/[\n]/g),s=this.adminForm.domain.split(/[\n]/g);this.pcLink=t+"www."+e[0],this.h5Link=t+"m."+e[0],this.agentLink=t+"agent."+e[0],this.adminLink=t+"admin."+s[0]},filterUrl(t,e){if(t){return/admin/.test(t)?t.replace(/admin/,e):e+"."+t}return""},openUrl(t){switch(t){case"pc":window.open(this.pcLink);break;case"h5":window.open(this.h5Link);break;case"agent":window.open(this.agentLink);break;case"admin":window.open(this.adminLink)}},validatorUrls(t,e,s){if(e){let t=0;e.split(/[\n]/g).forEach(e=>{/\w+(.([a-zA-Z]{2,}))+$/.test(e)||(t++,s(new Error(e+(LANG["域名不合法，请修改后重试"]||"域名不合法,请修改后重试"))))}),0===t?s():s(new Error(LANG["域名不合法，请修改后重试"]||"域名不合法,请修改后重试"))}else s()},showUrlError(t){let e="";if(0!==t.length){for(let s in t)e=e+t[s]+"\r\n";this.$notify.error({title:"域名验证失败列表",message:e,duration:0})}}},mounted(){},created(){this.init()}}}).call(this,s(5))},253:function(t,e,s){},264:function(t,e,s){"use strict";var i={name:"ElButton",props:{type:{type:String,default:"default"},size:String,icon:{type:String,default:""},nativeType:{type:String,default:"button"},loading:Boolean,disabled:Boolean,plain:Boolean,autofocus:Boolean},methods:{handleClick(t){this.$emit("click",t)},handleInnerClick(t){this.disabled&&t.stopPropagation()}}},a=s(24),l=Object(a.a)(i,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"el-button",class:[t.type?"el-button--"+t.type:"",t.size?"el-button--"+t.size:"",{"is-disabled":t.disabled,"is-loading":t.loading,"is-plain":t.plain}],attrs:{disabled:t.disabled,autofocus:t.autofocus,type:t.nativeType},on:{click:t.handleClick}},[t.loading?s("i",{staticClass:"el-icon-loading",on:{click:t.handleInnerClick}}):t._e(),t._v(" "),t.icon&&!t.loading?s("i",{class:"el-icon-"+t.icon,on:{click:t.handleInnerClick}}):t._e(),t._v(" "),t.$slots.default?s("span",{on:{click:t.handleInnerClick}},[t._t("default")],2):t._e()])},[],!1,null,null,null).exports,r={data:()=>({imgNumber:13,imgUrlArr:[],imgUrl:"/static/img/mobile_new/",show:!0,bigImage:!1,showIndexImage:0}),props:{showKey:{type:String,default:""},model:Array,type:{type:String,default:"h5"},showWindow:{type:Boolean,default:!1}},components:{ElButton:l},methods:{init(){this.imgUrlArr.splice(0,this.imgUrlArr.length);let t=this.imgUrlArr;if(this.imgUrl="h5"===this.type?"/static/img/mobile_new/":"/static/img/pc_new/",this.show=!0,this.model.length>0){let e=this.showKey?this.showKey:this.model[0].key;this.model.forEach(s=>{let i="0";s.key===e&&(i="1"),t.push({id:s.id,key:s.key,checked:i})})}this.$emit("get-template",{data:this.imgUrlArr[0],type:this.type})},preview(t){this.show=!1,this.showIndexImage=t},back(){this.show=!0},open(t){for(let t in this.imgUrlArr)this.imgUrlArr[t].checked="0";this.imgUrlArr[t].checked="1",this.$emit("get-template",{data:this.imgUrlArr[t],type:this.type})}},created(){this.init()},watch:{showKey:function(t){t&&this.init()},type:function(t){t&&this.init()},showWindow:function(t){t&&(this.show=!0)}}};var o=function(t){s(253)},n=Object(a.a)(r,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"mobile"}},[t.show?s("el-row",{attrs:{gutter:20}},[s("el-col",{staticClass:"contCard",attrs:{span:24}},t._l(t.imgUrlArr,function(e,i){return s("div",{staticClass:"imgBox ml20 mb"},[s("el-card",{staticClass:"mt20 cardBox",class:{active:"1"===e.checked},attrs:{"body-style":{padding:"0"}}},[s("img",{attrs:{src:t.imgUrl+e.key+"_s.jpg",alt:"图片飞走了",width:"100%",height:"auto"},on:{click:function(e){return t.preview(i)}}}),t._v(" "),"1"!==e.checked?s("el-row",{staticClass:"mb20 mt20"},[s("el-col",{attrs:{span:5,offset:6}},[s("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.preview(i)}}},[t._v("预览")])],1),t._v(" "),s("el-col",{attrs:{span:5,offset:3}},[s("el-button",{attrs:{type:"primary",plain:!0},on:{click:function(e){return t.open(i)}}},[t._v("使用")])],1)],1):s("el-row",{staticClass:"mb20 mt20 tCent"},[s("el-col",{attrs:{span:24}},[s("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.preview(i)}}},[t._v("预览")])],1),t._v(" "),s("div",{staticClass:"cardCheck"},[t._v("使用中")])],1)],1)],1)}),0)],1):s("div",{staticClass:"wrapper"},[s("div",{staticClass:"imgwrapper tCent"},[s("a",{staticStyle:{display:"block",width:"auto",heigth:"auto"},attrs:{href:"javascript:;",title:"点击返回模块列表"},on:{click:t.back}},["h5"===this.type?s("img",{staticClass:"img",attrs:{src:t.imgUrl+t.imgUrlArr[t.showIndexImage].key+".jpg",alt:"图片飞走了",width:"auto",height:"auto"}}):s("img",{staticClass:"img",attrs:{src:t.imgUrl+t.imgUrlArr[t.showIndexImage].key+".jpg",alt:"图片飞走了",width:"100%",height:"auto"}})])])])],1)},[],!1,o,null,null);e.a=n.exports},394:function(t,e,s){},395:function(t,e,s){},396:function(t,e,s){},546:function(t,e,s){"use strict";var i={data:()=>({}),props:{active:{type:Number,default:0}}},a=s(24);var l=function(t){s(395)},r=Object(a.a)(i,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:""}},[e("el-steps",{attrs:{space:100,active:this.active,"finish-status":"success"}},[e("el-step",{attrs:{title:"货币"}}),this._v(" "),e("el-step",{attrs:{title:"邮件服务器"}}),this._v(" "),e("el-step",{attrs:{title:"后台站点"}}),this._v(" "),e("el-step",{attrs:{title:"前台站点"}}),this._v(" "),e("el-step",{attrs:{title:"推广链接"}}),this._v(" "),e("el-step",{attrs:{title:"配置成功"}})],1)],1)},[],!1,l,"data-v-4a6945e6",null);e.a=r.exports}}]);