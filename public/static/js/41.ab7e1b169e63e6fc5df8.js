(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{129:function(t,e,i){"use strict";i.r(e);var a=i(202),s=i(203),o=i(206),l={data:()=>({formLabelWidth:"100px",detailform:{},dialogTableVisible:!1,LANG:LANG,columnsUrl:"",tableUrl:"",baseUrl:"",formConfig:[{prop:"name",value:"",type:"text",label:"轮播广告名称",rules:[{require:!0}]},{prop:"pf",value:"",label:"使用平台",type:"select",list:ARRAYS.PLATFORMS,relation:!0,relationKey:2,linkArr:{0:ARRAYS.position,1:[ARRAYS.position[0]]},rules:[{require:!0}]},{prop:"position",value:"",label:"使用于",type:"select",list:ARRAYS.position,rules:[{require:!0}]},{prop:"link",value:"",type:"url",label:"跳转链接"},{prop:"language_id",value:"",label:"语言",type:"select",list:[],propVal:"language_name",rules:[{require:!0}]},{prop:"sort",value:"",label:"排序",type:"number",rules:[{min:0}],rules:[{require:!0},{integer:!0}]},{prop:"images",value:[],type:"upload",fileNum:1,label:"轮播图片",action:URL.img,folder:"adlist",rules:[{require:!1}]}],size:"small",labelWidth:"110px",type:"default",formTitel:"",formType:"",editVisible:{state:!1},isEdit:{state:!1},dialogEdit:!1,editFrom:{name:"",use_for:"",images:"",language:"",status:""},use_forList:[],langList:[],statusList:ARRAYS.state2,nowId:-1,pf:"pc",nowPlatform:"pc",platformList:ARRAYS.PLATFORMS,updated:!1,confirmConfig:{state:!1,msg:"",fn:"",obj:null},loading:!1}),components:{ElCol:i(231).a,tablegrid:a.a,formEdit:s.a,confirm:o.a},methods:{init(){let t=this;this.columnsUrl="/static/json/ADManage/ADList/columns.json",this.tableUrl=URL.api+ROUTES.GET.copywriter.carousel+"?pf="+this.pf,this.baseUrl=URL.api+ROUTES.GET.copywriter.carousel;let e=URL.api+ROUTES.GET.langeages;this.$.autoAjax("get",e,"",{ok:e=>{let i=e.data;for(let e in i)t.langList.push({label:i[e].name,value:i[e].id.toString()}),t.formConfig[4].list.push({label:i[e].name,value:i[e].id.toString()})},p:()=>{},error:t=>{console.log(t)}})},doHandle(t){switch(this.formType="",this.updated=!1,this.nowId=parseInt(t.row.id)||-1,t.fn){case"doCompile":this.doCompile(t.row);break;case"doApply":this.doApply(t.row);break;case"doPass":this.doPass(t.row);break;case"doStart":this.doStart(t.row);break;case"doStop":this.doStop(t.row);break;case"doDel":this.doDel(t.row);break;case"doDetails":this.doDetails(t.row)}},doDetails(t){this.dialogTableVisible=!0;let e=this.detailform;({name:e.name,pf:e.pf,link:e.link,language_name:e.language_name,sort:e.sort,position:e.position}=t);let i=ARRAYS.position;e.link||(e.link="无");for(let t in i)i[t].value===e.position&&(e.position=i[t].label);this.detailform.picture=URL.img+t.picture},doAdd(){this.updated=!1,this.formType="add",this.formTitel="新增轮播广告",this.isEdit.state=!1,this.editVisible.state=!0},doApply(t){parseInt(t.id)&&(this.confirmConfig.state=!0,this.confirmConfig.msg=(this.LANG["确定申请"]||"确定申请")+'"'+t.name+'"'+(this.LANG["吗？"]||"吗？"),this.confirmConfig.fn="apply",this.confirmConfig.obj=t)},doStart(t){parseInt(t.id)&&(this.confirmConfig.state=!0,this.confirmConfig.msg=(this.LANG["确定启用"]||"确定启用")+'"'+t.name+'"'+(this.LANG["吗？"]||"吗？"),this.confirmConfig.fn="start",this.confirmConfig.obj=t)},doStop(t){parseInt(t.id)&&(this.confirmConfig.state=!0,this.confirmConfig.msg=(this.LANG["确定停用"]||"确定停用")+'"'+t.name+'"'+(this.LANG["吗？"]||"吗？"),this.confirmConfig.fn="stop",this.confirmConfig.obj=t)},doCompile(){this.loading=!0;let t=this;t.isEdit.state=!1;let e=URL.api+ROUTES.GET.copywriter.carousel;this.$.autoAjax("get",e,parseInt(this.nowId),{ok:e=>{if(0==e.state&&e.data){t.isEdit.state=!0,t.formType="edit",t.formTitel="修改轮播广告",FORMVAL(e.data,t.formConfig);let i=e.data.picture||"";t.formConfig[6].value.push(i),t.editVisible.state=!0}else t.$message.error(LANG["修改轮播广失败，请稍后重试！"]);t.loading=!1},p:()=>{},error:t=>{console.log(t)}})},doDel(t){parseInt(t.id)&&(this.confirmConfig.state=!0,this.confirmConfig.msg=(this.LANG["确定删除"]||"确定删除")+'"'+t.name+'"'+(this.LANG["吗？"]||"吗？"),this.confirmConfig.fn="delete")},doConfirm(t){this.loading=!0;let e=this;switch(t.fn){case"delete":this.$.autoAjax("delete",URL.api+ROUTES.PUT.copywriter.carousel+"/"+parseInt(this.nowId)+"?pf="+this.pf,"",{ok:t=>{0==t.state&&t.data?(e.formType="delete",e.$message.success(LANG["恭喜您，删除成功！"]||"恭喜您，删除成功！"),e.updated=!0):this.$message.error(LANG["删除失败，请稍后重试！"]||"删除失败，请稍后重试！"),e.loading=!1},p:()=>{},error:t=>{e.loading=!1,console.log(t)}});break;case"stop":let i={status:"disabled",pf:this.pf,language_id:parseInt(t.obj.language_id),position:t.obj.position,approve:t.obj.approve};this.$.autoAjax("patch",URL.api+ROUTES.PUT.copywriter.carousel+"/"+parseInt(this.nowId),i,{ok:t=>{0==t.state&&t.data?(e.$message.success(LANG["恭喜您，停用成功！"]||"恭喜您，停用成功！"),e.updated=!0):e.$message.error(LANG["停用失败，请稍后重试！"]),e.loading=!1},p:()=>{},error:t=>{console.log(t)}});break;case"start":let a={status:"enabled",pf:this.pf,language_id:parseInt(t.obj.language_id),position:t.obj.position,approve:t.obj.approve};this.$.autoAjax("patch",URL.api+ROUTES.PUT.copywriter.carousel+"/"+parseInt(this.nowId),a,{ok:t=>{0==t.state&&t.data?(e.$message.success(LANG["恭喜您，启用成功！"]||"恭喜您，启用成功！"),e.updated=!0):e.$message.error(LANG["启用失败，请稍后重试！"]),e.loading=!1},p:()=>{},error:t=>{console.log(t)}});break;case"apply":let s={approve:"pass",pf:this.pf,language_id:parseInt(t.obj.language_id),position:t.obj.position};this.$.autoAjax("patch",URL.api+ROUTES.PUT.copywriter.carousel+"/"+parseInt(this.nowId),s,{ok:t=>{0==t.state&&t.data?(e.$message.success(LANG["恭喜您，申请成功！"]||"恭喜您，申请成功！"),e.updated=!0):e.$message.error(LANG["申请失败，请稍后重试！"]),e.loading=!1},p:()=>{},error:t=>{console.log(t)}})}},changePlatform(t){if(t!=this.nowPlatform)switch(this.nowPlatform=t,t){case"h5":this.tableUrl=this.baseUrl+"?pf=h5";break;case"pc":this.tableUrl=this.baseUrl+"?pf=pc"}},getForm(t){let e=this,i=URL.api+ROUTES.PUT.copywriter.carousel;"edit"==this.formType?i=URL.api+ROUTES.PUT.copywriter.carousel+"/"+this.nowId:t.formObj.status="disabled",""===t.formObj.link&&delete t.formObj.link,t.formObj.picture=t.formObj.images.toString(),delete t.formObj.images,console.log(t.formObj),this.$.autoAjax("put",i,t.formObj,{ok:t=>{if(2===t.state)e.$message.error(LANG["轮播图片不能为空"]||"轮播图片不能为空");else if(0==t.state&&t.data){let t="";t="add"==e.formType?LANG["恭喜您，新增轮播广告成功！"]||"恭喜您，新增轮播广告成功！":LANG["恭喜您，修改轮播广告成功！"]||"恭喜您，修改轮播广告成功！",e.updated=!0,e.$message.success(t)}else{let t="";t="add"==e.formType?LANG["新增轮播广告失败！"]||"新增轮播广告失败！":LANG["修改轮播广告失败！"]||"修改轮播广告失败！",e.$message.error(t)}},p:()=>{},error:t=>{console.log(t)}})}},computed:{},mounted(){},created:function(){this.init()}},r=i(10);var n=function(t){i(416)},p=Object(r.a)(l,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"templateManage",staticStyle:{width:"100%"},attrs:{id:"results"}},[i("el-row",[i("el-col",{staticClass:"pb ",staticStyle:{"text-align":"right"},attrs:{span:24}},[i("el-col",{staticStyle:{"text-align":"left"},attrs:{span:12}},[i("span",[t._v(t._s(t.LANG["使用平台"]||"使用平台"))]),t._v(" "),i("el-select",{staticStyle:{width:"200px"},attrs:{size:"small",placeholder:"请选择"},on:{change:t.changePlatform},model:{value:t.pf,callback:function(e){t.pf=e},expression:"pf"}},t._l(t.platformList,function(t){return i("el-option",{key:t.id,staticStyle:{width:"200px"},attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),i("el-col",{attrs:{span:12}},[i("el-button",{attrs:{type:"primary",size:"small"},domProps:{textContent:t._s(t.LANG["新增轮播广告"]||"新增轮播广告")},on:{click:t.doAdd}})],1)],1),t._v(" "),i("el-col",{attrs:{span:24}},[i("div",[i("tablegrid",{attrs:{columnsUrl:t.columnsUrl,tableUrl:t.tableUrl,tableCheck:!1,showRefresh:!0,pageSet:!0,updated:t.updated,tableIndex:!1},on:{"do-handle":t.doHandle}})],1)])],1),t._v(" "),i("el-col",{attrs:{span:24}},[i("formEdit",{attrs:{formTitel:t.formTitel,formVisible:t.editVisible,formConfig:t.formConfig,type:t.type,size:t.size,labelWidth:t.labelWidth,isEdit:t.isEdit,formType:t.formType},on:{"get-form":t.getForm}})],1),t._v(" "),i("el-col",[i("confirm",{attrs:{confirmConfig:t.confirmConfig},on:{"do-confirm":t.doConfirm}})],1),t._v(" "),i("el-col",[i("el-dialog",{staticClass:"detail",attrs:{title:t.LANG["轮播广告详情"]||"轮播广告详情",size:"tiny"},model:{value:t.dialogTableVisible,callback:function(e){t.dialogTableVisible=e},expression:"dialogTableVisible"}},[i("el-form",{attrs:{model:t.detailform}},[i("el-form-item",{attrs:{label:t.LANG["轮播广告名称:"]||"轮播广告名称:","label-width":t.formLabelWidth}},[i("span",[t._v(t._s(t.detailform.name))])]),t._v(" "),i("el-form-item",{attrs:{label:t.LANG["使用平台:"]||"使用平台:","label-width":t.formLabelWidth}},[i("p",{staticStyle:{width:"90%"}},[t._v(t._s(t.detailform.pf))])]),t._v(" "),i("el-form-item",{attrs:{label:t.LANG["使用于:"]||"使用于:","label-width":t.formLabelWidth}},[i("span",[t._v(t._s(t.detailform.position))])]),t._v(" "),i("el-form-item",{attrs:{label:t.LANG["跳转链接:"]||"跳转链接:","label-width":t.formLabelWidth}},[i("span",[t._v(t._s(t.detailform.link))])]),t._v(" "),i("el-form-item",{attrs:{label:t.LANG["语言:"]||"语言:","label-width":t.formLabelWidth}},[i("span",[t._v(t._s(t.detailform.language_name))])]),t._v(" "),i("el-form-item",{attrs:{label:t.LANG["排序:"]||"排序:","label-width":t.formLabelWidth}},[i("span",[t._v(t._s(t.detailform.sort))])]),t._v(" "),i("el-form-item",{attrs:{label:t.LANG["轮播图片:"]||"轮播图片:","label-width":t.formLabelWidth}},[i("img",{staticStyle:{"margin-right":"10px",width:"90%"},attrs:{src:t.detailform.picture}})])],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogTableVisible=!1}}},[t._v("关 闭")])],1)],1)],1)],1)},[],!1,n,null,null);e.default=p.exports},231:function(t,e,i){"use strict";e.a={name:"ElCol",props:{span:{type:Number,default:24},tag:{type:String,default:"div"},offset:Number,pull:Number,push:Number,xs:[Number,Object],sm:[Number,Object],md:[Number,Object],lg:[Number,Object]},computed:{gutter(){let t=this.$parent;for(;t&&"ElRow"!==t.$options.componentName;)t=t.$parent;return t?t.gutter:0}},render(t){let e=[],i={};return this.gutter&&(i.paddingLeft=this.gutter/2+"px",i.paddingRight=i.paddingLeft),["span","offset","pull","push"].forEach(t=>{this[t]&&e.push("span"!==t?`el-col-${t}-${this[t]}`:`el-col-${this[t]}`)}),["xs","sm","md","lg"].forEach(t=>{if("number"==typeof this[t])e.push(`el-col-${t}-${this[t]}`);else if("object"==typeof this[t]){let i=this[t];Object.keys(i).forEach(a=>{e.push("span"!==a?`el-col-${t}-${a}-${i[a]}`:`el-col-${t}-${i[a]}`)})}}),t(this.tag,{class:["el-col",e],style:i},this.$slots.default)}}},416:function(t,e,i){}}]);