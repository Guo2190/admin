(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{163:function(s,a,e){"use strict";e.r(a);var t={data:()=>({baseUrl:"",load:!1,labelWidth:"90px",formVisible:{state:!1},formConfig:[{prop:"mailsys",value:"",label:"SMTP服务器",type:"select",list:ARRAYS.mailConfig,rules:[{require:!0}]},{prop:"mailaddress",value:"",type:"text",label:"邮箱地址",rules:[{require:!0}]},{prop:"mailpass",value:"",type:"password",label:"邮箱密码",rules:[{require:!0}]}],updateKeys:""}),components:{formEdit:e(203).a},computed:{},watch:{},methods:{init(){this.baseUrl=URL.api+ROUTES.GET.system.emailSettings;let s=this;this.$.autoAjax("get",this.baseUrl,"",{ok:a=>{if(0==a.state&&a.data){let e=a.data||[];e.is_ssl="1"===e.is_ssl;let t=e.mailaddress.split("@"),i="";if(t[1])switch(t[1]){case"gmail.com":i="mailsys,smtp.gmail.com";break;case"qq.com":i="mailsys,smtp.qq.com";break;case"yahoo.com":i="mailsys,smtp.mail.yahoo.com";break;case"163.com":i="mailsys,smtp.163.com"}s.updateKeys=i+",mailaddress,"+e.mailaddress+",mailpass,"+e.mailpass}},p:()=>{},error:s=>{console.log(s)}})},saveData(s){this.load=!0;let a=null;for(let e=0;e<ARRAYS.mailConfig.length;e++)ARRAYS.mailConfig[e].value===s.formObj.mailsys&&(a={mailhost:ARRAYS.mailConfig[e].value,mailport:ARRAYS.mailConfig[e].port,mailname:s.formObj.mailaddress.split("@")[0],mailpass:s.formObj.mailpass,mailaddress:s.formObj.mailaddress,is_ssl:ARRAYS.mailConfig[e].is_ssl});let e=this;this.$.autoAjax("put",URL.api+ROUTES.PUT.system.emailSettings,a,{ok:s=>{0==s.state&&s.data?(e.$message.success(LANG["保存成功"]||"保存成功"),e.init(),e.load=!1):e.$message.error(LANG["保存失败"]||"保存失败")},p:()=>{},error:s=>{console.log(s)}})},cancel(){this.init()}},mounted(){},created(){this.init()}},i=e(10);var l=function(s){e(542)},o=Object(i.a)(t,function(){var s=this.$createElement,a=this._self._c||s;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:this.load,expression:"load"}],attrs:{id:"emailSettings"}},[a("el-col",{attrs:{span:12,offset:9}},[a("div",{staticClass:"border_style"},[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:24}},[a("formEdit",{attrs:{formTitel:"",formVisible:this.formVisible,formConfig:this.formConfig,type:"pageForm",labelWidth:"120px",isEdit:{},updateKeys:this.updateKeys},on:{"get-form":this.saveData,"cancel-form":this.cancel}})],1)],1)],1)])],1)},[],!1,l,null,null);a.default=o.exports},542:function(s,a,e){}}]);