(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{105:function(t,e,a){"use strict";a.r(e);var s=a(24),i={data:()=>({LANG:LANG,dialogVisible:!1,costStatistics:[{label:"线路费用合计",val:null},{label:"游戏抽成费用合计",val:null},{label:"总应缴纳金额",val:null}],feeSum:{receivable:0,receipts:0},nowBaodifei:0,periodsView:{period_number:"",id:-1},tableDate:"",currentPage4:null,lineFeeData:[],RoyaltyFeeData:[],fee_type:"",lineFeeAll:null,RoyaltyFeeDataAll:null,nowType:"",dialoaMsg:""}),components:{ElCard:Object(s.a)({name:"ElCard",props:["header","bodyStyle"]},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"el-card"},[t.$slots.header||t.header?a("div",{staticClass:"el-card__header"},[t._t("header",[t._v(t._s(t.header))])],2):t._e(),t._v(" "),a("div",{staticClass:"el-card__body",style:t.bodyStyle},[t._t("default")],2)])},[],!1,null,null,null).exports},methods:{init(){this.periodsView.id=this.$route.query.id||-1,this.periodsView.period_number=this.$route.query.period_number||"";let t=this;this.lineFeeData.splice(0,this.lineFeeData.length),this.RoyaltyFeeData.splice(0,this.RoyaltyFeeData.length);let e=URL.api+ROUTES.GET.system.detail;this.$.autoAjax("get",e+"/"+this.periodsView.id,"",{ok:e=>{if(e.data&&0===e.state&&e.data){t.fee_type=e.data.fee_type;let a=e.data.costitems||[],s={receivable:0,receipts:0};t.nowBaodifei=FORMATNUMBER(a[0].receipts);for(let e=0;e<a.length;e++)t.lineFeeData.push({created:a[e].created,fee_scale:a[e].fee_scale,id:a[e].id,item_name:a[e].item_name,quantity:a[e].quantity?a[e].quantity:1,receipts:a[e].receipts,receivable:FORMATNUMBER(a[e].quantity?a[e].quantity:1)*FORMATNUMBER(a[e].fee_scale),receive_id:a[e].receive_id,updated:a[e].updated}),s.receivable=FORMATNUMBER(s.receivable)+FORMATNUMBER(t.lineFeeData[e].receivable),s.receipts=FORMATNUMBER(s.receipts)+FORMATNUMBER(t.lineFeeData[e].receipts);"mincost"===t.fee_type?(s.receipts=s.receipts-t.nowBaodifei,t.costStatistics[0].label="合计（SSL证书费+其它费用）"):t.costStatistics[0].label="线路费合计",t.feeSum.receivable=FORMATMONEY(s.receivable)>0?FORMATMONEY(s.receivable):0,t.feeSum.receipts=FORMATMONEY(s.receipts)>0?FORMATMONEY(s.receipts):0,t.costStatistics[0].val=0,t.costStatistics[1].val=0,t.costStatistics[2].val=0,t.costStatistics[0].val=t.feeSum.receipts,t.RoyaltyFeeDataAll=0;for(let a in e.data.items)t.RoyaltyFeeData[a]=e.data.items[a],t.RoyaltyFeeDataAll+=FORMATNUMBER(e.data.items[a].received);t.RoyaltyFeeDataAll=FORMATMONEY(t.RoyaltyFeeDataAll),"mincost"===t.fee_type?FORMATNUMBER(t.RoyaltyFeeDataAll)>FORMATNUMBER(t.nowBaodifei)?(t.costStatistics[1].label="游戏抽成费合计",t.costStatistics[1].val=FORMATNUMBER(t.RoyaltyFeeDataAll)):(t.costStatistics[1].label="保底费",t.costStatistics[1].val=FORMATMONEY(t.nowBaodifei)>0?FORMATMONEY(t.nowBaodifei):0):t.costStatistics[1].val=FORMATNUMBER(t.RoyaltyFeeDataAll),t.costStatistics[2].val=(FORMATNUMBER(t.costStatistics[0].val)+FORMATNUMBER(t.costStatistics[1].val)).toFixed(2)}},p:()=>{},error:t=>{console.log(t)}})},blackPgUp(){this.$router.push({path:"/deliveryStatement"})},viewDetail(t){this.dialoaMsg=t,this.dialogVisible=!0},handleClose(){this.dialogVisible=!1},handleSizeChange(t){},handleCurrentChange(t){}},activated(){this.init()}};var l=function(t){a(529)},o=Object(s.a)(i,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"deliveryDetail"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.blackPgUp}},[t._v("\n                "+t._s(t.LANG["返回"]||"返回")+"\n            ")])],1),t._v(" "),a("el-col",{staticClass:"mt20",attrs:{span:24}},[a("el-card",{staticClass:"box-card"},[a("div",{attrs:{id:""}},[a("div",{staticClass:"titleBox_One font16"},[a("span",[t._v(t._s(t.LANG["mincost"===t.fee_type?"包底费":"线路费"]||("mincost"===t.fee_type?"包底费":"线路费")))])]),t._v(" "),a("table",{staticClass:"el-table w100  mt10 tCent",attrs:{border:"1px"},model:{value:t.lineFeeData,callback:function(e){t.lineFeeData=e},expression:"lineFeeData"}},[a("tr",[a("th",{attrs:{colspan:"2"}},[t._v(t._s(t.LANG["交收项目"]||"交收项目"))]),t._v(" "),a("th",[t._v(t._s(t.LANG["数量(月/个)"]||"数量(月/个)"))]),t._v(" "),a("th",[t._v(t._s(t.LANG["收费标准"]||"收费标准"))]),t._v(" "),a("th",[t._v(t._s(t.LANG["应交收金额"]||"应交收金额"))]),t._v(" "),a("th",[t._v(t._s(t.LANG["实际交收金额"]||"实际交收金额"))])]),t._v(" "),t._l(t.lineFeeData,function(e){return a("tr",[a("td",{attrs:{colspan:"2"}},[t._v(t._s(e.item_name))]),t._v(" "),"其他费用"===e.item_name?a("td",[a("div",{staticClass:"cell"},[a("div",[a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return t.viewDetail(e.quantity)}}},[t._v(t._s(t.LANG["查看"]||"查看"))])],1)])]):a("td",[t._v(t._s(e.quantity?e.quantity:1))]),t._v(" "),a("td",[t._v(t._s(t._f("formatMoney")(e.fee_scale)))]),t._v(" "),a("td",[t._v(t._s(t._f("formatMoney")(e.receivable)))]),t._v(" "),a("td",[t._v(t._s(t._f("formatMoney")(e.receipts)))])])}),t._v(" "),t.feeSum.receivable&&t.feeSum.receipts?a("tr",{staticClass:"col2"},["mincost"===t.fee_type?a("td",{staticClass:"font16",attrs:{colspan:"4"}},[t._v(t._s(t.LANG["合计（SSL证书费+其它费用）"]||"合计（SSL证书费+其它费用）"))]):a("td",{staticClass:"font16",attrs:{colspan:"4"}},[t._v(t._s(t.LANG["合计"]||"合计"))]),t._v(" "),a("td",[t._v(t._s(t.feeSum.receivable))]),t._v(" "),a("td",[t._v(t._s(t.feeSum.receipts))])]):t._e()],2)])])],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-dialog",{attrs:{title:t.LANG["备注信息"]||"备注信息",visible:t.dialogVisible,size:"tiny","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("h3",{staticClass:"mb20"},[t._v(t._s(t.LANG["其它费用备注"]||"其它费用备注"))]),t._v(" "),a("div",{staticStyle:{"background-color":"#eef1f6",padding:"20px"}},[t._v("\n                    "+t._s(t.dialoaMsg)+"\n                ")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"})])],1),t._v(" "),a("el-col",{staticClass:"mt20",attrs:{span:24}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"titleBox_Two font16"},[t._v(t._s(t.LANG["第"]||"第")),a("span",[t._v(t._s(t.periodsView.period_number))]),t._v(t._s(t.LANG["期游戏抽成费用"]||"期游戏抽成费用"))]),t._v(" "),a("table",{staticClass:"el-table w100 mt20 tCent",attrs:{border:"1px"}},[a("tr",[a("th",[t._v(t._s(t.LANG["交收项目"]||"交收项目"))]),t._v(" "),a("th",[t._v(t._s(t.LANG["金额(输赢)"]||"金额(输赢)"))]),t._v(" "),a("th",[t._v(t._s(t.LANG["抽成比例"]||"抽成比例")+"(%)")]),t._v(" "),a("th",[t._v(t._s(t.LANG["实际交收金额"]||"实际交收金额"))])]),t._v(" "),t._l(t.RoyaltyFeeData,function(e,s){return a("tr",[a("td",[t._v(t._s(e.game_type))]),t._v(" "),a("td",[t._v(t._s(t._f("formatMoney")(e.gross_profit)))]),t._v(" "),a("td",[t._v(t._s(e.proportion))]),t._v(" "),a("td",[t._v(t._s(t._f("formatMoney")(e.received)))])])}),t._v(" "),a("tr",{staticClass:"col2"},[a("td",{staticClass:"font16",attrs:{colspan:"3"}},[t._v(t._s(t.LANG["合计"]||"合计")+":")]),t._v(" "),a("td",[t._v(t._s(t.RoyaltyFeeDataAll))])])],2)])],1),t._v(" "),a("el-col",{staticClass:"mt10",attrs:{span:24}},[a("el-card",{staticClass:"box-card"},t._l(t.costStatistics,function(e,s){return a("div",{key:s,staticClass:"text item"},[a("span",{staticClass:"font16"},[t._v(t._s(t.LANG[e.label]||e.label)+": ")]),a("span",[t._v(t._s(e.val))])])}),0)],1)],1)],1)},[],!1,l,null,null);e.default=o.exports},529:function(t,e,a){}}]);