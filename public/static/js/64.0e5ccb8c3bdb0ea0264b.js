(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{192:function(e,t,a){"use strict";a.r(t);var i=a(202),s=a(203),d=a(206),o={data:()=>({LANG:LANG,fullscreenLoading:!1,columnsUrl:"",tableUrl:"",updateType:"",nowId:-1,formType:"",page:1,formConfig:[{prop:"name",value:"",type:"text",label:"标签名称",rules:[{require:!0}]},{prop:"desc",value:"",type:"textarea",label:"描述",rules:[{max:30}]}],type:"default",formTitel:"",labelWidth:"90px",editVisible:{state:!1},isEdit:{state:!1},confirmConfig:{state:!1,msg:"",fn:""},updated:!1}),components:{tablegrid:i.a,formEdit:s.a,confirm:d.a},methods:{init(){this.columnsUrl="/static/json/accoutManage/memberLabel/columns.json",this.tableUrl=URL.api+ROUTES.GET.user.labels},AddNew(){this.updated=!1,this.formTitel="新增会员标签",this.editVisible.state=!0,this.formType="add"},getForm(e){let t=this;this.fullscreenLoading=!0;let a="";e.formObj.id=this.nowId;let i="";i=i="add"==this.formType?URL.api+ROUTES.PUT.user.label.$+"/":URL.api+ROUTES.PUT.user.label.$+"/"+e.formObj.id,this.$http.put(i,e.formObj,URLCONFIG).then(e=>{e.data.data&&0==e.data.state?("add"==t.formType?(a=LANG["恭喜您，新增会员标签成功！"]||"恭喜您，新增会员标签成功！",t.updateType="add"):(a=LANG["恭喜您，会员标签修改成功！"]||"恭喜您，会员标签修改成功！",t.updateType="edit"),t.updated=!0,t.$message.success(a)):1002==e.data.state?(a=LANG[e.data.msg]||e.data.msg,t.$message.error(a),t.updateType=""):("add"==t.formType?(this.fullscreenLoading=!1,a=LANG["新增会员标签失败，请稍候重试！"]||"新增会员标签失败，请稍候重试！"):a=LANG["会员标签修改失败，请稍候重试！"]||"会员标签修改失败，请稍候重试！",t.$message.error(a),t.updateType="",t.updated=!1),this.fullscreenLoading=!1,t.formType=""}).catch(e=>{})},doHandle(e){switch(e.fn){case"doEdit":this.doEdit(e.row);break;case"doDelete":this.doDelete(e.row)}},doEdit(e){this.nowId=e.id,this.formTitel=LANG["修改会员标签"]||"修改会员标签",this.formType="",e.name=e.title,e.desc=e.content,setTimeout(()=>{FORMVAL(e,this.formConfig),this.formType="edit",this.isEdit.state=!0,this.editVisible.state=!0},500)},doDelete(e){let t=e.title;this.nowId=e.id,this.confirmConfig.state=!0,this.confirmConfig.msg=(this.LANG["确定删除"]||"确定删除")+t+(this.LANG["吗？"]||"吗？"),this.confirmConfig.fn="delete"},doConfirm(e){if("delete"==e.fn){this.fullscreenLoading=!0;let e=this;this.$http.delete(URL.api+ROUTES.DELETE.user.label+"/"+parseInt(e.nowId),URLCONFIG).then(t=>{0===t.data.state&&t.data.data?(e.$message.success(LANG["恭喜您，会员标签删除成功！"]||"恭喜您，会员标签删除成功！"),e.updateType="delete"):2004===t.data.state&&t.data.data&&e.$message.error(LANG[t.data.msg]||t.data.msg),this.fullscreenLoading=!1}),e.updateType=""}},getTableDate(e){}},computed:{},mounted(){},created(){this.init()}},l=a(10);var r=function(e){a(488)},n=Object(l.a)(o,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.fullscreenLoading,expression:"fullscreenLoading"}],staticClass:"clearfix",attrs:{id:"memberLabel"}},[e.fullscreenLoading?e._e():a("el-col",{staticClass:"pb"},[a("el-button",{staticClass:"btn_right addBut",attrs:{type:"primary",size:"small"},domProps:{textContent:e._s(e.LANG["新增会员标签"]||"新增会员标签")},on:{click:e.AddNew}})],1),e._v(" "),e.fullscreenLoading?e._e():a("el-col",[a("tablegrid",{attrs:{columnsUrl:e.columnsUrl,tableUrl:e.tableUrl,tableIndex:!1,tableCheck:!1,showRefresh:!0,isCreated:!0,updated:e.updated},on:{"get-table-data":e.getTableDate,"do-handle":e.doHandle}})],1),e._v(" "),e.fullscreenLoading?e._e():a("el-col",[a("formEdit",{attrs:{formTitel:e.formTitel,formVisible:e.editVisible,formConfig:e.formConfig,type:e.type,labelWidth:e.labelWidth,isEdit:e.isEdit,formType:e.formType},on:{"get-form":e.getForm}})],1),e._v(" "),a("el-col",[a("confirm",{attrs:{confirmConfig:e.confirmConfig},on:{"do-confirm":e.doConfirm}})],1)],1)},[],!1,r,"data-v-cee94fa6",null);t.default=n.exports},488:function(e,t,a){}}]);