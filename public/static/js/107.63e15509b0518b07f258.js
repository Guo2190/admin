(window.webpackJsonp=window.webpackJsonp||[]).push([[107],{131:function(e,t,a){"use strict";a.r(t);var r=a(197),i=a(198),o=a(201),l={data(){var e=function(e,t,a){"number"!=typeof t?a(new Error(LANG["请输入纯数字"]||"请输入纯数字")):-1===Math.sign(t)?a(new Error(LANG["不能小于0"]||"不能小于0")):t>100?a(new Error(LANG["不能大于100"]||"不能大于100")):a()};return{headTextconf:{label:"浮动图边距设置",fn:"setMargins",show:!0},Marginsformrules:{leftvertical:[{validator:e,required:!0,trigger:"blur"}],lefthorizontal:[{validator:e,required:!0,trigger:"blur"}],rightvertical:[{validator:e,required:!0,trigger:"blur"}],righthorizontal:[{validator:e,required:!0,trigger:"blur"}]},MarginsVisible:!1,Marginsform:{leftvertical:"",lefthorizontal:"",rightvertical:"",righthorizontal:"",left_value:!1,right_value:!1},isEditSearch:{state:!1},typeSearch:"search",labelWidthSearch:"100px",formVisibleSearch:{state:!1},searchConfig:[{prop:"name",value:"",type:"text",label:"图片名称"},{prop:"status",value:"",label:"启用状态",type:"select",list:[{label:"全部",value:""},{label:"启用",value:"enabled"},{label:"停用",value:"disabled"}]}],confirmConfig:{state:!1,msg:"",fn:"",obj:null},LANG:LANG,tableUrl:"",baseUrl:"",columnsUrl:"",nowId:-1,type:"default",formTitel:"",labelWidth:"90px",isEdit:{state:!1},formVisible:{state:!1},pf:"",formType:"",formConfig:[{prop:"name",value:"",type:"text",label:"图片名称",rules:[{require:!0}]},{prop:"link",value:"",type:"text",label:"跳转链接"},{prop:"language_id",value:"",label:"语言",type:"select",list:[],propVal:"language_name",rules:[{require:!0}]},{prop:"images",value:[],type:"upload",fileNum:1,label:"图片",action:URL.img,folder:"web",rules:[{require:!0}]},{prop:"position",value:"",type:"radioGroup",label:"显示位置",radioInput:!1,list:[{radio1:"",value:"left-middle",label:"左中"},{radio2:"",value:"right-middle",label:"右中"},{radio3:"",value:"left-bottom",label:"左下"},{radio4:"",value:"right-bottom",label:"右下"}],rules:[{require:!0}]},{prop:"pf",value:"pc",label:"平台",type:"select",list:[{label:"PC",value:"pc"}],rules:[{require:!0}]},{prop:"sort",value:"",label:"排序",type:"text",rules:[{require:!0},{integer:!0}]}],updateType:"",updated:!1,loading:!1,LANG:LANG}},components:{tablegrid:r.a,formEdit:i.a,confirm:o.a},methods:{init(){this.tableUrl=URL.api+ROUTES.GET.copywriter.float,this.baseUrl=URL.api+ROUTES.GET.copywriter.float,this.columnsUrl="/static/json/ADManage/ckManage/columns.json";let e=this.formConfig[2].list;this.$.autoAjax("get",URL.api+ROUTES.GET.langeages,"",{ok:t=>{if(0==t.state&&t.data){let a=t.data.data||[];for(let t in a)e.push({label:a[t].name,value:a[t].id.toString()})}},p:()=>{},error:e=>{console.log(e)}})},doQuery(e){this.tableUrl=this.baseUrl+this.addSearch(e.item)},resetForm(){this.tableUrl=this.baseUrl},saveMargins(){let e={"left-middle":{vertical:this.Marginsform.leftvertical,horizontal:this.Marginsform.lefthorizontal},"right-middle":{vertical:this.Marginsform.rightvertical,horizontal:this.Marginsform.righthorizontal},"fold-controller":{left:this.Marginsform.left_value?1:0,right:this.Marginsform.right_value?1:0}};this.updated=!1,this.$.autoAjax("put",URL.api+ROUTES.PUT.copywriter.align,e,{ok:e=>{0===e.state&&!0===e.data?(this.$message.success(LANG["修改边距成功"]||"修改边距成功"),this.updated=!0):this.$message.error(LANG["修改边距失败"]||"修改边距失败")},p:()=>{},error:e=>{console.log(e)}}),this.MarginsVisible=!1},resetMargins(e){this.$refs[e].resetFields(),this.MarginsVisible=!1},doHandle(e){switch(this.updated=!1,this.formType="",this.nowId=parseInt(e.row.id)||-1,e.fn){case"doApply":this.doApply(e.row);break;case"doEdit":this.doEdit(e.row);break;case"doDelete":this.doDelete(e.row);break;case"doEnable":this.doEnable(e.row);break;case"doDisable":this.doDisable(e.row);break;case"setMargins":this.setMargins(e.row)}},doAdd(){this.formTitel="新增浮动图",this.formVisible.state=!0,this.formType="add"},setMargins(e){this.MarginsVisible=!0,this.$.autoAjax("get",URL.api+ROUTES.GET.copywriter.align,"",{ok:e=>{if(0===e.state&&e.data){let t=e.data;this.Marginsform={leftvertical:t["left-middle"].vertical,lefthorizontal:t["left-middle"].horizontal,rightvertical:t["right-middle"].vertical,righthorizontal:t["right-middle"].horizontal,left_value:"1"==t["fold-controller"].left,right_value:"1"==t["fold-controller"].right}}else this.$message.error(LANG["获取边距设置失败"]||"获取边距设置失败")},p:()=>{},error:e=>{console.log(e)}})},getForm(e){let t=this;this.loading=!0,this.updated=!1;let a={};for(let t in e.formObj)a[t]=e.formObj[t];a.picture=a.images.toString(),delete a.images,"add"==this.formType?(t.loading=!0,this.$.autoAjax("put",URL.api+ROUTES.PUT.copywriter.float,a,{ok:e=>{0==e.state&&e.data?(t.formType="add",t.$message.success(LANG["恭喜您，新增浮动图成功！"]||"恭喜您，新增浮动图成功！"),t.updated=!0):(t.$message.error(LANG["新增浮动图失败，请稍候重试！"]||"新增浮动图失败，请稍候重试！"),t.formType=""),t.formType="",t.loading=!1},p:()=>{},error:e=>{console.log(e)}})):"edit"==t.formType&&(t.loading=!0,this.$.autoAjax("put",URL.api+ROUTES.PUT.copywriter.float+"/"+parseInt(t.nowId),a,{ok:e=>{0==e.state&&e.data?(t.formType="add",t.$message.success(LANG["恭喜您，修改浮动图成功！"]||"恭喜您，修改浮动图成功！"),t.updated=!0):(t.$message.error(LANG["浮动图修改失败，请稍候重试！"]||"浮动图修改失败，请稍候重试！"),t.loading=!1,t.formType=""),t.loading=!1,t.formType=""},p:()=>{},error:e=>{console.log(e)}}))},doEdit(e){this.nowId=e.id,this.loading=!0,this.$.autoAjax("get",URL.api+ROUTES.GET.copywriter.float+"/"+parseInt(e.id),"",{ok:e=>{if(0==e.state&&e.data){let t=e.data||[];this.formTitel="修改会员标签",this.formType="edit",FORMVAL(t,this.formConfig),this.formConfig[3].value.push(t.picture),this.isEdit.state=!0,this.formVisible.state=!0,this.loading=!1}},p:()=>{},error:e=>{console.log(e)}})},doConfirm(e){this.loading=!0;let t=this;switch(e.fn){case"start":this.$.autoAjax("patch",URL.api+ROUTES.PATCH.copywriter.float+"/"+parseInt(t.nowId),JSON.stringify({status:"enabled",language_id:e.obj.language_id,pf:e.obj.pf,position:e.obj.position}),{ok:e=>{0==e.state&&e.data?(t.$message.success(LANG["恭喜您，浮动图启用成功！"]||"恭喜您，浮动图启用成功！"),t.updated=!0):t.$message.error(LANG["浮动图启用失败，请稍后重试！"]||"浮动图启用失败，请稍后重试！"),t.loading=!1},p:()=>{},error:e=>{console.log(e)}});break;case"stop":this.$.autoAjax("patch",URL.api+ROUTES.PATCH.copywriter.float+"/"+parseInt(t.nowId),JSON.stringify({status:"disabled",language_id:e.obj.language_id,pf:e.obj.pf,position:e.obj.position}),{ok:e=>{0==e.state&&e.data?(t.$message.success(LANG["恭喜您，浮动图停用成功！"]||"恭喜您，浮动图停用成功！"),t.updated=!0):t.$message.error(LANG["浮动图停用失败，请稍后重试！"]||"浮动图停用失败，请稍后重试！"),t.loading=!1},p:()=>{},error:e=>{console.log(e)}});break;case"apply":this.$.autoAjax("patch",URL.api+ROUTES.PATCH.copywriter.float+"/"+parseInt(t.nowId),JSON.stringify({approve:"applying",language_id:e.obj.language_id,pf:e.obj.pf,position:e.obj.position}),{ok:e=>{0==e.state&&e.data?(t.$message.success(LANG["恭喜您，浮动图申请成功！"]||"恭喜您，浮动图申请成功！"),t.updated=!0):t.$message.error(LANG["浮动图申请失败，请稍后重试！"]||"浮动图申请失败，请稍后重试！"),t.loading=!1},p:()=>{},error:e=>{console.log(e)}});break;case"delete":this.$.autoAjax("delete",URL.api+ROUTES.DELETE.copywriter.float+"/?id="+parseInt(t.nowId)+"&pf=pc","",{ok:e=>{0==e.state&&e.data?(t.$message.success(LANG["恭喜您，浮动图删除成功！"]||"恭喜您，浮动图删除成功！"),t.formType="delete",t.updated=!0):t.$message.error(LANG["浮动图删除失败，请稍候重试！"]||"浮动图删除失败，请稍候重试！"),t.loading=!1},p:()=>{},error:e=>{console.log(e)}})}},doDelete(e){this.pf=e.pf,parseInt(e.id)&&(this.confirmConfig.state=!0,this.confirmConfig.msg=(LANG["确定删除"]||"确定删除")+'"'+e.name+'"'+(LANG["吗？"]||"吗？"),this.confirmConfig.fn="delete")},doApply(e){parseInt(e.id)&&(this.confirmConfig.state=!0,this.confirmConfig.msg=(LANG["确定申请"]||"确定申请")+'"'+e.name+'"'+(LANG["吗？"]||"吗？"),this.confirmConfig.fn="apply",this.confirmConfig.obj=e)},doEnable(e){parseInt(e.id)&&(this.confirmConfig.state=!0,this.confirmConfig.msg=(LANG["确定启用"]||"确定启用")+'"'+e.name+'"'+(LANG["吗？"]||"吗？"),this.confirmConfig.fn="start",this.confirmConfig.obj=e)},doDisable(e){parseInt(e.id)&&(this.confirmConfig.state=!0,this.confirmConfig.msg=(this.LANG["确定停用"]||"确定停用")+'"'+e.name+'"'+(this.LANG["吗？"]||"吗？"),this.confirmConfig.fn="stop",this.confirmConfig.obj=e)}},created(){this.init()}},s=a(24),n=Object(s.a)(l,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"tempAdHome clearfix",attrs:{id:"results"}},[a("el-col",{staticClass:"mb20 pb",attrs:{span:24}},[a("formEdit",{attrs:{formVisible:e.formVisibleSearch,formConfig:e.searchConfig,type:e.typeSearch,labelWidth:e.labelWidthSearch,isEdit:e.isEditSearch,addText:e.LANG["新增浮动图"]||"新增浮动图"},on:{"do-query":e.doQuery,"reset-form":e.resetForm,"add-new":e.doAdd}})],1),e._v(" "),a("el-col",[a("formEdit",{attrs:{formTitel:e.formTitel,formVisible:e.formVisible,formConfig:e.formConfig,type:e.type,labelWidth:e.labelWidth,isEdit:e.isEdit,formType:e.formType},on:{"get-form":e.getForm}})],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("div",[a("tablegrid",{attrs:{columnsUrl:e.columnsUrl,tableUrl:e.tableUrl,tableCheck:!1,tableIndex:!1,showheadbtn:!0,formType:e.updateType,updated:e.updated,showRefresh:!0,headTextconf:e.headTextconf},on:{"do-handle":e.doHandle}})],1)]),e._v(" "),a("el-col",[a("confirm",{attrs:{confirmConfig:e.confirmConfig},on:{"do-confirm":e.doConfirm}})],1),e._v(" "),a("el-dialog",{attrs:{title:"浮动图边距设置",size:"tiny"},model:{value:e.MarginsVisible,callback:function(t){e.MarginsVisible=t},expression:"MarginsVisible"}},[a("el-form",{ref:"Marginsform",attrs:{model:e.Marginsform,"label-width":"80px",rules:e.Marginsformrules}},[a("div",[e._v("左中部浮动图边距控制")]),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:e.LANG["垂直居顶"]||"垂直居顶",prop:"leftvertical"}},[a("el-input",{attrs:{size:"small"},model:{value:e.Marginsform.leftvertical,callback:function(t){e.$set(e.Marginsform,"leftvertical",e._n(t))},expression:"Marginsform.leftvertical"}},[a("template",{slot:"append"},[e._v("%")])],2)],1)],1),e._v(" "),a("el-col",{attrs:{span:10,offset:4}},[a("el-form-item",{attrs:{label:e.LANG["水平居左"]||"水平居左",prop:"lefthorizontal"}},[a("el-input",{attrs:{size:"small"},model:{value:e.Marginsform.lefthorizontal,callback:function(t){e.$set(e.Marginsform,"lefthorizontal",e._n(t))},expression:"Marginsform.lefthorizontal"}},[a("template",{slot:"append"},[e._v("%")])],2)],1)],1)],1),e._v(" "),a("div",[e._v("右中部浮动图边距控制")]),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:e.LANG["垂直居顶"]||"垂直居顶",prop:"rightvertical"}},[a("el-input",{attrs:{size:"small"},model:{value:e.Marginsform.rightvertical,callback:function(t){e.$set(e.Marginsform,"rightvertical",e._n(t))},expression:"Marginsform.rightvertical"}},[a("template",{slot:"append"},[e._v("%")])],2)],1)],1),e._v(" "),a("el-col",{attrs:{span:10,offset:4}},[a("el-form-item",{attrs:{label:e.LANG["水平居右"]||"水平居右",prop:"righthorizontal"}},[a("el-input",{attrs:{size:"small"},model:{value:e.Marginsform.righthorizontal,callback:function(t){e.$set(e.Marginsform,"righthorizontal",e._n(t))},expression:"Marginsform.righthorizontal"}},[a("template",{slot:"append"},[e._v("%")])],2)],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:10}},[a("span",[e._v("右侧浮动图折叠控制")]),e._v(" "),a("div",{staticClass:"grid-content mt10",staticStyle:{display:"inline-block"}},[a("el-switch",{attrs:{"on-text":"开","off-text":"关","off-color":"#C0CCDA"},model:{value:e.Marginsform.right_value,callback:function(t){e.$set(e.Marginsform,"right_value",t)},expression:"Marginsform.right_value"}})],1)])],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.resetMargins("Marginsform")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveMargins}},[e._v("确 定")])],1)],1)],1)},[],!1,null,null,null);t.default=n.exports}}]);