(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{120:function(t,s,e){"use strict";e.r(s);var a={data:()=>({LANG:LANG,input:"",showTree:!0,show:{}}),props:{lotterydata:Array,sortObj:Object},methods:{init(){for(let t=0;t<this.lotterydata.length;t++)this.$set(this.show,t,!0)},doEdit(t,s,e){this.$emit("sub-edit",{row:t,subkey:s,itemId:e})},doChange(t,s,e,a){},saveForm(){this.$emit("save-form",{data:this.lotterydata})},new_toggle(t){this.show[t]=!this.show[t]}},components:{},computed:{},watch:{"lotterydata.length":function(t){t&&this.init()}},mounted(){},created(){},activated(){}},l=e(10);var i=function(t){e(465)},o={data:()=>({LANG:LANG,list:[],list_show:[],sortObj:{},formConfig:[{prop:"name",value:"",type:"label",label:"名称"},{prop:"display",value:"",label:"是否显示",type:"select",list:[{label:"是",value:"1"},{label:"否",value:"0"}],rules:[{require:!0}]}],labelWidth:"110px",formTitel:"",editVisible:{state:!1},isEdit:{state:!1},formType:"",nowSubId:-1,loading:!1}),methods:{init(){this.loading=!0,this.list.splice(0,this.list.length),this.editVisible.state=!1;let t=this.list;this.sortObj={};let s=this.sortObj;this.$.autoAjax("get",URL.api+"/lottery/sort","",{ok:e=>{if(0===e.state&&e.data){let a=e.data||[];for(let e=0;e<a.length;e++){let l={key:e,id:a[e].id,sort:a[e].sort,show:!0};if(a[e].sort=a[e].sort.split(",",1)[0],a[e].sub){l.sub=[];let t=a[e].sub;for(let s=0;s<t.length;s++)l.sub.push({id:t[s].id,sort:t[s].sort})}s[e]=l,t.push(a[e]),this.list_show[e]=!0}}this.loading=!1},p:()=>{},error:t=>{console.log(t)}})},doSaveForm(t){this.loading=!0;let s=t.data||{},e=[];for(let t in s)e.push({id:s[t].id,sort:s[t].sort,sub:s[t].sub?s[t].sub:[]});let a={};a.list=e,this.$.autoAjax("post",URL.api+"/lottery/sort",a,{ok:t=>{0===t.state&&t.data?(this.$message.success(LANG["彩票排序成功"]||"彩票排序成功"),this.init()):t.msg?this.$message.error(t.msg):this.$message.error(LANG["彩票排序失败，请稍候重试"]||"彩票排序失败，请稍候重试"),this.loading=!1},p:()=>{},error:t=>{this.loading=!1}})},doSubEdit(t){this.loading=!0,this.formConfig=[{prop:"name",value:"",type:"label",label:"名称"},{prop:"display",value:"",label:"是否显示",type:"select",list:[{label:"是",value:"1"},{label:"否",value:"0"}],rules:[{require:!0}]}],this.$.autoAjax("get",URL.api+"/lottery/sort.set/"+t.row.id,"",{ok:t=>{if(0===t.state&&t.data){let s=t.data;if(this.nowSubId=s.id,this.formConfig[0].value=s.name||"",this.formConfig[1].value=s.display,s.options.fast){this.formConfig.push({prop:"default_fast",value:"",label:"信用",type:"select",list:[],rules:[{require:!0}]});let t=this.formConfig[2].list;this.formConfig[2].value=s.default_fast,s.options.fast.forEach(s=>{t.push({label:s.name,value:s.id})})}if(s.options.standard){this.formConfig.push({prop:"default_standard",value:"",label:"官方",type:"select",list:[],rules:[{require:!0}]}),this.formConfig[3].value=s.default_standard;let t=this.formConfig[3].list;s.options.standard.forEach(s=>{t.push({label:s.name,value:s.id})})}this.editVisible.state=!0,this.loading=!1}else this.$message.error(LANG["数据错误，请稍后重试"]||"数据错误，请稍后重试")},p:()=>{},error:t=>{console.log(t)}})},getForm(t){this.loading=!0;let s={id:this.nowSubId,display:t.formObj.display,default_fast:t.formObj.default_fast,default_standard:t.formObj.default_standard};this.$.autoAjax("post",URL.api+"/lottery/sort.set",s,{ok:t=>{0===t.state&&t.data?(this.$message.success(LANG["彩票信息修改成功"]||"彩票信息修改成功"),this.init()):t.msg?this.$message.error(t.msg):this.$message.error(LANG["彩票信息修改失败，请稍后重试"]||"彩票信息修改失败，请稍后重试"),this.loading=!1},p:()=>{},error:t=>{console.log(t)}})}},components:{newtree:Object(l.a)(a,function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"newTree"}},[e("el-card",{staticClass:"box-card diyTree font12"},[e("el-row",[e("el-col",{attrs:{span:12}},[e("span",[t._v("注：前台实际展示时数字大的排在前面；彩票聚合页全部分类这里无法排序")])]),t._v(" "),e("el-col",{staticClass:"tRight",attrs:{span:12}},[e("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.saveForm}},[t._v("保存")])],1)],1),t._v(" "),e("el-row",{staticClass:"mt10"},[e("el-col",[e("el-col",{staticClass:"treeHeader"},[e("el-col",{staticClass:"pleft",attrs:{span:6}},[t._v("一级排序")]),t._v(" "),e("el-col",{staticClass:"pleft",attrs:{span:5}},[t._v("二级排序")]),t._v(" "),e("el-col",{staticClass:"pleft",attrs:{span:4}},[t._v("信用默认玩法")]),t._v(" "),e("el-col",{staticClass:"pleft",attrs:{span:4}},[t._v("官方默认玩法")]),t._v(" "),e("el-col",{staticClass:"pleft",attrs:{span:2}},[t._v("是否显示")]),t._v(" "),e("el-col",{staticClass:"pleft",attrs:{span:3}},[t._v("操作")])],1),t._v(" "),e("el-col",{staticClass:"menu w100"},t._l(t.lotterydata,function(s,a){return e("el-col",{key:s.id,staticClass:"toggle w100"},[e("el-col",{staticClass:"toggle_show",nativeOn:{click:function(s){return t.new_toggle(a)}}},[e("el-col",{staticClass:"pleft",attrs:{span:6}},[t.show[a]?e("i",{staticClass:"el-icon-arrow-down"}):e("i",{staticClass:"el-icon-arrow-right"}),t._v(" "),e("el-input",{staticClass:"intW ml10",attrs:{size:"small",placeholder:"请输入排列序号"},on:{change:function(e){return t.doChange(s,s.id,"top")}},model:{value:s.sort,callback:function(e){t.$set(s,"sort",e)},expression:"item['sort']"}}),t._v(" "),e("span",[t._v(t._s(s.name))])],1)],1),t._v(" "),t._l(s.sub,function(l,i){return e("el-col",{directives:[{name:"show",rawName:"v-show",value:t.show[a],expression:"show[index]"}],key:l.id,staticClass:"child",attrs:{span:24}},[e("el-col",{attrs:{span:5,offset:6}},[e("div",[e("el-input",{staticClass:"intW ml10",attrs:{size:"small",placeholder:"请输入内容"},on:{change:function(s){return t.doChange(l.sort,a,"sub",i)}},model:{value:l.sort,callback:function(s){t.$set(l,"sort",s)},expression:"sub['sort']"}}),t._v(" "),e("span",[t._v(t._s(l.name))])],1)]),t._v(" "),e("el-col",{attrs:{span:4}},[t._v("\n                                    "+t._s("无"===l.default_fast_name?"无":"信用玩法-"+l.default_fast_name)+"\n                                ")]),t._v(" "),e("el-col",{attrs:{span:4}},[t._v("\n                                    "+t._s("无"===l.default_standard_name?"无":"官方玩法-"+l.default_standard_name)+"\n                                ")]),t._v(" "),e("el-col",{attrs:{span:2}},[t._v("\n                                    "+t._s("1"==l.display?"是":"否")+"\n                                ")]),t._v(" "),e("el-col",{attrs:{span:3}},[e("el-button",{attrs:{size:"small"},on:{click:function(e){return t.doEdit(l,i,s.id)}}},[t._v("编辑")])],1)],1)})],2)}),1)],1)],1)],1)],1)},[],!1,i,null,null).exports,formEdit:e(203).a},computed:{},watch:{},mounted(){},created(){this.init()}};var r=function(t){e(464)},n=Object(l.a)(o,function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{id:"lotterSort"}},[e("newtree",{attrs:{lotterydata:t.list,sortObj:t.sortObj},on:{"save-form":t.doSaveForm,"sub-edit":t.doSubEdit}}),t._v(" "),e("el-col",[e("formEdit",{attrs:{formTitel:t.formTitel,formVisible:t.editVisible,formConfig:t.formConfig,type:"default",labelWidth:t.labelWidth,isEdit:t.isEdit,formType:t.formType},on:{"get-form":t.getForm}})],1)],1)},[],!1,r,null,null);s.default=n.exports},464:function(t,s,e){},465:function(t,s,e){}}]);