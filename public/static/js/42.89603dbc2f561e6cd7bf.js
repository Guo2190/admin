(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{121:function(e,t,a){"use strict";a.r(t);var i=a(235),s=a(218),r={data:()=>({LANG:LANG,activeName:"allMembers",reSet:!1,reSet1:!1,vipList:[],gameList:[],editForm:{isIndeterminate:!0,isIndeterminate1:!0,date_from:"",date_to:"",vipType:!0,gameType:!0,gameTypeDz:!1,gameTypeSx:!1,checkedDefut:[],checkedDefut1:[]},editForm1:{isIndeterminate:!0,isIndeterminate1:!0,date_from:"",date_to:"",input:"",vipType:!0,gameType:!0,gameTypeDz:!1,gameTypeSx:!1,checkedDefut:[],checkedDefut1:[]},rules:{date_from:[{required:!0,message:"请输入开始时间",trigger:"change"}],date_to:[{required:!0,message:"请输入结束时间",trigger:"change"}],checkedDefut:[{type:"array",required:!0,message:"请至少选择一个会员等级",trigger:"change"}],checkedDefut1:[{type:"array",required:!0,message:"请至少选择一个会员等级",trigger:"change"}]},rules1:{date_from:[{required:!0,message:"请输入开始时间",trigger:"change"}],date_to:[{required:!0,message:"请输入结束时间",trigger:"change"}],input:[{required:!0,message:"请输入会员账号",trigger:"change"}],checkedDefut1:[{type:"array",required:!0,message:"请至少选择一个会员等级",trigger:"change"}]}}),components:{ElRow:{name:"ElRow",componentName:"ElRow",props:{tag:{type:String,default:"div"},gutter:Number,type:String,justify:{type:String,default:"start"},align:{type:String,default:"top"}},computed:{style(){var e={};return this.gutter&&(e.marginLeft=`-${this.gutter/2}px`,e.marginRight=e.marginLeft),e}},render(e){return e(this.tag,{class:["el-row","start"!==this.justify?`is-justify-${this.justify}`:"","top"!==this.align?`is-align-${this.align}`:"",{"el-row--flex":"flex"===this.type}],style:this.style},this.$slots.default)}},datepicker:i.a,quickDate:s.a},methods:{init(){this.editForm.date_to=FORMATDATEPICKER(new Date(parseInt(sessionStorage.dateTime))),this.editForm.date_from=FORMATDATEPICKER(new Date(parseInt(sessionStorage.dateTime))),this.editForm1.date_to=FORMATDATEPICKER(new Date(parseInt(sessionStorage.dateTime))),this.editForm1.date_from=FORMATDATEPICKER(new Date(parseInt(sessionStorage.dateTime))),this.reqVips(),this.reqGames()},handleClick(){},reqGames(){let e=this,t=URL.api+"/games";this.$.autoAjax("get",t,"",{ok:t=>{if(t.data){let a=t.data;for(let t in a)e.gameList.push({label:a[t].game_name,type:a[t].game_type,value:a[t].game_id}),this.editForm.checkedDefut1.push(a[t].game_name),this.editForm1.checkedDefut1.push(a[t].game_name)}},p:()=>{},error:e=>{console.log(e)}})},reqVips(){let e=this,t=URL.api+ROUTES.GET.user.level.list;this.$.autoAjax("get",t,"",{ok:t=>{if(t.data){let a=t.data;for(let t in a)e.vipList.push({label:"VIP"+a[t].level,value:a[t].level}),this.editForm.checkedDefut.push("VIP"+a[t].level)}},p:()=>{},error:e=>{console.log(e)}})},getDay(e){this.editForm.date_from=e.sday,this.editForm.date_to=e.eday},getDay1(e){this.editForm1.date_from=e.sday,this.editForm1.date_to=e.eday},handleCheckAllChange(e){let t=[];for(let e in this.vipList)t[e]=this.vipList[e].label;this.editForm.checkedDefut=e.target.checked?t:[],this.editForm.isIndeterminate=!1},handleCheckGameAllChange(e){let t=[];for(let e in this.gameList)t[e]=this.gameList[e].label;this.editForm.checkedDefut1=e.target.checked?t:[],this.editForm.isIndeterminate1=!1,this.editForm.gameTypeDz=!1,this.editForm.gameTypeSx=!1},handleCheckAllChange1(e){let t=[];for(let e in this.gameList)t[e]=this.gameList[e].label;this.editForm1.checkedDefut1=e.target.checked?t:[],this.editForm1.isIndeterminate=!1,this.editForm1.gameTypeDz=!1,this.editForm1.gameTypeSx=!1},handleCheckAllChangeDz(e){let t=this.gameList.filter(e=>"egame"===e.type),a=[];for(let e in t)a[e]=t[e].label;this.editForm.checkedDefut1=e.target.checked?a:[],this.editForm.isIndeterminate1=!1,this.editForm.gameType=!1,this.editForm.gameTypeSx=!1},handleCheckAllChangeSx(e){let t=this.gameList.filter(e=>"live"===e.type),a=[];for(let e in t)a[e]=t[e].label;this.editForm.checkedDefut1=e.target.checked?a:[],this.editForm.isIndeterminate1=!1,this.editForm.gameType=!1,this.editForm.gameTypeDz=!1},handleCheckAllChangeDz1(e){let t=this.gameList.filter(e=>"egame"===e.type),a=[];for(let e in t)a[e]=t[e].label;this.editForm1.checkedDefut1=e.target.checked?a:[],this.editForm1.isIndeterminate1=!1,this.editForm1.gameType=!1,this.editForm1.gameTypeSx=!1},handleCheckAllChangeSx1(e){let t=this.gameList.filter(e=>"live"===e.type),a=[];for(let e in t)a[e]=t[e].label;this.editForm1.checkedDefut1=e.target.checked?a:[],this.editForm1.isIndeterminate1=!1,this.editForm1.gameTypeDz=!1,this.editForm1.gameType=!1},handleCheckedDefutChange(){},doSubmit(){"allMembers"===this.activeName?this.$refs.form.validate(e=>{if(!e)return!1;{let e=this.editForm.date_from,t=this.editForm.date_to,a="",i=this.editForm.checkedDefut,s=[],r="";i.forEach(e=>{this.vipList.forEach(t=>{e===t.label&&s.push(t)})}),a=1===i.length?s.map(e=>e.value)[0]:s.map(e=>e.value).join(","),r=i.length===this.vipList.length?"全部":1===i.length?i[0]:i.join(",");let o="",l="",h=this.editForm.checkedDefut1,d=[],n="";h.forEach(e=>{this.gameList.forEach(t=>{e===t.label&&d.push(t)})}),1===h.length?(o=d.map(e=>e.value)[0],l=d.map(e=>e.type)[0]):(o=d.map(e=>parseInt(e.value)).join(","),l=d.map(e=>e.type).join(",")),n=h.length===this.gameList.length?"全部":1===h.length?h[0]:h.join(","),this.$router.push({path:"/queryDetail",query:{date_from:e,date_to:t,level_id:a,game_id:o,gameType:l,type:"level",gameAll:n,memberAll:r}})}}):this.$refs.form1.validate(e=>{if(!e)return!1;{let e=this.editForm1.date_from,t=this.editForm1.date_to,a=this.editForm1.input,i="",s="",r=this.editForm1.checkedDefut1,o=[],l="";r.forEach(e=>{this.gameList.forEach(t=>{e===t.label&&o.push(t)})}),1===r.length?(i=o.map(e=>e.value)[0],s=o.map(e=>e.type)[0]):(i=o.map(e=>e.value).join(","),s=o.map(e=>e.type).join(",")),l=r.length===this.gameList.length?"全部":1===r.length?r[0]:r.join(","),this.$router.push({path:"/queryDetail",query:{date_from:e,date_to:t,user_name:a,game_id:i,gameType:s,gameAll:l,type:"uname"}})}})},beginTimeChange(){this.editForm.date_from=FORMATDAT(this.editForm.date_from,"yyyy-MM-dd")},endTimeChange(){this.editForm.date_to=FORMATDAT(this.editForm.date_to,"yyyy-MM-dd")},beginTimeChange1(){this.editForm1.date_from=FORMATDAT(this.editForm1.date_from,"yyyy-MM-dd")},endTimeChange1(){this.editForm1.date_to=FORMATDAT(this.editForm1.date_to,"yyyy-MM-dd")},goback(){this.$router.push({path:"/discount"})}},computed:{},mounted(){$("body").on("click",()=>{$("#tooltip").hide()});let e=window.innerHeight;$("#act_apply").css("height",e-100)},created(){this.init()},beforeRouteLeave(e,t,a){this.$refs.form.resetFields(),this.$refs.form1.resetFields(),this.vipList.forEach(e=>{this.editForm.checkedDefut.push(e.label)}),this.gameList.forEach(e=>{this.editForm.checkedDefut1.push(e.label),this.editForm1.checkedDefut1.push(e.label)}),a(!0)}},o=a(24);var l=function(e){a(446)},h=Object(o.a)(r,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"act_apply"}},[a("div",{staticClass:"title"},[a("a",{attrs:{href:"javascript:;"},on:{click:e.goback}},[a("el-button",{attrs:{type:"primary",icon:"arrow-left",size:"small"}},[e._v(e._s(e.LANG["返 回"]||"返 回"))])],1)]),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:e.LANG["所有会员"]||"所有会员",name:"allMembers"}},[a("el-form",{ref:"form",staticClass:"w60 pleft",staticStyle:{border:"1px solid #e4e4e4","min-width":"730px"},attrs:{model:e.editForm,rules:e.rules,"label-width":"80px"}},[a("div",{staticClass:"clear"},[a("el-col",{staticClass:"cpSeachData mt10 fl",attrs:{span:13}},[a("el-form-item",{attrs:{label:e.LANG["日期"]||"日期",required:""}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"date_from"}},[a("datepicker",{on:{"get-date":e.beginTimeChange},model:{value:e.editForm.date_from,callback:function(t){e.$set(e.editForm,"date_from",t)},expression:"editForm.date_from"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:2}},[e._v("-")]),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"date_to"}},[a("datepicker",{on:{"get-date":e.endTimeChange},model:{value:e.editForm.date_to,callback:function(t){e.$set(e.editForm,"date_to",t)},expression:"editForm.date_to"}})],1)],1)],1)],1),e._v(" "),a("el-col",{staticClass:"mt10 mb10 fl",staticStyle:{"padding-top":"5px"},attrs:{span:11}},[a("quickDate",{attrs:{reSet:e.reSet},on:{"get-day":e.getDay}})],1)],1),e._v(" "),a("div",{staticClass:"clear cl",staticStyle:{padding:"20px 0"}},[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"会员层级",prop:"checkedDefut",required:""}},[a("el-checkbox",{attrs:{indeterminate:e.editForm.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.editForm.vipType,callback:function(t){e.$set(e.editForm,"vipType",t)},expression:"editForm.vipType"}},[e._v("全部\n                            ")]),e._v(" "),a("div",{staticStyle:{margin:"15px 0"}}),e._v(" "),a("el-checkbox-group",{on:{change:e.handleCheckedDefutChange},model:{value:e.editForm.checkedDefut,callback:function(t){e.$set(e.editForm,"checkedDefut",t)},expression:"editForm.checkedDefut"}},e._l(e.vipList,function(e,t){return a("el-checkbox",{key:t,attrs:{label:e.label,name:"type"}})}),1)],1)],1)],1),e._v(" "),a("div",{staticClass:"clear game"},[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{prop:"checkedDefut1",label:"游戏平台",required:""}},[a("el-checkbox",{attrs:{indeterminate:e.editForm.isIndeterminate1},on:{change:e.handleCheckGameAllChange},model:{value:e.editForm.gameType,callback:function(t){e.$set(e.editForm,"gameType",t)},expression:"editForm.gameType"}},[e._v("全部")]),e._v(" "),a("el-checkbox",{on:{change:e.handleCheckAllChangeDz},model:{value:e.editForm.gameTypeDz,callback:function(t){e.$set(e.editForm,"gameTypeDz",t)},expression:"editForm.gameTypeDz"}},[e._v("电子")]),e._v(" "),a("el-checkbox",{on:{change:e.handleCheckAllChangeSx},model:{value:e.editForm.gameTypeSx,callback:function(t){e.$set(e.editForm,"gameTypeSx",t)},expression:"editForm.gameTypeSx"}},[e._v("视讯")]),e._v(" "),a("div",{staticStyle:{margin:"15px 0"}}),e._v(" "),a("el-checkbox-group",{model:{value:e.editForm.checkedDefut1,callback:function(t){e.$set(e.editForm,"checkedDefut1",t)},expression:"editForm.checkedDefut1"}},e._l(e.gameList,function(e,t){return a("el-checkbox",{key:t,attrs:{label:e.label,name:"type"}})}),1)],1)],1)],1)])],1),e._v(" "),a("el-tab-pane",{attrs:{label:e.LANG["单个会员"]||"单个会员",name:"single"}},[a("el-form",{ref:"form1",staticClass:"w60 pleft",staticStyle:{border:"1px solid #e4e4e4","min-width":"730px"},attrs:{model:e.editForm1,rules:e.rules1,"label-width":"80px"}},[a("div",{staticClass:"clear"},[a("el-col",{staticClass:"cpSeachData mt10",attrs:{span:13}},[a("el-form-item",{attrs:{label:e.LANG["日期"]||"日期",required:""}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"date_from"}},[a("datepicker",{on:{"get-date":e.beginTimeChange1},model:{value:e.editForm1.date_from,callback:function(t){e.$set(e.editForm1,"date_from",t)},expression:"editForm1.date_from"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:2}},[e._v("-")]),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"date_to"}},[a("datepicker",{on:{"get-date":e.endTimeChange1},model:{value:e.editForm1.date_to,callback:function(t){e.$set(e.editForm1,"date_to",t)},expression:"editForm1.date_to"}})],1)],1)],1)],1),e._v(" "),a("el-col",{staticClass:"mt10 mb10",staticStyle:{"padding-top":"5px"},attrs:{span:11}},[a("quickDate",{attrs:{reSet:e.reSet},on:{"get-day":e.getDay1}})],1)],1),e._v(" "),a("div",{staticClass:"clear",staticStyle:{padding:"20px 0"}},[a("el-col",{attrs:{span:20}},[a("el-form-item",{staticClass:"w70",attrs:{prop:"input",label:"会员账号"}},[a("el-input",{attrs:{type:"textarea",placeholder:"输入会员账号，多个会员帐号之间用英文逗号(,)隔开"},model:{value:e.editForm1.input,callback:function(t){e.$set(e.editForm1,"input",t)},expression:"editForm1.input"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"clear game"},[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{prop:"checkedDefut1",label:"游戏平台",required:""}},[a("el-checkbox",{attrs:{indeterminate:e.editForm1.isIndeterminate1},on:{change:e.handleCheckAllChange1},model:{value:e.editForm1.gameType,callback:function(t){e.$set(e.editForm1,"gameType",t)},expression:"editForm1.gameType"}},[e._v("全部")]),e._v(" "),a("el-checkbox",{on:{change:e.handleCheckAllChangeDz1},model:{value:e.editForm1.gameTypeDz,callback:function(t){e.$set(e.editForm1,"gameTypeDz",t)},expression:"editForm1.gameTypeDz"}},[e._v("电子")]),e._v(" "),a("el-checkbox",{on:{change:e.handleCheckAllChangeSx1},model:{value:e.editForm1.gameTypeSx,callback:function(t){e.$set(e.editForm1,"gameTypeSx",t)},expression:"editForm1.gameTypeSx"}},[e._v("视讯")]),e._v(" "),a("div",{staticStyle:{margin:"15px 0"}}),e._v(" "),a("el-checkbox-group",{model:{value:e.editForm1.checkedDefut1,callback:function(t){e.$set(e.editForm1,"checkedDefut1",t)},expression:"editForm1.checkedDefut1"}},e._l(e.gameList,function(e,t){return a("el-checkbox",{key:t,attrs:{label:e.label,name:"type"}})}),1)],1)],1)],1)])],1)],1),e._v(" "),a("div",{staticClass:"w60 tCent",staticStyle:{"min-width":"730px"}},[a("el-button",{staticClass:"act_apply_submit intW mt20",attrs:{size:"small"},on:{click:function(t){return e.doSubmit()}}},[e._v(e._s(e.LANG["统计会员"]||"统计会员"))])],1)],1)},[],!1,l,"data-v-25584818",null);t.default=h.exports},218:function(e,t,a){"use strict";var i={data:()=>({LANG:LANG,playType:[],sDate:"",eDate:"",quickDate:[{key:"yesterday",text:"昨日",isActive:!1,id:"1"},{key:"today",text:"今日",isActive:!1,id:"2"},{key:"thisweek",text:"本周",isActive:!1,id:"3"},{key:"lastweek",text:"上周",isActive:!1,id:"4"},{key:"thismonth",text:"本月",isActive:!1,id:"5"},{key:"lastmonth",text:"上月",isActive:!1,id:"6"}]}),props:{reSet:!1,defaultId:{type:String},showTimes:{type:Boolean,default:!1}},computed:{isReset:function(){return this.reSet&&this.resetBtn(),!1}},methods:{getDate(e){var t=new Date(sessionStorage.sysTime);return t.setDate(t.getDate()+e),t.getFullYear()+"-"+this.formatday(t.getMonth()+1)+"-"+this.formatday(t.getDate())},getmonday(){var e=new Date(sessionStorage.sysTime),t=(e.getFullYear(),this.formatday(e.getMonth()+1),this.formatday(e.getDate()),e.getDay());return 0!=t?t-1:6},getMonth(e,t){var a=new Date(sessionStorage.sysTime),i=a.getFullYear(),s=this.formatday(a.getMonth()+1);0!=t&&(12==s&&t>0?(i++,s=1):1==s&&t<0?(i--,s=12):s=parseInt(s)+parseInt(t));a.getDate();var r=i+"-"+this.formatday(s)+"-01",o="";o=1==s||3==s||5==s||7==s||8==s||10==s||12==s?i+"-"+(0===t?s:this.formatday(s))+"-31":2==s?i%4==0&&i%100!=0||i%100==0&&i%400==0?i+"-"+(0===t?s:this.formatday(s))+"-29":i+"-"+(0===t?s:this.formatday(s))+"-28":i+"-"+(0===t?s:this.formatday(s))+"-30";return"s"==e?r:o},getYears(e,t){var a=new Date(sessionStorage.sysTime).getFullYear();return"s"==e?a+t+"-01-01":a+t+"-12-31"},resetBtn(e){let t=this.quickDate;for(let a in t)e&&t[a].key==e?t[a].isActive=!0:t[a].isActive=!1},formatday:e=>(parseInt(e)<10?"0":"")+parseInt(e),change(e){switch(this.resetBtn(e),e){case"yesterday":this.sDate=this.showTimes?this.getDate(-1)+" 00:00:00":this.getDate(-1),this.eDate=this.showTimes?this.getDate(-1)+" 23:59:59":this.getDate(-1),this.returnDate();break;case"today":this.sDate=this.showTimes?this.getDate(0)+" 00:00:00":this.getDate(0),this.eDate=this.showTimes?this.getDate(0)+" 23:59:59":this.getDate(0),this.returnDate();break;case"thisweek":this.sDate=this.showTimes?this.getDate(-this.getmonday())+" 00:00:00":this.getDate(-this.getmonday()),this.eDate=this.showTimes?this.getDate(6-this.getmonday())+" 23:59:59":this.getDate(6-this.getmonday()),this.returnDate();break;case"lastweek":this.sDate=this.showTimes?this.getDate(-this.getmonday()-7)+" 00:00:00":this.getDate(-this.getmonday()-7),this.eDate=this.showTimes?this.getDate(-this.getmonday()-1)+" 23:59:59":this.getDate(-this.getmonday()-1),this.returnDate();break;case"thismonth":this.sDate=this.showTimes?this.getMonth("s",0)+" 00:00:00":this.getMonth("s",0),this.eDate=this.showTimes?this.getMonth("e",0)+" 23:59:59":this.getMonth("e",0),this.returnDate();break;case"lastmonth":this.sDate=this.showTimes?this.getMonth("s",-1)+" 00:00:00":this.getMonth("s",-1),this.eDate=this.showTimes?this.getMonth("e",-1)+" 23:59:59":this.getMonth("e",-1),this.returnDate();break;case"thisyear":this.sDate=this.showTimes?this.getYears("s",0)+" 00:00:00":this.getYears("s",0),this.eDate=this.showTimes?this.getYears("e",-1)+" 23:59:59":this.getYears("e",-1),this.returnDate()}},returnDate(){this.$emit("get-day",{sday:this.sDate,eday:this.eDate})},init(){if(this.defaultId){let e=this.quickDate[this.defaultId-1];this.change(e.key,this.defaultId-1)}}},mounted(){this.init()}},s=a(24),r=Object(s.a)(i,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._l(e.quickDate,function(t,i){return a("el-button",{key:t.id,class:{btn_active:t.isActive},attrs:{size:"small",plain:!0,type:"primary"},on:{click:function(a){return e.change(t.key,i)}}},[e._v(e._s(e.LANG[t.text]||t.text))])}),e._v(" "),a("span",{staticStyle:{display:"none"}},[e._v(e._s(e.isReset))])],2)},[],!1,null,null,null);t.a=r.exports},446:function(e,t,a){}}]);