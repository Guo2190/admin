(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{125:function(e,t,a){"use strict";a.r(t);var s=a(228),l=a(197),r=a(198),i={data:()=>({LANG:LANG,Sdate:{dateStart:"",dateEnd:""},tableUrl:"",columnsUrl:"",type:"search",formTitel:"",labelWidth:"90px",isEdit:{},formVisible:{state:!1},searchConfig:[{type:"quickDate",showTimes:!0},{prop:"user_type",value:"",type:"select",label:"体系",list:ARRAYS.users},{prop:"username",value:"",type:"text",label:"用户名"},{prop:"deal_category",value:"",type:"select",label:"交易类别",list:[{value:"",label:"全部",ifkey:"deal_type"},{value:"1",label:"收入",ifkey:"deal_type"},{value:"2",label:"支出",ifkey:"deal_type"},{value:"3",label:"额度转换",ifkey:"deal_type"}]},{prop:"deal_type",value:"",label:"交易类型",type:"select",list:[{value:"",label:"全部"}],ifKey:"deal_category",ifVal:""},{prop:"deal_type",value:"",label:"交易类型",type:"select",list:[],ifKey:"deal_category",ifVal:"2"},{prop:"deal_type",value:"",label:"交易类型",type:"select",list:[],ifKey:"deal_category",ifVal:"1"},{prop:"deal_type",value:"",label:"交易类型",type:"select",list:[],ifKey:"deal_category",ifVal:"3"},{type:"dateGroup",label:"交易时间",prop:[{prop:"start_time",value:"",label:""},{prop:"end_time",value:"",label:""}]}],baseUrl:"",sumShow:!1,allData:{page_money_sum:0,total_money_sum:0,total:0}}),components:{datepicker:s.a,tablegrid:l.a,formEdit:r.a},methods:{init(){this.columnsUrl="static/json/cash/fundDetails/columns.json",this.baseUrl=URL.api+ROUTES.GET.funds.flow,this.$route.query.username?(this.searchConfig[2].value=this.$route.query.username,this.tableUrl=URL.api+ROUTES.GET.funds.flow+"?username="+this.$route.query.username+"?start_time="+sessionStorage.dateTimeStart+"&date_to="+sessionStorage.dateTimeEnd):this.tableUrl=URL.api+ROUTES.GET.funds.flow+"?start_time="+sessionStorage.dateTimeStart+"&date_to="+sessionStorage.dateTimeEnd;let e=this;this.$.autoAjax("get",URL.api+ROUTES.GET.funds.flows,"",{ok:t=>{if(0==t.state&&t.data){let a=t.data,s=e.searchConfig[3].list;for(let t in a){if(1==a[t].id)for(let s in a[t].children)e.searchConfig[6].list.push({label:a[t].children[s].name,value:a[t].children[s].id});if(2==a[t].id)for(let s in a[t].children)e.searchConfig[5].list.push({label:a[t].children[s].name,value:a[t].children[s].id});if(3==a[t].id)for(let s in a[t].children)e.searchConfig[7].list.push({label:a[t].children[s].name,value:a[t].children[s].id});for(let e in s)s[e].label==a[t].name&&(s[e].value=a[t].id)}}},p:()=>{},error:e=>{console.log(e)}})},doQuery(e){this.tableUrl=this.baseUrl+this.addSearch(e.item)},resetForm(){this.tableUrl=this.baseUrl+"?start_time="+sessionStorage.dateTimeStart+"&date_to="+sessionStorage.dateTimeEnd},doHandle(e){switch(e.fn){case"openUserInformation":this.openUserInformation(e.row)}},openUserInformation(e){this.$router.push({path:"/memberManagement",query:{name:e.username}})},getTableData(e){if(this.sumShow=!1,this.allData={},e.allData&&e.allData.attributes&&e.allData.attributes.total>0){let t=e.allData.attributes;this.sumShow=!0;for(let e in t)this.allData[e]=t[e]}}},computed:{},mounted(){},created(){this.init()},activated(){this.$route.query.username&&(this.tableUrl=URL.api+ROUTES.GET.funds.flow+"?username="+this.$route.query.username)},deactivated(){this.$route.query.username=null}},o=a(24);var n=function(e){a(516)},d=Object(o.a)(i,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"fundDetails"}},[a("div",{staticClass:"search"},[a("formEdit",{attrs:{formTitel:e.formTitel,formVisible:e.formVisible,formConfig:e.searchConfig,type:e.type,showAdd:!1,labelWidth:e.labelWidth,isEdit:e.isEdit},on:{"do-query":e.doQuery,"reset-form":e.resetForm}})],1),e._v(" "),a("el-col",[a("tablegrid",{attrs:{columnsUrl:e.columnsUrl,tableIndex:!1,tableCheck:!1,tableUrl:e.tableUrl,getData:!0},on:{"get-table-data":e.getTableData,"do-handle":e.doHandle}},[e.sumShow?a("tr",{staticClass:"sumdiv ml20",attrs:{slot:"other",span:12},slot:"other"},[a("td",{attrs:{colspan:"15"}},[a("div",{staticClass:"cell"},[a("span",{staticClass:"font14 "},[e._v(e._s(e.LANG["金额小计"]||"金额小计")+" ")]),e._v(":"),a("span",{staticClass:"state_success font16"},[e._v(" "+e._s(e._f("formatMoney")(e.allData.page_money_sum)))]),e._v(" "),a("span",{staticClass:"font14 ml10 "},[e._v(e._s(e.LANG["金额总计"]||"金额总计")+" ")]),e._v(":"),a("span",{staticClass:"state_blue font16"},[e._v(" "+e._s(e._f("formatMoney")(e.allData.total_money_sum)))])])])]):e._e()])],1)],1)},[],!1,n,"data-v-7b11e759",null);t.default=d.exports},227:function(e,t,a){},228:function(e,t,a){"use strict";var s={data:()=>({LANG:LANG}),props:{label:String,Sdate:{type:Object,default:{date_from:"",date_to:""}}},methods:{changestart(){this.date_from=this.formatDate(this.date_from,"yyyy-MM-dd HH:mm:ss")},changeend(){if(""==this.Sdate.date_from&&this.$message.error(LANG["开始时间必需选择"]||"开始时间必需选择"),this.date_to=this.formatDate(this.Sdate.date_to,"yyyy-MM-dd HH:mm:ss"),!this.DateComparison(this.Sdate.date_from,this.Sdate.date_to)){this.$message.error(LANG["结束时间必需大于开始时间"]||"结束时间必需大于开始时间");let e=this;setTimeout(()=>{e.Sdate.date_to=""},3e3)}},formatDate(e,t){var a=new Date(e),s=function(e){return(e<10?"0":"")+e};return t.replace(/yyyy|MM|dd|HH|mm|ss/g,function(e){switch(e){case"yyyy":return s(a.getFullYear());case"MM":return s(a.getMonth()+1);case"mm":return s(a.getMinutes());case"dd":return s(a.getDate());case"HH":return s(a.getHours());case"ss":return s(a.getSeconds())}})},DateComparison(e,t){var a=new Date(e),s=new Date(t);return!(a.getTime()>s.getTime())}}},l=a(24);var r=function(e){a(227)},i=Object(l.a)(s,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"block"},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{attrs:{align:"left",type:"date",placeholder:e.LANG["选择日期"]||"选择日期","picker-options":e.pickerOptions,size:"small"},on:{change:e.changestart},model:{value:e.Sdate.date_from,callback:function(t){e.$set(e.Sdate,"date_from",t)},expression:"Sdate.date_from"}})],1),e._v(" "),a("el-col",{staticClass:"line",staticStyle:{"padding-left":"5px"},attrs:{span:2}},[e._v("-")]),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-date-picker",{attrs:{align:"left",type:"date",placeholder:e.LANG["选择日期"]||"选择日期","picker-options":e.pickerOptions,size:"small"},on:{change:e.changeend},model:{value:e.Sdate.date_to,callback:function(t){e.$set(e.Sdate,"date_to",t)},expression:"Sdate.date_to"}})],1)],1)},[],!1,r,"data-v-28b8676e",null);t.a=i.exports},516:function(e,t,a){}}]);