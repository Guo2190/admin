(window.webpackJsonp=window.webpackJsonp||[]).push([[102],{186:function(e,t,s){"use strict";s.r(t);var i=s(197),a=s(198),o=(s(13),s(201)),r={data:()=>({LANG:LANG,columnsUrl:"",tableUrl:"",searchConfig:[{prop:"username",value:"",type:"text",label:"用户名"},{prop:"balance",value:"",type:"text",label:"总额小于"},{prop:"over_day",value:"",type:"number",label:"超过几天没有登录",rules:[{require:!0,moreZero:!0,integer:!0}]}],type:"search",isEdit:{},labelWidth:"135px",formVisible:{state:!1},baseUrl:"",tabOperation:[{label:"批量停用",fn:"delMeg"},{label:"批量封号",fn:"sealMeg"}],updated:!1,confirmConfig:{state:!1,msg:"",fn:""}}),components:{tablegrid:i.a,formEdit:a.a,confirm:o.a},methods:{init(){this.columnsUrl="static/json/accoutManage/idleAccount/columns.json",this.tableUrl=URL.api+ROUTES.GET.unused.list,this.baseUrl=URL.api+ROUTES.GET.unused.list},doHandle(e){switch(this.updated=!1,this.nowId=e.row.id||-1,e.fn){case"openUserSet":this.openUserSet(e.row)}},openUserSet(e){this.$router.push({path:"/memberManagement",query:{name:e.name}})},doQuery(e){let t={};e.item.balance&&(t.balance=100*e.item.balance),e.item.over_day&&(t.over_day=e.item.over_day),e.item.username&&(t.username=e.item.username),this.tableUrl=this.baseUrl+this.addSearch(t)},resetForm(){this.tableUrl=this.baseUrl},doConfirm(e){this.updated=!1;let t=e.obj.map(function(e){return e.id}).join(",");switch(e.fn){case"delete":let s=URL.api+"/user/unused",i=t.split(",");this.$.autoAjax("patch",s,{ids:i},{ok:e=>{0==e.state?(this.$message.success(this.LANG["成功停用所选用户"]||"成功停用所选用户"),this.updated=!0):this.$message.error(this.LANG["批量停用失败"]||"批量停用失败")},p:()=>{},error:e=>{console.log(e)}}).catch(function(e){});break;case"seal":this.$.autoAjax("put",URL.api+ROUTES.PUT.user.setting,{ids:t,state:4},{ok:e=>{null!=e.state&&0==e.state&&0==e.state?(this.$message.success(this.LANG["闲置帐号封号成功"]||"闲置帐号封号成功"),this.updated=!0):this.$message.error(this.LANG["闲置帐号封号失败，请稍后重试"]||"闲置帐号封号失败，请稍后重试")},p:()=>{},error:e=>{console.log(e)}})}},delMeg(e){e.length>0&&(this.confirmConfig.state=!0,this.confirmConfig.msg=this.LANG["确定批量停用吗?"]||"确定批量停用吗?",this.confirmConfig.fn="delete",this.confirmConfig.obj=e)},sealMeg(e){e.length>0&&(this.confirmConfig.state=!0,this.confirmConfig.msg=this.LANG["确定批量封号吗?"]||"确定批量封号吗?",this.confirmConfig.fn="seal",this.confirmConfig.obj=e)},doOperation(e){switch(e.fn){case"delMeg":this.delMeg(e.rows);break;case"sealMeg":this.sealMeg(e.rows)}}},computed:{},mounted(){},created(){this.init()}},n=s(24);var l=function(e){s(487)},d=Object(n.a)(r,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"idleAccount"}},[s("formEdit",{attrs:{formVisible:e.formVisible,formConfig:e.searchConfig,type:e.type,labelWidth:e.labelWidth,isEdit:e.isEdit,showAdd:!1},on:{"do-query":e.doQuery,"reset-form":e.resetForm}}),e._v(" "),s("el-col",[s("tablegrid",{attrs:{columnsUrl:e.columnsUrl,tableUrl:e.tableUrl,tableCheck:!0,pageSet:!0,tabOperation:e.tabOperation,updated:e.updated},on:{"do-operation":e.doOperation,"do-handle":e.doHandle}})],1),e._v(" "),s("el-col",[s("confirm",{attrs:{confirmConfig:e.confirmConfig},on:{"do-confirm":e.doConfirm}})],1)],1)},[],!1,l,null,null);t.default=d.exports},487:function(e,t,s){}}]);