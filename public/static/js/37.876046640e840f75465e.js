(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{118:function(t,e,a){"use strict";a.r(e);var l=a(203),s=a(202),o=(a(209),{data:()=>({times:30,dialogVisible:!1,dialogTitle:"预设彩果",lottery_number:"",manual:"",updated:!1,time:null,end_time:""}),components:{tablegrid:s.a},props:{lotteryData:Object,columnsUrl:String,tableUrl:String},methods:{init(){let t=this;this.lottery_number="",this.$.autoAjax("get",URL.api+ROUTES.GET.timezone,"",{ok:e=>{if(0==e.state&&e.data){let a=e.data.time||"",l=e.data.zone||"",s=e.data.p||"";a=a.replace(/\+.*$/,"").replace(/T/," ");let o=new Date(a).valueOf();window.TIMEZONE=setInterval(function(){o+=1e3,t.time=l+" ( "+s+" ) "+t.getMyDate(o)},1e3)}},p:t=>{},error:t=>{console.log(t)}})},getMyDate(t){var e=new Date(t),a=e.getFullYear(),l=e.getMonth()+1,s=e.getDate(),o=e.getHours(),i=e.getMinutes(),r=e.getSeconds();return a+"-"+this.getzf(l)+"-"+this.getzf(s)+" "+this.getzf(o)+":"+this.getzf(i)+":"+this.getzf(r)},getzf:t=>(parseInt(t)<10&&(t="0"+t),t),doHandle(t){switch(t.fn){case"doEdit":this.doEdit(t)}},handleClose(){this.dialogVisible=!1},doEdit(t){this.lottery_number=t.row.lottery_number,this.dialogVisible=!0,this.manual=t.row.preset_code,this.end_time=t.row.official_time},submit(){this.updated=!1;let t={};t.id=this.lotteryData.lottery_type,t.lottery_number=this.lottery_number,t.preset_code=this.manual,""==t.preset_code||/^\d{1}(,\d{1})*$/.test(t.preset_code)?this.$.autoAjax("patch",URL.api+"/plottery/presetcode",t,{ok:t=>{0==t.state&&t.data&&(this.$message.success("预设彩果成功！"),this.dialogVisible=!1,this.updated=!0)},p:()=>{},error:t=>{this.dialogVisible=!1,this.$message.error(t.responseJSON.msg),this.updated=!0}}):(this.$message.error("请检查预设彩果的开奖号码格式和长度是否符合规则"),this.updated=!0)}},computed:{},mounted(){},created(){this.init()}}),i=a(10);var r=function(t){a(471)},n=Object(i.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"ZKCnote"}},[a("el-col",{staticClass:"mb20 pb",staticStyle:{"min-height":"500px"},attrs:{span:24}},[a("el-col",[a("tablegrid",{attrs:{columnsUrl:t.columnsUrl,tableUrl:t.tableUrl,showExport:!1,times:t.times,updated:t.updated,autoshowRefresh:!0,getData:!0},on:{"do-handle":t.doHandle}})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogVisible,size:"tiny","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-row",{attrs:{gutter:20}},[a("div",[a("span",{staticClass:"labelContent"},[t._v("彩种：")]),t._v(" "),a("el-tag",{attrs:{type:"gray"}},[t._v(t._s(t.lotteryData.lottery_name))])],1),t._v(" "),a("div",[a("span",{staticClass:"labelContent"},[t._v("彩期列表：")]),t._v(" "),a("el-tag",{attrs:{type:"success"}},[t._v(t._s(t.lottery_number))])],1),t._v(" "),a("div",[a("span",{staticClass:"labelContent"},[t._v("封盘时间：")]),a("span",[t._v(t._s(t.end_time))])]),t._v(" "),a("div",[a("span",{staticClass:"labelContent"},[t._v("当前时间：")]),a("span",[t._v(t._s(t.time))])]),t._v(" "),a("div",[a("span",{staticClass:"labelContent"},[t._v("预设彩果：")]),t._v(" "),a("el-input",{staticClass:"w60",staticStyle:{"max-width":"240px"},attrs:{size:"small",placeholder:"开奖号码请用英文逗号隔开"},model:{value:t.manual,callback:function(e){t.manual=e},expression:"manual"}})],1),t._v(" "),a("p",{staticClass:"font14 state_info pleft20"},[t._v("温馨提示：开奖号码必须是数字组成，且必须使用半角逗号隔开，格式如：5,4,6")])]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1)],1)},[],!1,r,null,null).exports,d={data:()=>({LANG:LANG,columnsUrl:"",tableUrl:"",lotteryData:{lottery_type:"",lottery_number:"",lottery_name:""},gameList:[]}),components:{formEdit:l.a,LotteryNote:n},methods:{init(){this.columnsUrl="static/json/lotteryNew/lotteryZKCprophesy/columns.json",this.$.autoAjax("get",URL.api+"/plottery/menu","",{ok:t=>{0==t.state&&t.data&&(this.gameList=t.data,this.lotteryData.lottery_type=t.data[0].lottery_type,this.lotteryData.lottery_name=t.data[0].lottery_name,this.tableUrl=URL.api+"/plottery/presetlist?id="+t.data[0].lottery_type)},p:()=>{},error:t=>{console.log(t)}})},doQuery(t){let e=t.item;e.id=this.lotteryData.lottery_type,this.tableUrl=URL.api+"/plottery/presetlist"+this.addSearch(e)},resetForm(){},handleClick(t){console.log(t),this.formReset=!0,this.lotteryData.lottery_type=t.name,this.lotteryData.lottery_name=t.label,this.tableUrl=URL.api+"/plottery/presetlist"+this.addSearch({id:t.name})},doHandle(){}},created:function(){this.init()}};var c=function(t){a(470)},p=Object(i.a)(d,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"w100",attrs:{id:"lotteryZKCprophesy"}},[a("el-card",[a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.lotteryData.lottery_type,callback:function(e){t.$set(t.lotteryData,"lottery_type",e)},expression:"lotteryData.lottery_type"}},t._l(t.gameList,function(t,e){return a("el-tab-pane",{key:e,attrs:{label:t.lottery_name,name:t.lottery_type}})}),1),t._v(" "),a("el-col",[a("LotteryNote",{attrs:{columnsUrl:t.columnsUrl,tableUrl:t.tableUrl,lotteryData:t.lotteryData}})],1)],1)],1)},[],!1,c,null,null);e.default=p.exports},470:function(t,e,a){},471:function(t,e,a){}}]);