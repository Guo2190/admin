(window.webpackJsonp=window.webpackJsonp||[]).push([[81],{130:function(e,t,i){"use strict";i.r(t);var a=i(197),s=i(198),l=i(201),o={data:()=>({LANG:LANG,tableUrl:"",columnsUrl:"",type:"default",formTitel:"",labelWidth:"90px",isEdit:{state:!1},formVisible:{state:!1},formType:"",formConfig:[{prop:"name",value:"",label:"文案名称",type:"text",rules:[{require:!0}]},{prop:"language_id",value:"",label:"语言",type:"select",list:[],propVal:"language_name",rules:[{require:!0}]},{prop:"content",value:"",type:"markdown",label:"活动内容",config:{maximumWords:500},rules:[{require:!0}]},{prop:"apply_to",value:"",label:"使用于",type:"select",list:ARRAYS.fileTypeUse,rules:[{require:!0}]}],searchConfig:[{prop:"name",value:"",label:"文案类型",type:"text",rules:[{require:!0}]},{prop:"language",value:"",label:"语言",type:"select",list:[{label:"中文",value:"1"},{label:"English",value:"2"}],rules:[{require:!0}]},{prop:"use_for",value:"",label:"使用于",type:"select",list:[{label:"线上入款",value:"1"},{label:"公司入款",value:"2"},{label:"微信入款",value:"3"},{label:"支付宝入款",value:"4"}],rules:[{require:!0}]},{prop:"status",value:"",label:"状态",type:"select",list:[{label:"启用",value:"enabled"},{label:"停用",value:"disabled"}],rules:[{require:!0}]}],editflag:!1,id:null,updated:!1,loading:!1,titleDetails:"",dialogTableVisible:!1,details:{},formLabelWidth:"100px",confirmConfig:{state:!1,msg:"",fn:"",obj:null}}),components:{tablegrid:a.a,formEdit:s.a,confirm:l.a},methods:{init(){this.tableUrl=URL.api+ROUTES.GET.copywriter.deposit,this.columnsUrl="/static/json/ADManage/depositCopy/columns.json";let e=URL.api+ROUTES.GET.langeages;this.$.autoAjax("get",e,"",{ok:e=>{e.data.forEach(e=>{this.formConfig[1].list.push({label:e.name.toString(),value:e.id.toString()})})},p:()=>{},error:e=>{console.log(e)}})},doHandle(e){switch(this.id=e.row.id,e.fn){case"doEnabled":this.doEnabled(e.row);break;case"doEdit":this.doEdit(e.row);break;case"doApption":this.doApption(e.row);break;case"doDel":this.doDel(e.row);break;case"doDisabled":this.doDisabled(e.row);break;case"doDetails":this.doDetails(e.row)}},AddNew(){this.formTitel="新增存款文案",this.formType="add",this.formVisible.state=!0},getForm(e){this.fullscreenLoading=!0,this.loading=!0,this.updated=!1;let t="";"edit"!=this.formType?(e.formObj.pf="pc",e.formObj.status="disabled",e.formObj.type="deposit",this.$.autoAjax("put",URL.api+ROUTES.POST.copywriter.deposit,e.formObj,{ok:i=>{i.data&&0==i.state?(this.$message.success(LANG["恭喜您，新增存款文案成功！"]||"恭喜您，新增存款文案成功！"),this.formType="",e.formObj="",this.loading=!1,this.updated=!0):0==i.data&&i.state>3&&(t=i.msg,this.$message.error(LANG[t]||t),this.loading=!1,this.updated=!1)},p:()=>{},error:e=>{console.log(e)}})):this.$http.put(URL.api+ROUTES.POST.copywriter.deposit+"?id="+this.id,e.formObj,URLCONFIG).then(i=>{i.data.data&&0==i.data.state?(this.$message.success(LANG["恭喜您，修改存款文案成功！"]||"恭喜您，修改存款文案成功！"),this.formType="",e.formObj="",this.loading=!1,this.updated=!0):0==i.data.data&&i.data.state>3&&(t=i.data.msg,this.$message.error(LANG[t]||t),this.loading=!1,this.updated=!1)})},doEnabled(e){this.loading=!0,this.updated=!1;let t=this.id;this.$.autoAjax("patch",URL.api+ROUTES.PATCH.copywriter.deposit.$(t),{status:"enabled",language_id:e.language_id,pf:e.pf,apply_to:e.apply_to},{ok:e=>{0==e.state?(this.$message.success(LANG["启用成功"]||"启用成功"),this.loading=!1,this.updated=!0):(this.$message.error(LANG["启用失败"]||"启用失败"),this.loading=!1,this.updated=!1)},p:()=>{},error:e=>{console.log(e)}})},doDisabled(e){this.loading=!0,this.updated=!1;let t=this.id;this.$.autoAjax("patch",URL.api+ROUTES.PATCH.copywriter.deposit.$(t),{status:"disabled",language_id:e.language_id,pf:e.pf,apply_to:e.apply_to},{ok:e=>{0==e.state?(this.$message.success(LANG["停用成功"]||"停用成功"),this.loading=!1,this.updated=!0):(this.$message.error(LANG["停用失败"]||"停用失败"),this.loading=!1,this.updated=!1)},p:()=>{},error:e=>{console.log(e)}})},doApption(e){this.loading=!0,this.updated=!1;let t=this.id;this.$.autoAjax("patch",URL.api+ROUTES.PATCH.copywriter.deposit.$(t),{approve_status:"applying",language_id:e.language_id,pf:e.pf,apply_to:e.apply_to},{ok:e=>{0==e.state&&e.data?(this.$message.success(LANG["申请成功"]||"申请成功"),this.loading=!1,this.updated=!0):(this.$message.error(LANG["申请失败"]||"申请失败"),this.loading=!1,this.updated=!1)},p:()=>{},error:e=>{console.log(e)}})},doEdit(e){this.formType="",this.formTitel="修改存款文案",setTimeout(()=>{this.formType="edit",FORMVAL(e,this.formConfig),this.isEdit.state=!0,this.formVisible.state=!0},500)},doDel(e){parseInt(e.id)&&(this.confirmConfig.state=!0,this.confirmConfig.msg=(LANG["确定删除"]||"确定删除")+'"'+e.name+'"'+(LANG["吗？"]||"吗？"),this.confirmConfig.fn="delete",this.confirmConfig.obj=e)},doConfirm(e){this.loading=!0,this.updated=!1;var t=this;switch(e.fn){case"delete":this.$.autoAjax("delete",URL.api+"/copywriter/deposit?id="+e.obj.id+"&pf="+e.obj.pf,"",{ok:e=>{0==e.state&&e.data?(this.$message.success(t.LANG["删除成功"]||"删除成功"),this.updated=!0):this.$message.error(t.LANG["删除失败，请稍后重试！"]||"删除失败，请稍后重试！"),this.loading=!1},p:()=>{},error:e=>{this.loading=!1,this.$message.error(t.LANG["删除失败，请稍后重试！"]||"删除失败，请稍后重试！")}})}},doDetails(e){e.type_id=e.type,this.nowId=e.id,this.titleDetails="《"+e.name+"》的详情",this.dialogTableVisible=!0,this.details=e;for(let t in e)this.details[t]=e[t]}},created(){this.init()}},d=i(24);var r=function(e){i(417)},n=Object(d.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"clearfix",attrs:{id:"depositCopy"}},[i("el-col",{staticClass:"pb",staticStyle:{"text-align":"right"}},[i("el-button",{staticClass:"btn_right",attrs:{size:"small",type:"primary"},domProps:{textContent:e._s(e.LANG["新增存款文案"]||"新增存款文案")},on:{click:e.AddNew}})],1),e._v(" "),i("el-col",[i("tablegrid",{attrs:{columnsUrl:e.columnsUrl,tableUrl:e.tableUrl,tableCheck:!1,tableIndex:!1,showRefresh:!0,updated:e.updated},on:{"do-handle":e.doHandle}})],1),e._v(" "),i("formEdit",{attrs:{formTitel:e.formTitel,formVisible:e.formVisible,formConfig:e.formConfig,type:e.type,labelWidth:e.labelWidth,isEdit:e.isEdit,formType:e.formType},on:{"get-form":e.getForm}}),e._v(" "),i("el-col",[i("el-dialog",{staticClass:"detail",attrs:{title:e.titleDetails,size:"tiny"},model:{value:e.dialogTableVisible,callback:function(t){e.dialogTableVisible=t},expression:"dialogTableVisible"}},[i("el-form",{attrs:{model:e.details}},[i("el-form-item",{attrs:{label:e.LANG["文案名称:"]||"文案名称:","label-width":e.formLabelWidth}},[i("span",[e._v(e._s(e.details.name))])]),e._v(" "),i("el-form-item",{attrs:{label:e.LANG["语言:"]||"语言:","label-width":e.formLabelWidth}},[i("p",{staticStyle:{width:"90%"}},[e._v(e._s(e.details.language_name))])]),e._v(" "),i("el-form-item",{attrs:{label:e.LANG["文案内容:"]||"文案内容:","label-width":e.formLabelWidth}},[i("div",{staticClass:"mark_waip",domProps:{innerHTML:e._s(e.details.content)}})]),e._v(" "),i("el-form-item",{attrs:{label:e.LANG["生成时间:"]||"生成时间:","label-width":e.formLabelWidth}},[i("span",[e._v(e._s(e.details.created))])])],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogTableVisible=!1}}},[e._v("关 闭")])],1)],1)],1),e._v(" "),i("confirm",{attrs:{confirmConfig:e.confirmConfig},on:{"do-confirm":e.doConfirm}})],1)},[],!1,r,null,null);t.default=n.exports},417:function(e,t,i){}}]);