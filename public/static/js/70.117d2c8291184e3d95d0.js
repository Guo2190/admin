(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{146:function(e,t,a){"use strict";a.r(t);var i=a(213),l=a(208),s=a(209),r={data(){const e=(e,t,a)=>{new Date(this.modeData.begin_time).getTime()>new Date(this.modeData.end_time).getTime()?a(new Error(LANG["开始时间不能大于结束时间"]||"开始时间不能大于结束时间")):a()};return{LANG:LANG,modeData:{arrList:[],name:"",type_id:"",title:"",begin_time:"",end_time:"",vipType:[],status:"enabled",description:"",cover:"",language_id:"",language_name:"",content:"",content2:"",fileList2:[],sort:"",open_mode:"",link:"",rule:{template_id:"",type:"",rule:[{prize:"",weight:""}],luckydrawCondition:[{luckydraw:[{total:"",times:""}],times:""},{luckydraw:[{total:"",times:""}],times:""},{luckydraw:[{total:"",times:""}],times:""},{luckydraw:[{total:"",times:""}],times:""},{luckydraw:[{total:"",times:""}],times:""}],limit_times:"",withdrawRequire:"",withdrawRequireVal:"",withdrawRequireVal1:"",member_level:"",issueTime:null,issue_cycle:"day",issueMode:"",game:[]},checkedDefut:[],gameSelect:[]},pcshow:!1,get:"",placename:"",tree:[],defaultProps:{children:"children",label:"label"},checkKeys:[],expandedKeys:[],modeDataCopy:{},type_idList:[],vipList:[],isIndeterminate:!0,checkList:[],seachData:{},languageList:[],uploadUrl:URL.rpi,keys:"images",imgInit:!1,rules:{name:[{required:!0,message:"请填写活动名称",trigger:"blur"}],type_id:[{required:!0,message:"请选择优惠类型",trigger:"change"}],language_id:[{required:!0,message:"请选择语言类型",trigger:"change"}],cover:[{required:!0,message:"请上传图片",trigger:"change"}],description:[{required:!0,message:"请输入活动描述",trigger:"blur"}],begin_time:[{required:!0,validator:e,trigger:"change"}],end_time:[{required:!0,validator:e,trigger:"change"}],"rule.issueTime":[{required:!0,message:"请填写发放时间",trigger:"blur"}],"rule.issueMode":[{required:!0,message:"请选择发放奖金方式",trigger:"change"}],"rule.withdrawRequire":[{required:!0,message:"请选择提款要求",trigger:"change"}],"rule.rule":[{validator:(e,t,a)=>{let i=this.modeData.rule.rule.every(e=>e.prize&&e.weight),l=this.modeData.rule.rule.map(e=>parseInt(e.weight)).reduce((e,t)=>e+t);i?i&&100!==l?a(new Error("权重相加应等于100")):a():a(new Error("请输入优惠规则"))},trigger:"change"}],checkedDefut:[{type:"array",required:!0,message:"请至少选择一个会员等级",trigger:"change"}],gameSelect:[{type:"array",required:!0,message:"请至少选择一个游戏范围",trigger:"change"}],"rule.type":[{required:!0,message:"请选择抽奖条件",trigger:"change"}],"rule.luckydrawCondition[0].luckydraw":[{validator:(e,t,a)=>{this.modeData.rule.luckydrawCondition[0].luckydraw.some(function(e){return e.total&&e.times})?a():a(new Error("请输入存款条件"))},trigger:"blur"}],title:[{required:!0,message:"请输入活动标题",trigger:"change"}],content:[{required:!0,message:"请输入优惠规则",trigger:"change"}]}}},components:{markdownEdit:i.a,upload:l.a,dateTimepPicker:s.a},methods:{init(){let e=this;this.modeData.begin_time=window.sessionStorage.sysTime+" 00:00:00",this.modeData.end_time=window.sessionStorage.sysTime+" 23:59:59",this.pcshow=!0;let t=this.$route.query;for(let e in t)this.seachData[e]=t[e];new Promise(function(t,a){let i=URL.api+"/user/levels";e.$http.get(i,URLCONFIG).then(a=>{let i=a.data.data;e.vipList=[];for(let t in i)e.vipList.push({label:i[t].name,value:i[t].id.toString(),disable:!0});t()}).catch(function(e){a(e)})}).then(function(){return new Promise(function(t,a){let i=URL.api+ROUTES.GET.games.list+"?debug=1&details=1";e.$http.get(i,URLCONFIG).then(a=>{t();let i=[];!function e(t,a){for(let i in t)a.push({id:parseInt(t[i].id),label:t[i].name,pids:t[i].pids}),t[i].children&&(a[i].children=[],e(t[i].children,a[i].children))}(a.data.data,i),e.tree=i})})}).then(function(){let t=URL.api+`/active/template/unique?template_id=${e.seachData.template_id}&&begin_time=${e.modeData.begin_time}&&end_time=${e.modeData.end_time}`;if(e.$http.get(t,URLCONFIG).then(t=>{let a=t.data.data;for(let t in a)e.vipList.forEach(e=>{e.value===a[t].id.toString()&&(e.disable=!1)})}).catch(function(e){}),"edit"===e.seachData.type){let t=URL.api+`/active/template.fix/${e.seachData.id}`;e.$http.get(t,URLCONFIG).then(t=>{if(0===t.data.state&&t.data.data){let a=t.data.data;e.modeData={arrList:[],name:a.name,type_id:a.type_id,title:a.title,begin_time:a.begin_time,end_time:a.end_time,day:a.day,vipType:[],money:a.money,status:a.status,description:a.description,language_id:a.language_id,language_name:a.language_name,content:a.content,checkedDefut:a.rule.member_level[0].id.toString(),cover:a.cover,gameSelect:[],rule:{rule:[],type:a.rule.luckydraw_condition.type,limit_times:a.rule.limit_times.toString(),withdrawRequire:a.rule.withdraw_require,issueTime:a.rule.issue_time,issue_cycle:a.rule.issue_cycle,issueMode:a.rule.issue_mode,game:[],luckydrawCondition:[{luckydraw:[{total:"",times:""}],times:""},{luckydraw:[{total:"",times:""}],times:""},{luckydraw:[{total:"",times:""}],times:""},{luckydraw:[{total:"",times:""}],times:""},{luckydraw:[{total:"",times:""}],times:""}]}};let i=t.data.data.rule.member_level;for(let t in i)e.vipList.forEach(e=>{e.value===i[t].id.toString()&&(e.disable=!1)}),e.modeData.checkedDefut.push(i[t].name);e.modeData.arrList.push(a.cover),a.rule.limit_times>0?e.get="1":(e.get="2",e.modeData.rule.limit_times=null);let l=a.rule.luckydraw_condition.type-1;a.rule.luckydraw_condition.luckydraw.forEach(e=>{e.total=(e.total/100).toString(),e.times=e.times.toString()}),4===l?e.modeData.rule.luckydrawCondition[l].times=a.rule.luckydraw_condition.times:e.modeData.rule.luckydrawCondition[l].luckydraw=a.rule.luckydraw_condition.luckydraw,a.rule.rule.forEach(function(t,a){let i={prize:(t.prize/100).toString(),weight:t.weight.toString()};e.modeData.rule.rule.push(i)}),"bet"===a.rule.withdraw_require?e.modeData.rule.withdrawRequireVal1=a.rule.withdraw_require_val/100:"times"===a.rule.withdraw_require&&(e.modeData.rule.withdrawRequireVal=a.rule.withdraw_require_val),a.rule.game.forEach(t=>{0===parseInt(t.lg_id)?e.checkKeys.push(parseInt(t.type)):e.checkKeys.push(parseInt(t.lg_id))}),e.$refs.tree.setCheckedKeys(e.checkKeys)}})}}),this.placename=this.seachData.label,this.$http.get(URL.api+ROUTES.GET.activity.types+"?page=1&page_size=100",URLCONFIG).then(e=>{if(0===e.data.state&&e.data.data){this.type_idList=[];let t=e.data.data||[];for(let e in t)this.type_idList.push({label:t[e].name,value:t[e].id.toString()})}});let a=URL.api+ROUTES.GET.langeages;this.$http.get(a,URLCONFIG).then(e=>{this.languageList=[];let t=e.data.data;for(let e in t)this.languageList.push({label:t[e].name,value:t[e].id.toString()});this.modeData.language_id="1"})},handleCheckAllChange(e){let t=[];for(let e in this.vipList)t[e]=this.vipList[e].label;this.modeData.checkedDefut=e.target.checked?t:[],this.isIndeterminate=!1},handleCheckedDefutChange(e){let t=e.length;this.checkAll=t===this.vipList.length,this.isIndeterminate=t>0&&t<this.vipList.length},doSubmit(e){let t=this;this.$refs.form.validate(a=>{if(!a)return!1;{let a=[];this.modeData.checkedDefut.forEach(function(e){t.vipList.forEach(function(t){t.label===e&&a.push(t)})});let i=a.map(function(e){return e.value}).join(","),l=this.languageList.find(function(e){return e.value=t.modeData.language_id}),s=this.modeData.rule.rule.filter(function(e){return e.weight&&e.prize});s.forEach(function(e){e.prize=100*e.prize});let r=this.modeData.rule.type,o=[];"5"!==r&&(o=this.modeData.rule.luckydrawCondition[r-1].luckydraw.filter(function(e){return e.times&&e.total})).forEach(e=>{e.total=100*e.total});let n=[];this.modeData.gameSelect.filter(function(e){return 0===e.children.length}).forEach(function(e){let t=e.pids.split("|"),a=null,i=null;t.length>1?(a=t.shift(),i=t.pop()):(a=t[0],i=0),n.push({type:a,lg_id:i})});let d=null;d="times"===this.modeData.rule.withdrawRequire?parseInt(this.modeData.rule.withdrawRequireVal):"bet"===this.modeData.rule.withdrawRequire?100*parseInt(this.modeData.rule.withdrawRequireVal1):0;let u={name:this.modeData.name,type_id:this.modeData.type_id,title:this.modeData.title,begin_time:this.modeData.begin_time,end_time:this.modeData.end_time,description:this.modeData.description,cover:this.modeData.cover,language_id:parseInt(this.modeData.language_id),language_name:l?l.label:"",content:this.modeData.content,status:this.modeData.status,rule_type:"raffle",rule:{template_id:this.modeData.rule.template_id?this.modeData.rule.template_id:4,rule:s,luckydraw_condition:{type:this.modeData.rule.type,luckydraw:o||[],times:this.modeData.rule.luckydrawCondition[4].times},limit_times:this.modeData.rule.limit_times?this.modeData.rule.limit_times:0,withdraw_require:this.modeData.rule.withdrawRequire,withdraw_require_val:d,member_level:i,issue_time:parseInt(this.modeData.rule.issueTime),issue_cycle:this.modeData.rule.issue_cycle,issue_mode:this.modeData.rule.issueMode,game:n}};if("add"===e){let e=URL.api+"/active/template.fix";this.$http.put(e,u,URLCONFIG).then(e=>{if(0===e.data.state){let e=LANG["添加成功"]||"添加成功";this.$message.success(e),setTimeout(function(){t.$router.push({path:"addActiveSet"})},1e3)}else if(e.data.state>3)this.$message.error(e.data.message);else{let e=LANG["修改失败"]||"修改失败";this.$message.error(e)}})}else{let e=URL.api+`/active/template.fix/${this.seachData.id}`;this.$http.put(e,u,URLCONFIG).then(e=>{if(0===e.data.state){let e=LANG["修改成功"]||"修改成功";this.$message.success(e),setTimeout(function(){t.$router.push({path:"activeSet"})},1e3)}else if(e.data.state>3)this.$message.error(e.data.message);else{let e=LANG["修改失败"]||"修改失败";this.$message.error(e)}})}}})},goBack(e){"add"==e?this.$router.push({path:"addActiveSet"}):this.$router.push({path:"activeSet"})},doSaveFile(e){this.modeData.cover=e.url[0]},changeLanguage(e){this.languageList},addRule(e,t){this.modeData.rule.luckydrawCondition[t].luckydraw.push({total:"",times:""})},deleteRule(e,t){this.modeData.rule.luckydrawCondition[t].luckydraw.splice(e,1)},addPrizeRule(e,t){this.modeData.rule.rule.push({prize:"",weight:""})},deletePrizeRule(e,t){this.modeData.rule.rule.splice(e,1)},handleCheckChange(){this.modeData.gameSelect=this.$refs.tree.getCheckedNodes(),this.$refs.form.validateField("gameSelect")},limitChange(){"2"===this.get&&(this.modeData.rule.limit_times=""),this.$refs.form.validateField("rule.limit_times")},validatorNumber(e,t,a){t?/^[0-9]+(.[0-9]{1,2})?$/.test(t.toString().replace(/^\s+|\s+$/,""))?t<0?a(new Error(LANG["输入金额必需大于0"]||"输入金额必需大于0")):t>9999999?a(new Error(LANG["输入金额不能大于9999999"]||"输入金额不能大于9999999")):a():isNaN(t)||0==!!t.replace(/^\s+|\s+$/,"")?a(new Error(LANG["请输入数字值"]||"请输入数字值")):a(new Error(LANG["小数点后不超过两位"]||"小数点后不超过两位")):a(new Error(LANG["请输入数字值"]||"请输入数字值"))},validatorLimitNumber(e,t,a){"1"===this.get?this.validatorNumber.apply(this,arguments):a()},validatorTimeNumber(e,t,a){"times"===this.modeData.rule.withdrawRequire?this.validatorNumber.apply(this,arguments):a()},validatorBetNumber(e,t,a){"bet"===this.modeData.rule.withdrawRequire?this.validatorNumber.apply(this,arguments):a()},validatorDepositNumber(e,t,a){"1"===this.modeData.rule.type?this.validatorNumber.apply(this,arguments):a()},validatorBettingNumber(e,t,a){"2"===this.modeData.rule.type?this.validatorNumber.apply(this,arguments):a()},validatorLoseNumber(e,t,a){"3"===this.modeData.rule.type?this.validatorNumber.apply(this,arguments):a()},validatorWinNumber(e,t,a){"4"===this.modeData.rule.type?this.validatorNumber.apply(this,arguments):a()},validatorNoConditionNumber(e,t,a){"5"===this.modeData.rule.type?this.validatorNumber.apply(this,arguments):a()},ruleBlur(){this.$refs.form.validateField("rule.rule")},typeChange(){this.$refs.depositiInput&&Array.isArray(this.$refs.depositiInput)?this.$refs.depositiInput.forEach(e=>{e.handleBlur()}):this.$refs.depositiInput.handleBlur(),this.$refs.noConditionInput.handleBlur()},withdrawRequireChange(){this.$refs.form.validateField("rule.withdrawRequireVal"),this.$refs.form.validateField("rule.withdrawRequireVal1")},timeChange(e){setTimeout(()=>{this.$refs.form.validateField("begin_time"),this.$refs.form.validateField("end_time")})}},computed:{},activated(){this.init()},beforeRouteLeave(e,t,a){a(!0),this.$refs.form.resetFields(),this.checkKeys=[],this.modeData.description="",this.modeData.arrList=[],this.pcshow=!1}},o=a(10);var n=function(e){a(435)},d=Object(o.a)(r,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"activeMode"}},[a("el-col",{staticClass:"activeModeForm",attrs:{span:14,offset:5}},[a("el-form",{ref:"form",staticClass:"mt20",attrs:{model:e.modeData,rules:e.rules,"label-width":"110px"}},[a("el-col",{staticClass:"Layout",attrs:{span:24}},[a("h3",{staticClass:"tCent",domProps:{textContent:e._s(e.LANG["规则设置"]||"规则设置")}}),e._v(" "),a("el-form-item",{attrs:{label:"优惠活动名称",prop:"name"}},[a("el-input",{staticClass:"w80",attrs:{placeholder:e.placename},model:{value:e.modeData.name,callback:function(t){e.$set(e.modeData,"name",t)},expression:"modeData.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"优惠类型",prop:"type_id"}},[a("el-select",{staticClass:"w80",attrs:{placeholder:"请选择类型"},model:{value:e.modeData.type_id,callback:function(t){e.$set(e.modeData,"type_id",t)},expression:"modeData.type_id"}},e._l(e.type_idList,function(e,t){return a("el-option",{key:e.index,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{staticClass:"w80",attrs:{label:"有效时间",required:""}},[a("el-col",{staticClass:"w30"},[a("el-form-item",{attrs:{prop:"begin_time"}},[a("dateTimePicker",{attrs:{datekey:"begin_time"},on:{"get-val":e.timeChange},model:{value:e.modeData.begin_time,callback:function(t){e.$set(e.modeData,"begin_time",t)},expression:"modeData.begin_time"}})],1)],1),e._v(" "),a("div",{staticClass:"w20 tCent",staticStyle:{float:"left"}},[e._v(" - ")]),e._v(" "),a("el-col",{staticClass:"w30"},[a("el-form-item",{attrs:{prop:"end_time"}},[a("dateTimePicker",{attrs:{datekey:"end_time"},on:{"get-val":e.timeChange},model:{value:e.modeData.end_time,callback:function(t){e.$set(e.modeData,"end_time",t)},expression:"modeData.end_time"}})],1)],1)],1),e._v(" "),"add"==e.seachData.type?a("el-form-item",{attrs:{label:"发放奖金",prop:"rule.issueMode"}},[a("el-radio-group",{model:{value:e.modeData.rule.issueMode,callback:function(t){e.$set(e.modeData.rule,"issueMode",t)},expression:"modeData.rule.issueMode"}},[a("el-radio",{staticClass:"radio",attrs:{label:"auto"}},[a("span",{domProps:{textContent:e._s(e.LANG["自动发放"]||"自动发放")}})]),e._v(" "),a("el-radio",{staticClass:"radio",attrs:{label:"manual"}},[a("span",{domProps:{textContent:e._s(e.LANG["手动发放"]||"手动发放")}})])],1)],1):e._e(),e._v(" "),a("el-form-item",{ref:"rule",staticClass:"w90",attrs:{label:"优惠规则",required:"",prop:"rule.rule"}},[a("el-col",{attrs:{span:24}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("span",{domProps:{textContent:e._s(e.LANG["优惠金额"]||"优惠金额")}})]),e._v(" "),a("el-col",{attrs:{span:9}},[a("span",{domProps:{textContent:e._s(e.LANG["权重"]||"权重")}})])],1),e._v(" "),e._l(e.modeData.rule.rule,function(t,i){return a("div",[a("div",{staticClass:"clear",staticStyle:{"padding-bottom":"15px"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"rule.rule["+i+"].prize",rules:[{validator:e.validatorNumber,trigger:"blur"}]}},[a("span",[e._v(e._s(i))]),e._v(" "),a("el-input",{staticClass:"intW",on:{blur:e.ruleBlur},model:{value:t.prize,callback:function(a){e.$set(t,"prize",a)},expression:"item.prize"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{prop:"rule.rule["+i+"].weight",rules:[{validator:e.validatorNumber,trigger:"blur"}]}},[a("el-input",{staticClass:"intW",on:{blur:e.ruleBlur},model:{value:t.weight,callback:function(a){e.$set(t,"weight",a)},expression:"item.weight"}}),e._v(" "),a("i",0===i?{staticClass:"el-icon-plus",staticStyle:{padding:"10px",background:"#ccc"},on:{click:function(t){return e.addPrizeRule(i,0)}}}:{staticClass:"el-icon-minus",staticStyle:{padding:"10px",background:"#ccc"},on:{click:function(t){return e.deletePrizeRule(i,0)}}})],1)],1)],1)])})],2)],1),e._v(" "),a("el-form-item",{staticClass:"w100",attrs:{label:"抽奖条件",prop:"rule.type"}},[a("el-radio-group",{staticClass:"radio-group",on:{change:function(t){return e.typeChange()}},model:{value:e.modeData.rule.type,callback:function(t){e.$set(e.modeData.rule,"type",t)},expression:"modeData.rule.type"}},[a("el-radio",{staticClass:"lottery-condition radio",attrs:{label:"1"}},[a("span",{domProps:{textContent:e._s(e.LANG["以存款为条件"]||"以存款为条件")}}),e._v(" "),e._l(e.modeData.rule.luckydrawCondition[0].luckydraw,function(t,i){return a("div",{staticClass:"clear",staticStyle:{"padding-bottom":"15px"}},[a("el-col",{attrs:{span:10}},[a("span",{staticClass:"ml20",domProps:{textContent:e._s(e.LANG["单日存款累计"]||"单日存款累计")}}),e._v(" "),a("el-form-item",{staticClass:"to-inline-block",attrs:{prop:"rule.luckydrawCondition[0].luckydraw["+i+"].total",rules:[{validator:e.validatorDepositNumber,trigger:"blur"}]}},[a("el-input",{ref:"depositiInput",refInFor:!0,staticClass:"intW",attrs:{disabled:"1"!==e.modeData.rule.type},model:{value:t.total,callback:function(a){e.$set(t,"total",a)},expression:"item.total"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:14}},[a("span",{staticClass:"ml20",domProps:{textContent:e._s(e.LANG["抽奖机会"]||"抽奖机会")}}),e._v(" "),a("el-form-item",{staticClass:"to-inline-block",attrs:{prop:"rule.luckydrawCondition[0].luckydraw["+i+"].times",rules:[{validator:e.validatorDepositNumber,trigger:"blur"}]}},[a("el-input",{ref:"depositiInput",refInFor:!0,staticClass:"intW",attrs:{disabled:"1"!==e.modeData.rule.type},model:{value:t.times,callback:function(a){e.$set(t,"times",a)},expression:"item.times"}})],1),e._v(" "),a("span",{domProps:{textContent:e._s(e.LANG["次"]||"次")}}),e._v(" "),a("i",0===i?{staticClass:"el-icon-plus",staticStyle:{padding:"10px",background:"#ccc"},on:{click:function(t){return e.addRule(i,0)}}}:{staticClass:"el-icon-minus",staticStyle:{padding:"10px",background:"#ccc"},on:{click:function(t){return e.deleteRule(i,0)}}})],1)],1)})],2),e._v(" "),a("el-radio",{staticClass:"lottery-condition radio",attrs:{label:"2"}},[a("span",{domProps:{textContent:e._s(e.LANG["以投注为条件"]||"以投注为条件")}}),e._v(" "),e._l(e.modeData.rule.luckydrawCondition[1].luckydraw,function(t,i){return a("div",{staticClass:"clear",staticStyle:{"padding-bottom":"15px"}},[a("el-col",{attrs:{span:10}},[a("span",{staticClass:"ml20",domProps:{textContent:e._s(e.LANG["单日投注累计"]||"单日投注累计")}}),e._v(" "),a("el-form-item",{staticClass:"to-inline-block",attrs:{prop:"rule.luckydrawCondition[1].luckydraw["+i+"].total",rules:[{validator:e.validatorBettingNumber,trigger:"blur"}]}},[a("el-input",{ref:"depositiInput",refInFor:!0,staticClass:"intW",attrs:{type:"number",disabled:"2"!==e.modeData.rule.type},model:{value:t.total,callback:function(a){e.$set(t,"total",a)},expression:"item.total"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:14}},[a("span",{staticClass:"ml20",domProps:{textContent:e._s(e.LANG["抽奖机会"]||"抽奖机会")}}),e._v(" "),a("el-form-item",{staticClass:"to-inline-block",attrs:{prop:"rule.luckydrawCondition[1].luckydraw["+i+"].total",rules:[{validator:e.validatorBettingNumber,trigger:"blur"}]}},[a("el-input",{ref:"depositiInput",refInFor:!0,staticClass:"intW",attrs:{type:"number",disabled:"2"!==e.modeData.rule.type},model:{value:t.times,callback:function(a){e.$set(t,"times",a)},expression:"item.times"}})],1),e._v(" "),a("span",{domProps:{textContent:e._s(e.LANG["次"]||"次")}}),e._v(" "),a("i",0===i?{staticClass:"el-icon-plus",staticStyle:{padding:"10px",background:"#ccc"},on:{click:function(t){return e.addRule(i,1)}}}:{staticClass:"el-icon-minus",staticStyle:{padding:"10px",background:"#ccc"},on:{click:function(t){return e.deleteRule(i,1)}}})],1)],1)})],2),e._v(" "),a("el-radio",{staticClass:"lottery-condition radio",attrs:{label:"3"}},[a("span",{domProps:{textContent:e._s(e.LANG["以输钱为条件"]||"以输钱为条件")}}),e._v(" "),e._l(e.modeData.rule.luckydrawCondition[2].luckydraw,function(t,i){return a("div",{staticClass:"clear",staticStyle:{"padding-bottom":"15px"}},[a("el-col",{attrs:{span:10}},[a("span",{staticClass:"ml20",domProps:{textContent:e._s(e.LANG["单日输钱累计"]||"单日输钱累计")}}),e._v(" "),a("el-form-item",{staticClass:"to-inline-block",attrs:{prop:"rule.luckydrawCondition[2].luckydraw["+i+"].total",rules:[{validator:e.validatorLoseNumber,trigger:"blur"}]}},[a("el-input",{ref:"depositiInput",refInFor:!0,staticClass:"intW",attrs:{disabled:"3"!==e.modeData.rule.type},model:{value:t.total,callback:function(a){e.$set(t,"total",a)},expression:"item.total"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:14}},[a("span",{staticClass:"ml20",domProps:{textContent:e._s(e.LANG["抽奖机会"]||"抽奖机会")}}),e._v(" "),a("el-form-item",{staticClass:"to-inline-block",attrs:{prop:"rule.luckydrawCondition[2].luckydraw["+i+"].total",rules:[{validator:e.validatorLoseNumber,trigger:"blur"}]}},[a("el-input",{ref:"depositiInput",refInFor:!0,staticClass:"intW",attrs:{disabled:"3"!==e.modeData.rule.type},model:{value:t.times,callback:function(a){e.$set(t,"times",a)},expression:"item.times"}})],1),e._v(" "),a("span",{domProps:{textContent:e._s(e.LANG["次"]||"次")}}),e._v(" "),a("i",0===i?{staticClass:"el-icon-plus",staticStyle:{padding:"10px",background:"#ccc"},on:{click:function(t){return e.addRule(i,2)}}}:{staticClass:"el-icon-minus",staticStyle:{padding:"10px",background:"#ccc"},on:{click:function(t){return e.deleteRule(i,2)}}})],1)],1)})],2),e._v(" "),a("el-radio",{staticClass:"lottery-condition radio",attrs:{label:"4"}},[a("span",{domProps:{textContent:e._s(e.LANG["以赢钱为条件"]||"以赢钱为条件")}}),e._v(" "),e._l(e.modeData.rule.luckydrawCondition[3].luckydraw,function(t,i){return a("div",{staticClass:"clear",staticStyle:{"padding-bottom":"15px"}},[a("el-col",{attrs:{span:10}},[a("span",{staticClass:"ml20",domProps:{textContent:e._s(e.LANG["单日赢钱累计"]||"单日赢钱累计")}}),e._v(" "),a("el-form-item",{staticClass:"to-inline-block",attrs:{prop:"rule.luckydrawCondition[3].luckydraw["+i+"].total",rules:[{validator:e.validatorWinNumber,trigger:"blur"}]}},[a("el-input",{ref:"depositiInput",refInFor:!0,staticClass:"intW",attrs:{type:"number",disabled:"4"!==e.modeData.rule.type},model:{value:t.total,callback:function(a){e.$set(t,"total",a)},expression:"item.total"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:14}},[a("span",{staticClass:"ml20",domProps:{textContent:e._s(e.LANG["抽奖机会"]||"抽奖机会")}}),e._v(" "),a("el-form-item",{staticClass:"to-inline-block",attrs:{prop:"rule.luckydrawCondition[3].luckydraw["+i+"].total",rules:[{validator:e.validatorWinNumber,trigger:"blur"}]}},[a("el-input",{ref:"depositiInput",refInFor:!0,staticClass:"intW",attrs:{disabled:"4"!==e.modeData.rule.type},model:{value:t.times,callback:function(a){e.$set(t,"times",a)},expression:"item.times"}})],1),e._v(" "),a("span",{domProps:{textContent:e._s(e.LANG["次"]||"次")}}),e._v(" "),a("i",0===i?{staticClass:"el-icon-plus",staticStyle:{padding:"10px",background:"#ccc"},on:{click:function(t){return e.addRule(i,3)}}}:{staticClass:"el-icon-minus",staticStyle:{padding:"10px",background:"#ccc"},on:{click:function(t){return e.deleteRule(i,3)}}})],1)],1)})],2),e._v(" "),a("el-radio",{staticClass:"radio",attrs:{label:"5"}},[a("span",{domProps:{textContent:e._s(e.LANG["无条件"]||"无条件")}}),e._v(" "),a("span",{staticClass:"ml20",domProps:{textContent:e._s(e.LANG["抽奖机会"]||"抽奖机会")}}),e._v(" "),a("el-form-item",{staticStyle:{display:"inline-block"},attrs:{prop:"rule.luckydrawCondition[4].times",rules:[{validator:e.validatorNoConditionNumber,trigger:"blur"}]}},[a("el-input",{ref:"noConditionInput",staticClass:"intW",attrs:{type:"number",disabled:"5"!==e.modeData.rule.type},model:{value:e.modeData.rule.luckydrawCondition[4].times,callback:function(t){e.$set(e.modeData.rule.luckydrawCondition[4],"times",t)},expression:"modeData.rule.luckydrawCondition[4].times"}})],1),e._v(" "),a("span",{domProps:{textContent:e._s(e.LANG["次"]||"次")}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"领取限制"}},[a("el-radio-group",{on:{change:function(t){return e.limitChange()}},model:{value:e.get,callback:function(t){e.get=t},expression:"get"}},[a("el-radio",{staticClass:"radio",attrs:{label:"1"}},[a("span",{domProps:{textContent:e._s(e.LANG["限定次数"]||"限定次数")}}),e._v(" "),a("el-form-item",{staticStyle:{display:"inline-block"},attrs:{prop:"rule.limit_times",rules:[{validator:e.validatorLimitNumber,trigger:"blur"}]}},[a("el-input",{staticClass:"intW",model:{value:e.modeData.rule.limit_times,callback:function(t){e.$set(e.modeData.rule,"limit_times",t)},expression:"modeData.rule.limit_times"}})],1)],1),e._v(" "),a("el-radio",{staticClass:"radio",attrs:{label:"2"}},[a("span",{domProps:{textContent:e._s(e.LANG["无限定次数"]||"无限定次数")}})])],1)],1),e._v(" "),a("el-form-item",{staticClass:"w80",attrs:{label:"有效游戏范围",prop:"gameSelect"}},[a("el-tree",{ref:"tree",attrs:{data:e.tree,"show-checkbox":"",props:e.modeData.defaultProps,"node-key":"id","default-checked-keys":e.checkKeys,"default-expanded-keys":e.expandedKeys},on:{"check-change":e.handleCheckChange}})],1),e._v(" "),a("el-form-item",{attrs:{label:"有效会员等级",prop:"checkedDefut"}},[a("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.modeData.vipType,callback:function(t){e.$set(e.modeData,"vipType",t)},expression:"modeData.vipType"}},[e._v("全部\n                    ")]),e._v(" "),a("div",{staticStyle:{margin:"15px 0"}}),e._v(" "),a("el-checkbox-group",{on:{change:e.handleCheckedDefutChange},model:{value:e.modeData.checkedDefut,callback:function(t){e.$set(e.modeData,"checkedDefut",t)},expression:"modeData.checkedDefut"}},e._l(e.vipList,function(e,t){return a("el-checkbox",{key:t,attrs:{label:e.label,name:"type"}})}),1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"add"==e.seachData.type,expression:"seachData.type=='add'"}],attrs:{label:"发放时间",required:""}},[a("span",{domProps:{textContent:e._s(e.LANG["第"]||"第")}}),e._v(" "),a("el-form-item",{staticClass:"to-inline-block",attrs:{prop:"rule.issueTime",rules:[{validator:e.validatorNumber,trigger:"blur"}]}},[a("el-input",{staticClass:"intW",model:{value:e.modeData.rule.issueTime,callback:function(t){e.$set(e.modeData.rule,"issueTime",t)},expression:"modeData.rule.issueTime"}})],1),e._v(" "),a("span",{domProps:{textContent:e._s(e.LANG["天发放"]||"天发放")}})],1),e._v(" "),a("el-form-item",{attrs:{label:"提款要求",prop:"rule.withdrawRequire"}},[a("el-radio-group",{on:{change:e.withdrawRequireChange},model:{value:e.modeData.rule.withdrawRequire,callback:function(t){e.$set(e.modeData.rule,"withdrawRequire",t)},expression:"modeData.rule.withdrawRequire"}},[a("el-radio",{staticClass:"radio",attrs:{label:"times"}},[a("span",{domProps:{textContent:e._s(e.LANG["倍数"]||"倍数")}}),e._v(" "),a("el-form-item",{staticStyle:{display:"inline-block"},attrs:{prop:"rule.withdrawRequireVal",rules:[{validator:e.validatorTimeNumber,trigger:"blur"}]}},[a("el-input",{staticClass:"intW",model:{value:e.modeData.rule.withdrawRequireVal,callback:function(t){e.$set(e.modeData.rule,"withdrawRequireVal",t)},expression:"modeData.rule.withdrawRequireVal"}})],1)],1),e._v(" "),a("el-radio",{staticClass:"radio",attrs:{label:"bet"}},[a("span",{domProps:{textContent:e._s(e.LANG["固定投注流水"]||"固定投注流水")}}),e._v(" "),a("el-form-item",{staticStyle:{display:"inline-block"},attrs:{prop:"rule.withdrawRequireVal1",rules:[{validator:e.validatorBetNumber,trigger:"blur"}]}},[a("el-input",{staticClass:"intW",model:{value:e.modeData.rule.withdrawRequireVal1,callback:function(t){e.$set(e.modeData.rule,"withdrawRequireVal1",t)},expression:"modeData.rule.withdrawRequireVal1"}})],1)],1),e._v(" "),a("el-radio",{staticClass:"radio",attrs:{label:"no"}},[a("span",{domProps:{textContent:e._s(e.LANG["无取款要求"]||"无取款要求")}})])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("el-radio",{staticClass:"radio",attrs:{label:"enabled"},model:{value:e.modeData.status,callback:function(t){e.$set(e.modeData,"status",t)},expression:"modeData.status"}},[a("span",{domProps:{textContent:e._s(e.LANG["启用"]||"启用")}})]),e._v(" "),a("el-radio",{staticClass:"radio",attrs:{label:"disabled"},model:{value:e.modeData.status,callback:function(t){e.$set(e.modeData,"status",t)},expression:"modeData.status"}},[a("span",{domProps:{textContent:e._s(e.LANG["停用"]||"停用")}})])],1)],1),e._v(" "),a("el-col",{staticClass:"Layout",attrs:{span:24}},[a("h3",{staticClass:"tCent",domProps:{textContent:e._s(e.LANG["内容设置"]||"内容设置")}}),e._v(" "),a("el-form-item",{attrs:{label:"优惠活动标题",prop:"title"}},[a("el-input",{staticClass:"w80",model:{value:e.modeData.title,callback:function(t){e.$set(e.modeData,"title",t)},expression:"modeData.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"语言",prop:"language_id"}},[a("el-select",{staticClass:"w80",attrs:{placeholder:"请选择类型",disabled:""},on:{change:e.changeLanguage},model:{value:e.modeData.language_id,callback:function(t){e.$set(e.modeData,"language_id",t)},expression:"modeData.language_id"}},e._l(e.languageList,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"优惠活动描述",prop:"description"}},[a("el-input",{staticClass:"w80",attrs:{type:"textarea"},model:{value:e.modeData.description,callback:function(t){e.$set(e.modeData,"description",t)},expression:"modeData.description"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"图片上传",prop:"cover"}},[a("el-input",{staticStyle:{display:"none"},model:{value:e.modeData.cover,callback:function(t){e.$set(e.modeData,"cover",t)},expression:"modeData.cover"}}),e._v(" "),a("upload",{attrs:{uploadUrl:e.uploadUrl,keys:e.keys,isInit:e.imgInit,fileNum:1,arrList:e.modeData.arrList,imgResolution:"460*180"},on:{response:e.doSaveFile}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.LANG["优惠规则编辑"]||"优惠规则编辑",prop:"content"}},[a("el-input",{staticStyle:{display:"none"},model:{value:e.modeData.content,callback:function(t){e.$set(e.modeData,"content",t)},expression:"modeData.content"}}),e._v(" "),e.pcshow?a("markdownEdit",{attrs:{id:"pcid"},model:{value:e.modeData.content,callback:function(t){e.$set(e.modeData,"content",t)},expression:"modeData.content"}}):e._e()],1)],1)],1),e._v(" "),"add"==e.seachData.type?a("el-col",{staticClass:"tCent",attrs:{span:24}},[a("el-button",{attrs:{type:"primary",plain:!0},on:{click:function(t){return e.goBack(e.type="add")}}},[a("span",{domProps:{textContent:e._s(e.LANG["取消生成"]||"取消生成")}})]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.doSubmit(e.type="add")}}},[a("span",{domProps:{textContent:e._s(e.LANG["生成优惠"]||"生成优惠")}})])],1):a("el-col",{staticClass:"tCent",attrs:{span:24}},[a("el-button",{attrs:{type:"primary",plain:!0},on:{click:function(t){return e.goBack(e.type="edit")}}},[a("span",{domProps:{textContent:e._s(e.LANG["取消修改"]||"取消修改")}})]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.doSubmit(e.type="edit")}}},[a("span",{domProps:{textContent:e._s(e.LANG["保存修改"]||"保存修改")}})])],1)],1)],1)},[],!1,n,"data-v-f3eb8d44",null);t.default=d.exports},435:function(e,t,a){}}]);